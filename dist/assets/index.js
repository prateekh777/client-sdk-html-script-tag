(function(ae){typeof define=="function"&&define.amd?define(ae):ae()})(function(){"use strict";var cu=Object.defineProperty;var lu=(ae,ke,Ue)=>ke in ae?cu(ae,ke,{enumerable:!0,configurable:!0,writable:!0,value:Ue}):ae[ke]=Ue;var I=(ae,ke,Ue)=>lu(ae,typeof ke!="symbol"?ke+"":ke,Ue);var ae=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ke(r){if(r.__esModule)return r;var t=r.default;if(typeof t=="function"){var e=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),e}var Ue={};function wn(r,t){if(r==null)return{};var e,n,i=function(a,u){if(a==null)return{};var l,p,m={},g=Object.keys(a);for(p=0;p<g.length;p++)l=g[p],u.indexOf(l)>=0||(m[l]=a[l]);return m}(r,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(n=0;n<o.length;n++)e=o[n],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(r,e)&&(i[e]=r[e])}return i}function ce(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function q(r){return q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(r)}function Sn(r){var t=function(e,n){if(q(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,n);if(q(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}(r,"string");return q(t)==="symbol"?t:String(t)}function En(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,Sn(n.key),n)}}function le(r,t,e){return t&&En(r.prototype,t),e&&En(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function Ce(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function ht(r,t){return ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},ht(r,t)}function Mt(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&ht(r,t)}function At(r,t){if(t&&(q(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ce(r)}function ue(r){return ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ue(r)}function Te(r,t,e){return(t=Sn(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function kn(r,t,e,n,i,o,a){try{var u=r[o](a),l=u.value}catch(p){return void e(p)}u.done?t(l):Promise.resolve(l).then(n,i)}function P(r){return function(){var t=this,e=arguments;return new Promise(function(n,i){var o=r.apply(t,e);function a(l){kn(o,n,i,a,u,"next",l)}function u(l){kn(o,n,i,a,u,"throw",l)}a(void 0)})}}function Cn(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function ve(r,t){return function(e){if(Array.isArray(e))return e}(r)||function(e,n){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var o,a,u,l,p=[],m=!0,g=!1;try{if(u=(i=i.call(e)).next,n===0){if(Object(i)!==i)return;m=!1}else for(;!(m=(o=u.call(i)).done)&&(p.push(o.value),p.length!==n);m=!0);}catch(b){g=!0,a=b}finally{try{if(!m&&i.return!=null&&(l=i.return(),Object(l)!==l))return}finally{if(g)throw a}}return p}}(r,t)||function(e,n){if(e){if(typeof e=="string")return Cn(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);return i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set"?Array.from(e):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Cn(e,n):void 0}}(r,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var Tn,Me={},ga={get exports(){return Me},set exports(r){Me=r}},nt=typeof Reflect=="object"?Reflect:null,Mn=nt&&typeof nt.apply=="function"?nt.apply:function(r,t,e){return Function.prototype.apply.call(r,t,e)};Tn=nt&&typeof nt.ownKeys=="function"?nt.ownKeys:Object.getOwnPropertySymbols?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:function(r){return Object.getOwnPropertyNames(r)};var An=Number.isNaN||function(r){return r!=r};function V(){V.init.call(this)}ga.exports=V,Me.once=function(r,t){return new Promise(function(e,n){function i(a){r.removeListener(t,o),n(a)}function o(){typeof r.removeListener=="function"&&r.removeListener("error",i),e([].slice.call(arguments))}Rn(r,t,o,{once:!0}),t!=="error"&&function(a,u,l){typeof a.on=="function"&&Rn(a,"error",u,l)}(r,i,{once:!0})})},V.EventEmitter=V,V.prototype._events=void 0,V.prototype._eventsCount=0,V.prototype._maxListeners=void 0;var On=10;function Ot(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}function Pn(r){return r._maxListeners===void 0?V.defaultMaxListeners:r._maxListeners}function Ln(r,t,e,n){var i,o,a,u;if(Ot(e),(o=r._events)===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",t,e.listener?e.listener:e),o=r._events),a=o[t]),a===void 0)a=o[t]=e,++r._eventsCount;else if(typeof a=="function"?a=o[t]=n?[e,a]:[a,e]:n?a.unshift(e):a.push(e),(i=Pn(r))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=r,l.type=t,l.count=a.length,u=l,console&&console.warn&&console.warn(u)}return r}function va(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function In(r,t,e){var n={fired:!1,wrapFn:void 0,target:r,type:t,listener:e},i=va.bind(n);return i.listener=e,n.wrapFn=i,i}function jn(r,t,e){var n=r._events;if(n===void 0)return[];var i=n[t];return i===void 0?[]:typeof i=="function"?e?[i.listener||i]:[i]:e?function(o){for(var a=new Array(o.length),u=0;u<a.length;++u)a[u]=o[u].listener||o[u];return a}(i):Nn(i,i.length)}function Dn(r){var t=this._events;if(t!==void 0){var e=t[r];if(typeof e=="function")return 1;if(e!==void 0)return e.length}return 0}function Nn(r,t){for(var e=new Array(t),n=0;n<t;++n)e[n]=r[n];return e}function Rn(r,t,e,n){if(typeof r.on=="function")n.once?r.once(t,e):r.on(t,e);else{if(typeof r.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r);r.addEventListener(t,function i(o){n.once&&r.removeEventListener(t,i),e(o)})}}Object.defineProperty(V,"defaultMaxListeners",{enumerable:!0,get:function(){return On},set:function(r){if(typeof r!="number"||r<0||An(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");On=r}}),V.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},V.prototype.setMaxListeners=function(r){if(typeof r!="number"||r<0||An(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this},V.prototype.getMaxListeners=function(){return Pn(this)},V.prototype.emit=function(r){for(var t=[],e=1;e<arguments.length;e++)t.push(arguments[e]);var n=r==="error",i=this._events;if(i!==void 0)n=n&&i.error===void 0;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=i[r];if(u===void 0)return!1;if(typeof u=="function")Mn(u,this,t);else{var l=u.length,p=Nn(u,l);for(e=0;e<l;++e)Mn(p[e],this,t)}return!0},V.prototype.addListener=function(r,t){return Ln(this,r,t,!1)},V.prototype.on=V.prototype.addListener,V.prototype.prependListener=function(r,t){return Ln(this,r,t,!0)},V.prototype.once=function(r,t){return Ot(t),this.on(r,In(this,r,t)),this},V.prototype.prependOnceListener=function(r,t){return Ot(t),this.prependListener(r,In(this,r,t)),this},V.prototype.removeListener=function(r,t){var e,n,i,o,a;if(Ot(t),(n=this._events)===void 0)return this;if((e=n[r])===void 0)return this;if(e===t||e.listener===t)--this._eventsCount==0?this._events=Object.create(null):(delete n[r],n.removeListener&&this.emit("removeListener",r,e.listener||t));else if(typeof e!="function"){for(i=-1,o=e.length-1;o>=0;o--)if(e[o]===t||e[o].listener===t){a=e[o].listener,i=o;break}if(i<0)return this;i===0?e.shift():function(u,l){for(;l+1<u.length;l++)u[l]=u[l+1];u.pop()}(e,i),e.length===1&&(n[r]=e[0]),n.removeListener!==void 0&&this.emit("removeListener",r,a||t)}return this},V.prototype.off=V.prototype.removeListener,V.prototype.removeAllListeners=function(r){var t,e,n;if((e=this._events)===void 0)return this;if(e.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):e[r]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete e[r]),this;if(arguments.length===0){var i,o=Object.keys(e);for(n=0;n<o.length;++n)(i=o[n])!=="removeListener"&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(t=e[r])=="function")this.removeListener(r,t);else if(t!==void 0)for(n=t.length-1;n>=0;n--)this.removeListener(r,t[n]);return this},V.prototype.listeners=function(r){return jn(this,r,!0)},V.prototype.rawListeners=function(r){return jn(this,r,!1)},V.listenerCount=function(r,t){return typeof r.listenerCount=="function"?r.listenerCount(t):Dn.call(r,t)},V.prototype.listenerCount=Dn,V.prototype.eventNames=function(){return this._eventsCount>0?Tn(this._events):[]};var xn=Object.prototype.hasOwnProperty;function Fn(r,t,e){for(e of r.keys())if(ee(e,t))return e}function ee(r,t){var e,n,i;if(r===t)return!0;if(r&&t&&(e=r.constructor)===t.constructor){if(e===Date)return r.getTime()===t.getTime();if(e===RegExp)return r.toString()===t.toString();if(e===Array){if((n=r.length)===t.length)for(;n--&&ee(r[n],t[n]););return n===-1}if(e===Set){if(r.size!==t.size)return!1;for(n of r)if((i=n)&&typeof i=="object"&&!(i=Fn(t,i))||!t.has(i))return!1;return!0}if(e===Map){if(r.size!==t.size)return!1;for(n of r)if((i=n[0])&&typeof i=="object"&&!(i=Fn(t,i))||!ee(n[1],t.get(i)))return!1;return!0}if(e===ArrayBuffer)r=new Uint8Array(r),t=new Uint8Array(t);else if(e===DataView){if((n=r.byteLength)===t.byteLength)for(;n--&&r.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(r)){if((n=r.byteLength)===t.byteLength)for(;n--&&r[n]===t[n];);return n===-1}if(!e||typeof r=="object"){for(e in n=0,r)if(xn.call(r,e)&&++n&&!xn.call(t,e)||!(e in t)||!ee(r[e],t[e]))return!1;return Object.keys(t).length===n}}return r!=r&&t!=t}const ya={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},qn={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},Y={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},Z={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Ie={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class _{static getFirstMatch(t,e){const n=e.match(t);return n&&n.length>0&&n[1]||""}static getSecondMatch(t,e){const n=e.match(t);return n&&n.length>1&&n[2]||""}static matchAndReturnConst(t,e,n){if(t.test(e))return n}static getWindowsVersionName(t){switch(t){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(t){const e=t.split(".").splice(0,2).map(n=>parseInt(n,10)||0);if(e.push(0),e[0]===10)switch(e[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(t){const e=t.split(".").splice(0,2).map(n=>parseInt(n,10)||0);if(e.push(0),!(e[0]===1&&e[1]<5))return e[0]===1&&e[1]<6?"Cupcake":e[0]===1&&e[1]>=6?"Donut":e[0]===2&&e[1]<2?"Eclair":e[0]===2&&e[1]===2?"Froyo":e[0]===2&&e[1]>2?"Gingerbread":e[0]===3?"Honeycomb":e[0]===4&&e[1]<1?"Ice Cream Sandwich":e[0]===4&&e[1]<4?"Jelly Bean":e[0]===4&&e[1]>=4?"KitKat":e[0]===5?"Lollipop":e[0]===6?"Marshmallow":e[0]===7?"Nougat":e[0]===8?"Oreo":e[0]===9?"Pie":void 0}static getVersionPrecision(t){return t.split(".").length}static compareVersions(t,e,n=!1){const i=_.getVersionPrecision(t),o=_.getVersionPrecision(e);let a=Math.max(i,o),u=0;const l=_.map([t,e],p=>{const m=a-_.getVersionPrecision(p),g=p+new Array(m+1).join(".0");return _.map(g.split("."),b=>new Array(20-b.length).join("0")+b).reverse()});for(n&&(u=a-Math.min(i,o)),a-=1;a>=u;){if(l[0][a]>l[1][a])return 1;if(l[0][a]===l[1][a]){if(a===u)return 0;a-=1}else if(l[0][a]<l[1][a])return-1}}static map(t,e){const n=[];let i;if(Array.prototype.map)return Array.prototype.map.call(t,e);for(i=0;i<t.length;i+=1)n.push(e(t[i]));return n}static find(t,e){let n,i;if(Array.prototype.find)return Array.prototype.find.call(t,e);for(n=0,i=t.length;n<i;n+=1){const o=t[n];if(e(o,n))return o}}static assign(t,...e){const n=t;let i,o;if(Object.assign)return Object.assign(t,...e);for(i=0,o=e.length;i<o;i+=1){const a=e[i];typeof a=="object"&&a!==null&&Object.keys(a).forEach(u=>{n[u]=a[u]})}return t}static getBrowserAlias(t){return ya[t]}static getBrowserTypeByAlias(t){return qn[t]||""}}const B=/version\/(\d+(\.?_?\d+)+)/i,_a=[{test:[/googlebot/i],describe(r){const t={name:"Googlebot"},e=_.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,r)||_.getFirstMatch(B,r);return e&&(t.version=e),t}},{test:[/opera/i],describe(r){const t={name:"Opera"},e=_.getFirstMatch(B,r)||_.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}},{test:[/opr\/|opios/i],describe(r){const t={name:"Opera"},e=_.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,r)||_.getFirstMatch(B,r);return e&&(t.version=e),t}},{test:[/SamsungBrowser/i],describe(r){const t={name:"Samsung Internet for Android"},e=_.getFirstMatch(B,r)||_.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}},{test:[/Whale/i],describe(r){const t={name:"NAVER Whale Browser"},e=_.getFirstMatch(B,r)||_.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,r);return e&&(t.version=e),t}},{test:[/MZBrowser/i],describe(r){const t={name:"MZ Browser"},e=_.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,r)||_.getFirstMatch(B,r);return e&&(t.version=e),t}},{test:[/focus/i],describe(r){const t={name:"Focus"},e=_.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,r)||_.getFirstMatch(B,r);return e&&(t.version=e),t}},{test:[/swing/i],describe(r){const t={name:"Swing"},e=_.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,r)||_.getFirstMatch(B,r);return e&&(t.version=e),t}},{test:[/coast/i],describe(r){const t={name:"Opera Coast"},e=_.getFirstMatch(B,r)||_.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(r){const t={name:"Opera Touch"},e=_.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,r)||_.getFirstMatch(B,r);return e&&(t.version=e),t}},{test:[/yabrowser/i],describe(r){const t={name:"Yandex Browser"},e=_.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,r)||_.getFirstMatch(B,r);return e&&(t.version=e),t}},{test:[/ucbrowser/i],describe(r){const t={name:"UC Browser"},e=_.getFirstMatch(B,r)||_.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}},{test:[/Maxthon|mxios/i],describe(r){const t={name:"Maxthon"},e=_.getFirstMatch(B,r)||_.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}},{test:[/epiphany/i],describe(r){const t={name:"Epiphany"},e=_.getFirstMatch(B,r)||_.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}},{test:[/puffin/i],describe(r){const t={name:"Puffin"},e=_.getFirstMatch(B,r)||_.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}},{test:[/sleipnir/i],describe(r){const t={name:"Sleipnir"},e=_.getFirstMatch(B,r)||_.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}},{test:[/k-meleon/i],describe(r){const t={name:"K-Meleon"},e=_.getFirstMatch(B,r)||_.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}},{test:[/micromessenger/i],describe(r){const t={name:"WeChat"},e=_.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,r)||_.getFirstMatch(B,r);return e&&(t.version=e),t}},{test:[/qqbrowser/i],describe(r){const t={name:/qqbrowserlite/i.test(r)?"QQ Browser Lite":"QQ Browser"},e=_.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,r)||_.getFirstMatch(B,r);return e&&(t.version=e),t}},{test:[/msie|trident/i],describe(r){const t={name:"Internet Explorer"},e=_.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}},{test:[/\sedg\//i],describe(r){const t={name:"Microsoft Edge"},e=_.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}},{test:[/edg([ea]|ios)/i],describe(r){const t={name:"Microsoft Edge"},e=_.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}},{test:[/vivaldi/i],describe(r){const t={name:"Vivaldi"},e=_.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}},{test:[/seamonkey/i],describe(r){const t={name:"SeaMonkey"},e=_.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}},{test:[/sailfish/i],describe(r){const t={name:"Sailfish"},e=_.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,r);return e&&(t.version=e),t}},{test:[/silk/i],describe(r){const t={name:"Amazon Silk"},e=_.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}},{test:[/phantom/i],describe(r){const t={name:"PhantomJS"},e=_.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}},{test:[/slimerjs/i],describe(r){const t={name:"SlimerJS"},e=_.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(r){const t={name:"BlackBerry"},e=_.getFirstMatch(B,r)||_.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}},{test:[/(web|hpw)[o0]s/i],describe(r){const t={name:"WebOS Browser"},e=_.getFirstMatch(B,r)||_.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}},{test:[/bada/i],describe(r){const t={name:"Bada"},e=_.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}},{test:[/tizen/i],describe(r){const t={name:"Tizen"},e=_.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,r)||_.getFirstMatch(B,r);return e&&(t.version=e),t}},{test:[/qupzilla/i],describe(r){const t={name:"QupZilla"},e=_.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,r)||_.getFirstMatch(B,r);return e&&(t.version=e),t}},{test:[/firefox|iceweasel|fxios/i],describe(r){const t={name:"Firefox"},e=_.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}},{test:[/electron/i],describe(r){const t={name:"Electron"},e=_.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}},{test:[/MiuiBrowser/i],describe(r){const t={name:"Miui"},e=_.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}},{test:[/chromium/i],describe(r){const t={name:"Chromium"},e=_.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,r)||_.getFirstMatch(B,r);return e&&(t.version=e),t}},{test:[/chrome|crios|crmo/i],describe(r){const t={name:"Chrome"},e=_.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}},{test:[/GSA/i],describe(r){const t={name:"Google Search"},e=_.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}},{test(r){const t=!r.test(/like android/i),e=r.test(/android/i);return t&&e},describe(r){const t={name:"Android Browser"},e=_.getFirstMatch(B,r);return e&&(t.version=e),t}},{test:[/playstation 4/i],describe(r){const t={name:"PlayStation 4"},e=_.getFirstMatch(B,r);return e&&(t.version=e),t}},{test:[/safari|applewebkit/i],describe(r){const t={name:"Safari"},e=_.getFirstMatch(B,r);return e&&(t.version=e),t}},{test:[/.*/i],describe(r){const t=r.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:_.getFirstMatch(t,r),version:_.getSecondMatch(t,r)}}}];var ba=[{test:[/Roku\/DVP/],describe(r){const t=_.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,r);return{name:Z.Roku,version:t}}},{test:[/windows phone/i],describe(r){const t=_.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,r);return{name:Z.WindowsPhone,version:t}}},{test:[/windows /i],describe(r){const t=_.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,r),e=_.getWindowsVersionName(t);return{name:Z.Windows,version:t,versionName:e}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(r){const t={name:Z.iOS},e=_.getSecondMatch(/(Version\/)(\d[\d.]+)/,r);return e&&(t.version=e),t}},{test:[/macintosh/i],describe(r){const t=_.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,r).replace(/[_\s]/g,"."),e=_.getMacOSVersionName(t),n={name:Z.MacOS,version:t};return e&&(n.versionName=e),n}},{test:[/(ipod|iphone|ipad)/i],describe(r){const t=_.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,r).replace(/[_\s]/g,".");return{name:Z.iOS,version:t}}},{test(r){const t=!r.test(/like android/i),e=r.test(/android/i);return t&&e},describe(r){const t=_.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,r),e=_.getAndroidVersionName(t),n={name:Z.Android,version:t};return e&&(n.versionName=e),n}},{test:[/(web|hpw)[o0]s/i],describe(r){const t=_.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,r),e={name:Z.WebOS};return t&&t.length&&(e.version=t),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(r){const t=_.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,r)||_.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,r)||_.getFirstMatch(/\bbb(\d+)/i,r);return{name:Z.BlackBerry,version:t}}},{test:[/bada/i],describe(r){const t=_.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,r);return{name:Z.Bada,version:t}}},{test:[/tizen/i],describe(r){const t=_.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,r);return{name:Z.Tizen,version:t}}},{test:[/linux/i],describe:()=>({name:Z.Linux})},{test:[/CrOS/],describe:()=>({name:Z.ChromeOS})},{test:[/PlayStation 4/],describe(r){const t=_.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,r);return{name:Z.PlayStation4,version:t}}}],wa=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(r){const t=_.getFirstMatch(/(can-l01)/i,r)&&"Nova",e={type:Y.mobile,vendor:"Huawei"};return t&&(e.model=t),e}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:Y.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:Y.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:()=>({type:Y.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:Y.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:Y.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:Y.tablet})},{test(r){const t=r.test(/ipod|iphone/i),e=r.test(/like (ipod|iphone)/i);return t&&!e},describe(r){const t=_.getFirstMatch(/(ipod|iphone)/i,r);return{type:Y.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:Y.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:Y.mobile})},{test:r=>r.getBrowserName(!0)==="blackberry",describe:()=>({type:Y.mobile,vendor:"BlackBerry"})},{test:r=>r.getBrowserName(!0)==="bada",describe:()=>({type:Y.mobile})},{test:r=>r.getBrowserName()==="windows phone",describe:()=>({type:Y.mobile,vendor:"Microsoft"})},{test(r){const t=Number(String(r.getOSVersion()).split(".")[0]);return r.getOSName(!0)==="android"&&t>=3},describe:()=>({type:Y.tablet})},{test:r=>r.getOSName(!0)==="android",describe:()=>({type:Y.mobile})},{test:r=>r.getOSName(!0)==="macos",describe:()=>({type:Y.desktop,vendor:"Apple"})},{test:r=>r.getOSName(!0)==="windows",describe:()=>({type:Y.desktop})},{test:r=>r.getOSName(!0)==="linux",describe:()=>({type:Y.desktop})},{test:r=>r.getOSName(!0)==="playstation 4",describe:()=>({type:Y.tv})},{test:r=>r.getOSName(!0)==="roku",describe:()=>({type:Y.tv})}],Sa=[{test:r=>r.getBrowserName(!0)==="microsoft edge",describe(r){if(/\sedg\//i.test(r))return{name:Ie.Blink};const t=_.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,r);return{name:Ie.EdgeHTML,version:t}}},{test:[/trident/i],describe(r){const t={name:Ie.Trident},e=_.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}},{test:r=>r.test(/presto/i),describe(r){const t={name:Ie.Presto},e=_.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}},{test(r){const t=r.test(/gecko/i),e=r.test(/like gecko/i);return t&&!e},describe(r){const t={name:Ie.Gecko},e=_.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:Ie.Blink})},{test:[/(apple)?webkit/i],describe(r){const t={name:Ie.WebKit},e=_.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,r);return e&&(t.version=e),t}}];class $n{constructor(t,e=!1){if(t==null||t==="")throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},e!==!0&&this.parse()}getUA(){return this._ua}test(t){return t.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const t=_.find(_a,e=>{if(typeof e.test=="function")return e.test(this);if(e.test instanceof Array)return e.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(t){return t?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const t=_.find(ba,e=>{if(typeof e.test=="function")return e.test(this);if(e.test instanceof Array)return e.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os}getOSName(t){const{name:e}=this.getOS();return t?String(e).toLowerCase()||"":e||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(t=!1){const{type:e}=this.getPlatform();return t?String(e).toLowerCase()||"":e||""}parsePlatform(){this.parsedResult.platform={};const t=_.find(wa,e=>{if(typeof e.test=="function")return e.test(this);if(e.test instanceof Array)return e.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(t){return t?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const t=_.find(Sa,e=>{if(typeof e.test=="function")return e.test(this);if(e.test instanceof Array)return e.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return _.assign({},this.parsedResult)}satisfies(t){const e={};let n=0;const i={};let o=0;if(Object.keys(t).forEach(a=>{const u=t[a];typeof u=="string"?(i[a]=u,o+=1):typeof u=="object"&&(e[a]=u,n+=1)}),n>0){const a=Object.keys(e),u=_.find(a,p=>this.isOS(p));if(u){const p=this.satisfies(e[u]);if(p!==void 0)return p}const l=_.find(a,p=>this.isPlatform(p));if(l){const p=this.satisfies(e[l]);if(p!==void 0)return p}}if(o>0){const a=Object.keys(i),u=_.find(a,l=>this.isBrowser(l,!0));if(u!==void 0)return this.compareVersion(i[u])}}isBrowser(t,e=!1){const n=this.getBrowserName().toLowerCase();let i=t.toLowerCase();const o=_.getBrowserTypeByAlias(i);return e&&o&&(i=o.toLowerCase()),i===n}compareVersion(t){let e=[0],n=t,i=!1;const o=this.getBrowserVersion();if(typeof o=="string")return t[0]===">"||t[0]==="<"?(n=t.substr(1),t[1]==="="?(i=!0,n=t.substr(2)):e=[],t[0]===">"?e.push(1):e.push(-1)):t[0]==="="?n=t.substr(1):t[0]==="~"&&(i=!0,n=t.substr(1)),e.indexOf(_.compareVersions(o,n,i))>-1}isOS(t){return this.getOSName(!0)===String(t).toLowerCase()}isPlatform(t){return this.getPlatformType(!0)===String(t).toLowerCase()}isEngine(t){return this.getEngineName(!0)===String(t).toLowerCase()}is(t,e=!1){return this.isBrowser(t,e)||this.isOS(t)||this.isPlatform(t)}some(t=[]){return t.some(e=>this.is(e))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Ea{static getParser(t,e=!1){if(typeof t!="string")throw new Error("UserAgent should be a string");return new $n(t,e)}static parse(t){return new $n(t).getResult()}static get BROWSER_MAP(){return qn}static get ENGINE_MAP(){return Ie}static get OS_MAP(){return Z}static get PLATFORMS_MAP(){return Y}}function Pt(){return Date.now()+Math.random().toString()}function ft(){throw new Error("Method must be implemented in subclass")}function Vn(r,t){return t!=null&&t.proxyUrl?t.proxyUrl+(t.proxyUrl.slice(-1)==="/"?"":"/")+r.substring(8):r}function Lt(r){return r!=null&&r.callObjectBundleUrlOverride?r.callObjectBundleUrlOverride:Vn("https://c.daily.co/call-machine/versioned/".concat("0.75.2","/static/call-machine-object-bundle.js"),r)}function It(r){try{new URL(r)}catch{return!1}return!0}const Un=Object.prototype.toString;function dr(r){switch(Un.call(r)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Be(r,Error)}}function it(r,t){return Un.call(r)===`[object ${t}]`}function Bn(r){return it(r,"ErrorEvent")}function Jn(r){return it(r,"DOMError")}function Ae(r){return it(r,"String")}function pr(r){return typeof r=="object"&&r!==null&&"__sentry_template_string__"in r&&"__sentry_template_values__"in r}function hr(r){return r===null||pr(r)||typeof r!="object"&&typeof r!="function"}function st(r){return it(r,"Object")}function jt(r){return typeof Event<"u"&&Be(r,Event)}function Dt(r){return!!(r&&r.then&&typeof r.then=="function")}function Be(r,t){try{return r instanceof t}catch{return!1}}function Gn(r){return!(typeof r!="object"||r===null||!r.__isVue&&!r._isVue)}function ot(r,t=0){return typeof r!="string"||t===0||r.length<=t?r:`${r.slice(0,t)}...`}function Yn(r,t){if(!Array.isArray(r))return"";const e=[];for(let n=0;n<r.length;n++){const i=r[n];try{Gn(i)?e.push("[VueViewModel]"):e.push(String(i))}catch{e.push("[value cannot be serialized]")}}return e.join(t)}function ka(r,t,e=!1){return!!Ae(r)&&(it(t,"RegExp")?t.test(r):!!Ae(t)&&(e?r===t:r.includes(t)))}function Nt(r,t=[],e=!1){return t.some(n=>ka(r,n,e))}function Ca(r,t,e=250,n,i,o,a){if(!(o.exception&&o.exception.values&&a&&Be(a.originalException,Error)))return;const u=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;var l,p;u&&(o.exception.values=(l=fr(r,t,i,a.originalException,n,o.exception.values,u,0),p=e,l.map(m=>(m.value&&(m.value=ot(m.value,p)),m))))}function fr(r,t,e,n,i,o,a,u){if(o.length>=e+1)return o;let l=[...o];if(Be(n[i],Error)){Wn(a,u);const p=r(t,n[i]),m=l.length;zn(p,i,m,u),l=fr(r,t,e,n[i],i,[p,...l],p,m)}return Array.isArray(n.errors)&&n.errors.forEach((p,m)=>{if(Be(p,Error)){Wn(a,u);const g=r(t,p),b=l.length;zn(g,`errors[${m}]`,b,u),l=fr(r,t,e,p,i,[g,...l],g,b)}}),l}function Wn(r,t){r.mechanism=r.mechanism||{type:"generic",handled:!0},r.mechanism={...r.mechanism,...r.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function zn(r,t,e,n){r.mechanism=r.mechanism||{type:"generic",handled:!0},r.mechanism={...r.mechanism,type:"chained",source:t,exception_id:e,parent_id:n}}function Hn(r){return r===void 0?void 0:r>=400&&r<500?"warning":r>=500?"error":void 0}const Je="8.33.1",F=globalThis;function Rt(r,t,e){const n=F,i=n.__SENTRY__=n.__SENTRY__||{},o=i[Je]=i[Je]||{};return o[r]||(o[r]=t())}const mr=F;function Qn(r,t={}){if(!r)return"<unknown>";try{let e=r;const n=5,i=[];let o=0,a=0;const u=" > ",l=u.length;let p;const m=Array.isArray(t)?t:t.keyAttrs,g=!Array.isArray(t)&&t.maxStringLength||80;for(;e&&o++<n&&(p=Ta(e,m),!(p==="html"||o>1&&a+i.length*l+p.length>=g));)i.push(p),a+=p.length,e=e.parentNode;return i.reverse().join(u)}catch{return"<unknown>"}}function Ta(r,t){const e=r,n=[];if(!e||!e.tagName)return"";if(mr.HTMLElement&&e instanceof HTMLElement&&e.dataset){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}n.push(e.tagName.toLowerCase());const i=t&&t.length?t.filter(a=>e.getAttribute(a)).map(a=>[a,e.getAttribute(a)]):null;if(i&&i.length)i.forEach(a=>{n.push(`[${a[0]}="${a[1]}"]`)});else{e.id&&n.push(`#${e.id}`);const a=e.className;if(a&&Ae(a)){const u=a.split(/\s+/);for(const l of u)n.push(`.${l}`)}}const o=["aria-label","type","name","title","alt"];for(const a of o){const u=e.getAttribute(a);u&&n.push(`[${a}="${u}"]`)}return n.join("")}const mt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,gr=["debug","info","warn","error","log","assert","trace"],xt={};function vr(r){if(!("console"in F))return r();const t=F.console,e={},n=Object.keys(xt);n.forEach(i=>{const o=xt[i];e[i]=t[i],t[i]=o});try{return r()}finally{n.forEach(i=>{t[i]=e[i]})}}const L=Rt("logger",function(){let r=!1;const t={enable:()=>{r=!0},disable:()=>{r=!1},isEnabled:()=>r};return mt?gr.forEach(e=>{t[e]=(...n)=>{r&&vr(()=>{F.console[e](`Sentry Logger [${e}]:`,...n)})}}):gr.forEach(e=>{t[e]=()=>{}}),t}),Ma=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Ft(r,t=!1){const{host:e,path:n,pass:i,port:o,projectId:a,protocol:u,publicKey:l}=r;return`${u}://${l}${t&&i?`:${i}`:""}@${e}${o?`:${o}`:""}/${n&&`${n}/`}${a}`}function Kn(r){return{protocol:r.protocol,publicKey:r.publicKey||"",pass:r.pass||"",host:r.host,port:r.port||"",path:r.path||"",projectId:r.projectId}}function Aa(r){const t=typeof r=="string"?function(e){const n=Ma.exec(e);if(!n)return void vr(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});const[i,o,a="",u="",l="",p=""]=n.slice(1);let m="",g=p;const b=g.split("/");if(b.length>1&&(m=b.slice(0,-1).join("/"),g=b.pop()),g){const w=g.match(/^\d+/);w&&(g=w[0])}return Kn({host:u,pass:a,path:m,projectId:g,port:l,protocol:i,publicKey:o})}(r):Kn(r);if(t&&function(e){if(!mt)return!0;const{port:n,projectId:i,protocol:o}=e;return!(["protocol","publicKey","host","projectId"].find(a=>!e[a]&&(L.error(`Invalid Sentry Dsn: ${a} missing`),!0))||(i.match(/^\d+$/)?function(a){return a==="http"||a==="https"}(o)?n&&isNaN(parseInt(n,10))&&(L.error(`Invalid Sentry Dsn: Invalid port ${n}`),1):(L.error(`Invalid Sentry Dsn: Invalid protocol ${o}`),1):(L.error(`Invalid Sentry Dsn: Invalid projectId ${i}`),1)))}(t))return t}class ye extends Error{constructor(t,e="warn"){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=e}}function re(r,t,e){if(!(t in r))return;const n=r[t],i=e(n);typeof i=="function"&&Xn(i,n),r[t]=i}function Ge(r,t,e){try{Object.defineProperty(r,t,{value:e,writable:!0,configurable:!0})}catch{mt&&L.log(`Failed to add non-enumerable property "${t}" to object`,r)}}function Xn(r,t){try{const e=t.prototype||{};r.prototype=t.prototype=e,Ge(r,"__sentry_original__",t)}catch{}}function yr(r){return r.__sentry_original__}function Zn(r){if(dr(r))return{message:r.message,name:r.name,stack:r.stack,...ti(r)};if(jt(r)){const t={type:r.type,target:ei(r.target),currentTarget:ei(r.currentTarget),...ti(r)};return typeof CustomEvent<"u"&&Be(r,CustomEvent)&&(t.detail=r.detail),t}return r}function ei(r){try{return t=r,typeof Element<"u"&&Be(t,Element)?Qn(r):Object.prototype.toString.call(r)}catch{return"<unknown>"}var t}function ti(r){if(typeof r=="object"&&r!==null){const t={};for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e]);return t}return{}}function de(r){return _r(r,new Map)}function _r(r,t){if(function(e){if(!st(e))return!1;try{const n=Object.getPrototypeOf(e).constructor.name;return!n||n==="Object"}catch{return!0}}(r)){const e=t.get(r);if(e!==void 0)return e;const n={};t.set(r,n);for(const i of Object.getOwnPropertyNames(r))r[i]!==void 0&&(n[i]=_r(r[i],t));return n}if(Array.isArray(r)){const e=t.get(r);if(e!==void 0)return e;const n=[];return t.set(r,n),r.forEach(i=>{n.push(_r(i,t))}),n}return r}const Ye="?",ri=/\(error: (.*)\)/,ni=/captureMessage|captureException/;function qt(r){return r[r.length-1]||{}}const ii="<anonymous>";function je(r){try{return r&&typeof r=="function"&&r.name||ii}catch{return ii}}function si(r){const t=r.exception;if(t){const e=[];try{return t.values.forEach(n=>{n.stacktrace.frames&&e.push(...n.stacktrace.frames)}),e}catch{return}}}const $t={},oi={};function We(r,t){$t[r]=$t[r]||[],$t[r].push(t)}function ze(r,t){oi[r]||(t(),oi[r]=!0)}function pe(r,t){const e=r&&$t[r];if(e)for(const n of e)try{n(t)}catch(i){mt&&L.error(`Error while triggering instrumentation handler.
Type: ${r}
Name: ${je(n)}
Error:`,i)}}function Oa(){"console"in F&&gr.forEach(function(r){r in F.console&&re(F.console,r,function(t){return xt[r]=t,function(...e){pe("console",{args:e,level:r});const n=xt[r];n&&n.apply(F.console,e)}})})}const br=F;function wr(r){return r&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(r.toString())}function Pa(){if(typeof EdgeRuntime=="string")return!0;if(!function(){if(!("fetch"in br))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}())return!1;if(wr(br.fetch))return!0;let r=!1;const t=br.document;if(t&&typeof t.createElement=="function")try{const e=t.createElement("iframe");e.hidden=!0,t.head.appendChild(e),e.contentWindow&&e.contentWindow.fetch&&(r=wr(e.contentWindow.fetch)),t.head.removeChild(e)}catch(e){mt&&L.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return r}function gt(){return Date.now()/1e3}const De=function(){const{performance:r}=F;if(!r||!r.now)return gt;const t=Date.now()-r.now(),e=r.timeOrigin==null?t:r.timeOrigin;return()=>(e+r.now())/1e3}();function La(r,t){const e="fetch";We(e,r),ze(e,()=>function(n,i=!1){i&&!Pa()||re(F,"fetch",function(o){return function(...a){const{method:u,url:l}=function(g){if(g.length===0)return{method:"GET",url:""};if(g.length===2){const[w,y]=g;return{url:ai(w),method:Sr(y,"method")?String(y.method).toUpperCase():"GET"}}const b=g[0];return{url:ai(b),method:Sr(b,"method")?String(b.method).toUpperCase():"GET"}}(a),p={args:a,fetchData:{method:u,url:l},startTimestamp:1e3*De()};pe("fetch",{...p});const m=new Error().stack;return o.apply(F,a).then(async g=>(pe("fetch",{...p,endTimestamp:1e3*De(),response:g}),g),g=>{throw pe("fetch",{...p,endTimestamp:1e3*De(),error:g}),dr(g)&&g.stack===void 0&&(g.stack=m,Ge(g,"framesToPop",1)),g})}})}(void 0,t))}function Sr(r,t){return!!r&&typeof r=="object"&&!!r[t]}function ai(r){return typeof r=="string"?r:r?Sr(r,"url")?r.url:r.toString?r.toString():"":""}(()=>{const{performance:r}=F;!r||!r.now||(r.now(),r.timing&&r.timing.navigationStart)})();let Vt=null;function Ia(){Vt=F.onerror,F.onerror=function(r,t,e,n,i){return pe("error",{column:n,error:i,line:e,msg:r,url:t}),!(!Vt||Vt.__SENTRY_LOADER__)&&Vt.apply(this,arguments)},F.onerror.__SENTRY_INSTRUMENTED__=!0}let Ut=null;function ja(){Ut=F.onunhandledrejection,F.onunhandledrejection=function(r){return pe("unhandledrejection",r),!(Ut&&!Ut.__SENTRY_LOADER__)||Ut.apply(this,arguments)},F.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function he(){const r=F,t=r.crypto||r.msCrypto;let e=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(e=()=>{const n=new Uint8Array(1);return t.getRandomValues(n),n[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,n=>(n^(15&e())>>n/4).toString(16))}function ci(r){return r.exception&&r.exception.values?r.exception.values[0]:void 0}function Ne(r){const{message:t,event_id:e}=r;if(t)return t;const n=ci(r);return n?n.type&&n.value?`${n.type}: ${n.value}`:n.type||n.value||e||"<unknown>":e||"<unknown>"}function Er(r,t,e){const n=r.exception=r.exception||{},i=n.values=n.values||[],o=i[0]=i[0]||{};o.value||(o.value=t||""),o.type||(o.type="Error")}function vt(r,t){const e=ci(r);if(!e)return;const n=e.mechanism;if(e.mechanism={type:"generic",handled:!0,...n,...t},t&&"data"in t){const i={...n&&n.data,...t.data};e.mechanism.data=i}}function li(r){if(r&&r.__sentry_captured__)return!0;try{Ge(r,"__sentry_captured__",!0)}catch{}return!1}function Re(r,t=100,e=1/0){try{return kr("",r,t,e)}catch(n){return{ERROR:`**non-serializable** (${n})`}}}function ui(r,t=3,e=102400){const n=Re(r,t);return i=n,function(o){return~-encodeURI(o).split(/%..|./).length}(JSON.stringify(i))>e?ui(r,t-1,e):n;var i}function kr(r,t,e=1/0,n=1/0,i=function(){const o=typeof WeakSet=="function",a=o?new WeakSet:[];return[function(u){if(o)return!!a.has(u)||(a.add(u),!1);for(let l=0;l<a.length;l++)if(a[l]===u)return!0;return a.push(u),!1},function(u){if(o)a.delete(u);else for(let l=0;l<a.length;l++)if(a[l]===u){a.splice(l,1);break}}]}()){const[o,a]=i;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const u=function(w,y){try{if(w==="domain"&&y&&typeof y=="object"&&y._events)return"[Domain]";if(w==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&y===global)return"[Global]";if(typeof window<"u"&&y===window)return"[Window]";if(typeof document<"u"&&y===document)return"[Document]";if(Gn(y))return"[VueViewModel]";if(st(E=y)&&"nativeEvent"in E&&"preventDefault"in E&&"stopPropagation"in E)return"[SyntheticEvent]";if(typeof y=="number"&&!Number.isFinite(y))return`[${y}]`;if(typeof y=="function")return`[Function: ${je(y)}]`;if(typeof y=="symbol")return`[${String(y)}]`;if(typeof y=="bigint")return`[BigInt: ${String(y)}]`;const C=function(O){const j=Object.getPrototypeOf(O);return j?j.constructor.name:"null prototype"}(y);return/^HTML(\w*)Element$/.test(C)?`[HTMLElement: ${C}]`:`[object ${C}]`}catch(C){return`**non-serializable** (${C})`}var E}(r,t);if(!u.startsWith("[object "))return u;if(t.__sentry_skip_normalization__)return t;const l=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:e;if(l===0)return u.replace("object ","");if(o(t))return"[Circular ~]";const p=t;if(p&&typeof p.toJSON=="function")try{return kr("",p.toJSON(),l-1,n,i)}catch{}const m=Array.isArray(t)?[]:{};let g=0;const b=Zn(t);for(const w in b){if(!Object.prototype.hasOwnProperty.call(b,w))continue;if(g>=n){m[w]="[MaxProperties ~]";break}const y=b[w];m[w]=kr(w,y,l-1,n,i),g++}return a(t),m}var Oe;function He(r){return new ie(t=>{t(r)})}function Bt(r){return new ie((t,e)=>{e(r)})}(function(r){r[r.PENDING=0]="PENDING",r[r.RESOLVED=1]="RESOLVED",r[r.REJECTED=2]="REJECTED"})(Oe||(Oe={}));class ie{constructor(t){ie.prototype.__init.call(this),ie.prototype.__init2.call(this),ie.prototype.__init3.call(this),ie.prototype.__init4.call(this),this._state=Oe.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(e){this._reject(e)}}then(t,e){return new ie((n,i)=>{this._handlers.push([!1,o=>{if(t)try{n(t(o))}catch(a){i(a)}else n(o)},o=>{if(e)try{n(e(o))}catch(a){i(a)}else i(o)}]),this._executeHandlers()})}catch(t){return this.then(e=>e,t)}finally(t){return new ie((e,n)=>{let i,o;return this.then(a=>{o=!1,i=a,t&&t()},a=>{o=!0,i=a,t&&t()}).then(()=>{o?n(i):e(i)})})}__init(){this._resolve=t=>{this._setResult(Oe.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(Oe.REJECTED,t)}}__init3(){this._setResult=(t,e)=>{this._state===Oe.PENDING&&(Dt(e)?e.then(this._resolve,this._reject):(this._state=t,this._value=e,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Oe.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(e=>{e[0]||(this._state===Oe.RESOLVED&&e[1](this._value),this._state===Oe.REJECTED&&e[2](this._value),e[0]=!0)})}}}function Da(r){const t=[];function e(n){return t.splice(t.indexOf(n),1)[0]||Promise.resolve(void 0)}return{$:t,add:function(n){if(!(r===void 0||t.length<r))return Bt(new ye("Not adding Promise because buffer limit was reached."));const i=n();return t.indexOf(i)===-1&&t.push(i),i.then(()=>e(i)).then(null,()=>e(i).then(null,()=>{})),i},drain:function(n){return new ie((i,o)=>{let a=t.length;if(!a)return i(!0);const u=setTimeout(()=>{n&&n>0&&i(!1)},n);t.forEach(l=>{He(l).then(()=>{--a||(clearTimeout(u),i(!0))},o)})})}}}function Cr(r){if(!r)return{};const t=r.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const e=t[6]||"",n=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:e,hash:n,relative:t[5]+e+n}}const Na=["fatal","error","warning","log","info","debug"];function Ra(r){return r==="warn"?"warning":Na.includes(r)?r:"log"}const xa=/^sentry-/;function Fa(r){const t=function(n){if(!(!n||!Ae(n)&&!Array.isArray(n)))return Array.isArray(n)?n.reduce((i,o)=>{const a=di(o);return Object.entries(a).forEach(([u,l])=>{i[u]=l}),i},{}):di(n)}(r);if(!t)return;const e=Object.entries(t).reduce((n,[i,o])=>(i.match(xa)&&(n[i.slice(7)]=o),n),{});return Object.keys(e).length>0?e:void 0}function di(r){return r.split(",").map(t=>t.split("=").map(e=>decodeURIComponent(e.trim()))).reduce((t,[e,n])=>(e&&n&&(t[e]=n),t),{})}function yt(r,t=[]){return[r,t]}function qa(r,t){const[e,n]=r;return[e,[...n,t]]}function pi(r,t){const e=r[1];for(const n of e)if(t(n,n[0].type))return!0;return!1}function Tr(r){return F.__SENTRY__&&F.__SENTRY__.encodePolyfill?F.__SENTRY__.encodePolyfill(r):new TextEncoder().encode(r)}function $a(r){const[t,e]=r;let n=JSON.stringify(t);function i(o){typeof n=="string"?n=typeof o=="string"?n+o:[Tr(n),o]:n.push(typeof o=="string"?Tr(o):o)}for(const o of e){const[a,u]=o;if(i(`
${JSON.stringify(a)}
`),typeof u=="string"||u instanceof Uint8Array)i(u);else{let l;try{l=JSON.stringify(u)}catch{l=JSON.stringify(Re(u))}i(l)}}return typeof n=="string"?n:function(o){const a=o.reduce((p,m)=>p+m.length,0),u=new Uint8Array(a);let l=0;for(const p of o)u.set(p,l),l+=p.length;return u}(n)}function Va(r){const t=typeof r.data=="string"?Tr(r.data):r.data;return[de({type:"attachment",length:t.length,filename:r.filename,content_type:r.contentType,attachment_type:r.attachmentType}),t]}const Ua={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function hi(r){return Ua[r]}function fi(r){if(!r||!r.sdk)return;const{name:t,version:e}=r.sdk;return{name:t,version:e}}function Ba(r,{statusCode:t,headers:e},n=Date.now()){const i={...r},o=e&&e["x-sentry-rate-limits"],a=e&&e["retry-after"];if(o)for(const u of o.trim().split(",")){const[l,p,,,m]=u.split(":",5),g=parseInt(l,10),b=1e3*(isNaN(g)?60:g);if(p)for(const w of p.split(";"))w==="metric_bucket"&&m&&!m.split(";").includes("custom")||(i[w]=n+b);else i.all=n+b}else a?i.all=n+function(u,l=Date.now()){const p=parseInt(`${u}`,10);if(!isNaN(p))return 1e3*p;const m=Date.parse(`${u}`);return isNaN(m)?6e4:m-l}(a,n):t===429&&(i.all=n+6e4);return i}function mi(){return{traceId:he(),spanId:he().substring(16)}}const Jt=F,G=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function Gt(){return Mr(F),F}function Mr(r){const t=r.__SENTRY__=r.__SENTRY__||{};return t.version=t.version||Je,t[Je]=t[Je]||{}}function Ar(r,t={}){if(t.user&&(!r.ipAddress&&t.user.ip_address&&(r.ipAddress=t.user.ip_address),r.did||t.did||(r.did=t.user.id||t.user.email||t.user.username)),r.timestamp=t.timestamp||De(),t.abnormal_mechanism&&(r.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(r.ignoreDuration=t.ignoreDuration),t.sid&&(r.sid=t.sid.length===32?t.sid:he()),t.init!==void 0&&(r.init=t.init),!r.did&&t.did&&(r.did=`${t.did}`),typeof t.started=="number"&&(r.started=t.started),r.ignoreDuration)r.duration=void 0;else if(typeof t.duration=="number")r.duration=t.duration;else{const e=r.timestamp-r.started;r.duration=e>=0?e:0}t.release&&(r.release=t.release),t.environment&&(r.environment=t.environment),!r.ipAddress&&t.ipAddress&&(r.ipAddress=t.ipAddress),!r.userAgent&&t.userAgent&&(r.userAgent=t.userAgent),typeof t.errors=="number"&&(r.errors=t.errors),t.status&&(r.status=t.status)}const Or="_sentrySpan";function gi(r,t){t?Ge(r,Or,t):delete r[Or]}function vi(r){return r[Or]}class Pr{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=mi()}clone(){const t=new Pr;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,gi(t,vi(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Ar(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,e){return this._tags={...this._tags,[t]:e},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,e){return this._extra={...this._extra,[t]:e},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,e){return e===null?delete this._contexts[t]:this._contexts[t]=e,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const e=typeof t=="function"?t(this):t,[n,i]=e instanceof xe?[e.getScopeData(),e.getRequestSession()]:st(e)?[t,t.requestSession]:[],{tags:o,extra:a,user:u,contexts:l,level:p,fingerprint:m=[],propagationContext:g}=n||{};return this._tags={...this._tags,...o},this._extra={...this._extra,...a},this._contexts={...this._contexts,...l},u&&Object.keys(u).length&&(this._user=u),p&&(this._level=p),m.length&&(this._fingerprint=m),g&&(this._propagationContext=g),i&&(this._requestSession=i),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,gi(this,void 0),this._attachments=[],this._propagationContext=mi(),this._notifyScopeListeners(),this}addBreadcrumb(t,e){const n=typeof e=="number"?e:100;if(n<=0)return this;const i={timestamp:gt(),...t},o=this._breadcrumbs;return o.push(i),this._breadcrumbs=o.length>n?o.slice(-n):o,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:vi(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,e){const n=e&&e.event_id?e.event_id:he();if(!this._client)return L.warn("No client configured on scope - will not capture exception!"),n;const i=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:i,...e,event_id:n},this),n}captureMessage(t,e,n){const i=n&&n.event_id?n.event_id:he();if(!this._client)return L.warn("No client configured on scope - will not capture message!"),i;const o=new Error(t);return this._client.captureMessage(t,e,{originalException:t,syntheticException:o,...n,event_id:i},this),i}captureEvent(t,e){const n=e&&e.event_id?e.event_id:he();return this._client?(this._client.captureEvent(t,{...e,event_id:n},this),n):(L.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}const xe=Pr;class Ja{constructor(t,e){let n,i;n=t||new xe,i=e||new xe,this._stack=[{scope:n}],this._isolationScope=i}withScope(t){const e=this._pushScope();let n;try{n=t(e)}catch(i){throw this._popScope(),i}return Dt(n)?n.then(i=>(this._popScope(),i),i=>{throw this._popScope(),i}):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function at(){const r=Mr(Gt());return r.stack=r.stack||new Ja(Rt("defaultCurrentScope",()=>new xe),Rt("defaultIsolationScope",()=>new xe))}function Ga(r){return at().withScope(r)}function Ya(r,t){const e=at();return e.withScope(()=>(e.getStackTop().scope=r,t(r)))}function yi(r){return at().withScope(()=>r(at().getIsolationScope()))}function Lr(r){const t=Mr(r);return t.acs?t.acs:{withIsolationScope:yi,withScope:Ga,withSetScope:Ya,withSetIsolationScope:(e,n)=>yi(n),getCurrentScope:()=>at().getScope(),getIsolationScope:()=>at().getIsolationScope()}}function Ir(){return Lr(Gt()).getCurrentScope()}function _i(){return Lr(Gt()).getIsolationScope()}function te(){return Ir().getClient()}function Wa(r){const t=r._sentryMetrics;if(!t)return;const e={};for(const[,[n,i]]of t)(e[n]||(e[n]=[])).push(de(i));return e}function za(r){const{spanId:t,traceId:e}=r.spanContext(),{parent_span_id:n}=Yt(r);return de({parent_span_id:n,span_id:t,trace_id:e})}function bi(r){return typeof r=="number"?wi(r):Array.isArray(r)?r[0]+r[1]/1e9:r instanceof Date?wi(r.getTime()):De()}function wi(r){return r>9999999999?r/1e3:r}function Yt(r){if(function(t){return typeof t.getSpanJSON=="function"}(r))return r.getSpanJSON();try{const{spanId:t,traceId:e}=r.spanContext();if(function(n){const i=n;return!!(i.attributes&&i.startTime&&i.name&&i.endTime&&i.status)}(r)){const{attributes:n,startTime:i,name:o,endTime:a,parentSpanId:u,status:l}=r;return de({span_id:t,trace_id:e,data:n,description:o,parent_span_id:u,start_timestamp:bi(i),timestamp:bi(a)||void 0,status:Ha(l),op:n["sentry.op"],origin:n["sentry.origin"],_metrics_summary:Wa(r)})}return{span_id:t,trace_id:e}}catch{return{}}}function Ha(r){if(r&&r.code!==0)return r.code===1?"ok":r.message||"unknown_error"}function Si(r){return r._sentryRootSpan||r}const Ei="production";function ki(r,t){const e=t.getOptions(),{publicKey:n}=t.getDsn()||{},i=de({environment:e.environment||Ei,release:e.release,public_key:n,trace_id:r});return t.emit("createDsc",i),i}function Qa(r){const t=te();if(!t)return{};const e=ki(Yt(r).trace_id||"",t),n=Si(r),i=n._frozenDsc;if(i)return i;const o=n.spanContext().traceState,a=o&&o.get("sentry.dsc"),u=a&&Fa(a);if(u)return u;const l=Yt(n),p=l.data||{},m=p["sentry.sample_rate"];m!=null&&(e.sample_rate=`${m}`);const g=p["sentry.source"],b=l.description;return g!=="url"&&b&&(e.transaction=b),function(w){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const y=te(),E=y&&y.getOptions();return!!E&&(E.enableTracing||"tracesSampleRate"in E||"tracesSampler"in E)}()&&(e.sampled=String(function(w){const{traceFlags:y}=w.spanContext();return y===1}(n))),t.emit("createDsc",e,n),e}function Ka(r,t,e,n){const i=fi(e),o=r.type&&r.type!=="replay_event"?r.type:"event";(function(u,l){l&&(u.sdk=u.sdk||{},u.sdk.name=u.sdk.name||l.name,u.sdk.version=u.sdk.version||l.version,u.sdk.integrations=[...u.sdk.integrations||[],...l.integrations||[]],u.sdk.packages=[...u.sdk.packages||[],...l.packages||[]])})(r,e&&e.sdk);const a=function(u,l,p,m){const g=u.sdkProcessingMetadata&&u.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:u.event_id,sent_at:new Date().toISOString(),...l&&{sdk:l},...!!p&&m&&{dsn:Ft(m)},...g&&{trace:de({...g})}}}(r,i,n,t);return delete r.sdkProcessingMetadata,yt(a,[[{type:o},r]])}function jr(r,t,e,n=0){return new ie((i,o)=>{const a=r[n];if(t===null||typeof a!="function")i(t);else{const u=a({...t},e);G&&a.id&&u===null&&L.log(`Event processor "${a.id}" dropped event`),Dt(u)?u.then(l=>jr(r,l,e,n+1).then(i)).then(null,o):jr(r,u,e,n+1).then(i).then(null,o)}})}function Xa(r,t){const{fingerprint:e,span:n,breadcrumbs:i,sdkProcessingMetadata:o}=t;(function(a,u){const{extra:l,tags:p,user:m,contexts:g,level:b,transactionName:w}=u,y=de(l);y&&Object.keys(y).length&&(a.extra={...y,...a.extra});const E=de(p);E&&Object.keys(E).length&&(a.tags={...E,...a.tags});const C=de(m);C&&Object.keys(C).length&&(a.user={...C,...a.user});const O=de(g);O&&Object.keys(O).length&&(a.contexts={...O,...a.contexts}),b&&(a.level=b),w&&a.type!=="transaction"&&(a.transaction=w)})(r,t),n&&function(a,u){a.contexts={trace:za(u),...a.contexts},a.sdkProcessingMetadata={dynamicSamplingContext:Qa(u),...a.sdkProcessingMetadata};const l=Si(u),p=Yt(l).description;p&&!a.transaction&&a.type==="transaction"&&(a.transaction=p)}(r,n),function(a,u){a.fingerprint=a.fingerprint?function(l){return Array.isArray(l)?l:[l]}(a.fingerprint):[],u&&(a.fingerprint=a.fingerprint.concat(u)),a.fingerprint&&!a.fingerprint.length&&delete a.fingerprint}(r,e),function(a,u){const l=[...a.breadcrumbs||[],...u];a.breadcrumbs=l.length?l:void 0}(r,i),function(a,u){a.sdkProcessingMetadata={...a.sdkProcessingMetadata,...u}}(r,o)}function Ci(r,t){const{extra:e,tags:n,user:i,contexts:o,level:a,sdkProcessingMetadata:u,breadcrumbs:l,fingerprint:p,eventProcessors:m,attachments:g,propagationContext:b,transactionName:w,span:y}=t;_t(r,"extra",e),_t(r,"tags",n),_t(r,"user",i),_t(r,"contexts",o),_t(r,"sdkProcessingMetadata",u),a&&(r.level=a),w&&(r.transactionName=w),y&&(r.span=y),l.length&&(r.breadcrumbs=[...r.breadcrumbs,...l]),p.length&&(r.fingerprint=[...r.fingerprint,...p]),m.length&&(r.eventProcessors=[...r.eventProcessors,...m]),g.length&&(r.attachments=[...r.attachments,...g]),r.propagationContext={...r.propagationContext,...b}}function _t(r,t,e){if(e&&Object.keys(e).length){r[t]={...r[t]};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[t][n]=e[n])}}function Za(r,t,e,n,i,o){const{normalizeDepth:a=3,normalizeMaxBreadth:u=1e3}=r,l={...t,event_id:t.event_id||e.event_id||he(),timestamp:t.timestamp||gt()},p=e.integrations||r.integrations.map(y=>y.name);(function(y,E){const{environment:C,release:O,dist:j,maxValueLength:x=250}=E;"environment"in y||(y.environment="environment"in E?C:Ei),y.release===void 0&&O!==void 0&&(y.release=O),y.dist===void 0&&j!==void 0&&(y.dist=j),y.message&&(y.message=ot(y.message,x));const z=y.exception&&y.exception.values&&y.exception.values[0];z&&z.value&&(z.value=ot(z.value,x));const W=y.request;W&&W.url&&(W.url=ot(W.url,x))})(l,r),function(y,E){E.length>0&&(y.sdk=y.sdk||{},y.sdk.integrations=[...y.sdk.integrations||[],...E])}(l,p),i&&i.emit("applyFrameMetadata",t),t.type===void 0&&function(y,E){const C=F._sentryDebugIds;if(!C)return;let O;const j=Ti.get(E);j?O=j:(O=new Map,Ti.set(E,O));const x=Object.entries(C).reduce((z,[W,me])=>{let oe;const we=O.get(W);we?oe=we:(oe=E(W),O.set(W,oe));for(let et=oe.length-1;et>=0;et--){const Ct=oe[et];if(Ct.filename){z[Ct.filename]=me;break}}return z},{});try{y.exception.values.forEach(z=>{z.stacktrace.frames.forEach(W=>{W.filename&&(W.debug_id=x[W.filename])})})}catch{}}(l,r.stackParser);const m=function(y,E){if(!E)return y;const C=y?y.clone():new xe;return C.update(E),C}(n,e.captureContext);e.mechanism&&vt(l,e.mechanism);const g=i?i.getEventProcessors():[],b=Rt("globalScope",()=>new xe).getScopeData();o&&Ci(b,o.getScopeData()),m&&Ci(b,m.getScopeData());const w=[...e.attachments||[],...b.attachments];return w.length&&(e.attachments=w),Xa(l,b),jr([...g,...b.eventProcessors],l,e).then(y=>(y&&function(E){const C={};try{E.exception.values.forEach(j=>{j.stacktrace.frames.forEach(x=>{x.debug_id&&(x.abs_path?C[x.abs_path]=x.debug_id:x.filename&&(C[x.filename]=x.debug_id),delete x.debug_id)})})}catch{}if(Object.keys(C).length===0)return;E.debug_meta=E.debug_meta||{},E.debug_meta.images=E.debug_meta.images||[];const O=E.debug_meta.images;Object.entries(C).forEach(([j,x])=>{O.push({type:"sourcemap",code_file:j,debug_id:x})})}(y),typeof a=="number"&&a>0?function(E,C,O){if(!E)return null;const j={...E,...E.breadcrumbs&&{breadcrumbs:E.breadcrumbs.map(x=>({...x,...x.data&&{data:Re(x.data,C,O)}}))},...E.user&&{user:Re(E.user,C,O)},...E.contexts&&{contexts:Re(E.contexts,C,O)},...E.extra&&{extra:Re(E.extra,C,O)}};return E.contexts&&E.contexts.trace&&j.contexts&&(j.contexts.trace=E.contexts.trace,E.contexts.trace.data&&(j.contexts.trace.data=Re(E.contexts.trace.data,C,O))),E.spans&&(j.spans=E.spans.map(x=>({...x,...x.data&&{data:Re(x.data,C,O)}}))),j}(y,a,u):y))}const Ti=new WeakMap;function uu(r){}function Mi(r,t){return Ir().captureEvent(r,t)}function ec(r,t){return e={sentry_key:r.publicKey,sentry_version:"7",...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(e).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(e[n])}`).join("&");var e}const Ai=[];function Oi(r,t){for(const e of t)e&&e.afterAllSetup&&e.afterAllSetup(r)}function Pi(r,t,e){if(e[t.name])G&&L.log(`Integration skipped because it was already installed: ${t.name}`);else{if(e[t.name]=t,Ai.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),Ai.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(r),typeof t.preprocessEvent=="function"){const n=t.preprocessEvent.bind(t);r.on("preprocessEvent",(i,o)=>n(i,o,r))}if(typeof t.processEvent=="function"){const n=t.processEvent.bind(t),i=Object.assign((o,a)=>n(o,a,r),{id:t.name});r.addEventProcessor(i)}G&&L.log(`Integration installed: ${t.name}`)}}const Li="Not capturing exception because it's already been captured.";class tc{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=Aa(t.dsn):G&&L.warn("No DSN provided, client will not send events."),this._dsn){const o=(e=this._dsn,n=t.tunnel,i=t._metadata?t._metadata.sdk:void 0,n||`${function(a){return`${function(u){const l=u.protocol?`${u.protocol}:`:"",p=u.port?`:${u.port}`:"";return`${l}//${u.host}${p}${u.path?`/${u.path}`:""}/api/`}(a)}${a.projectId}/envelope/`}(e)}?${ec(e,i)}`);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:o})}var e,n,i}captureException(t,e,n){const i=he();if(li(t))return G&&L.log(Li),i;const o={event_id:i,...e};return this._process(this.eventFromException(t,o).then(a=>this._captureEvent(a,o,n))),o.event_id}captureMessage(t,e,n,i){const o={event_id:he(),...n},a=pr(t)?t:String(t),u=hr(t)?this.eventFromMessage(a,e,o):this.eventFromException(t,o);return this._process(u.then(l=>this._captureEvent(l,o,i))),o.event_id}captureEvent(t,e,n){const i=he();if(e&&e.originalException&&li(e.originalException))return G&&L.log(Li),i;const o={event_id:i,...e},a=(t.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(t,o,a||n)),o.event_id}captureSession(t){typeof t.release!="string"?G&&L.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),Ar(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const e=this._transport;return e?(this.emit("flush"),this._isClientDoneProcessing(t).then(n=>e.flush(t).then(i=>n&&i))):He(!0)}close(t){return this.flush(t).then(e=>(this.getOptions().enabled=!1,this.emit("close"),e))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const e=this._integrations[t.name];Pi(this,t,this._integrations),e||Oi(this,[t])}sendEvent(t,e={}){this.emit("beforeSendEvent",t,e);let n=Ka(t,this._dsn,this._options._metadata,this._options.tunnel);for(const o of e.attachments||[])n=qa(n,Va(o));const i=this.sendEnvelope(n);i&&i.then(o=>this.emit("afterSendEvent",t,o),null)}sendSession(t){const e=function(n,i,o,a){const u=fi(o);return yt({sent_at:new Date().toISOString(),...u&&{sdk:u},...!!a&&i&&{dsn:Ft(i)}},["aggregates"in n?[{type:"sessions"},n]:[{type:"session"},n.toJSON()]])}(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(e)}recordDroppedEvent(t,e,n){if(this._options.sendClientReports){const i=typeof n=="number"?n:1,o=`${t}:${e}`;G&&L.log(`Recording outcome: "${o}"${i>1?` (${i} times)`:""}`),this._outcomes[o]=(this._outcomes[o]||0)+i}}on(t,e){const n=this._hooks[t]=this._hooks[t]||[];return n.push(e),()=>{const i=n.indexOf(e);i>-1&&n.splice(i,1)}}emit(t,...e){const n=this._hooks[t];n&&n.forEach(i=>i(...e))}sendEnvelope(t){return this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport?this._transport.send(t).then(null,e=>(G&&L.error("Error while sending event:",e),e)):(G&&L.error("Transport disabled"),He({}))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=function(e,n){const i={};return n.forEach(o=>{o&&Pi(e,o,i)}),i}(this,t),Oi(this,t)}_updateSessionFromEvent(t,e){let n=!1,i=!1;const o=e.exception&&e.exception.values;if(o){i=!0;for(const u of o){const l=u.mechanism;if(l&&l.handled===!1){n=!0;break}}}const a=t.status==="ok";(a&&t.errors===0||a&&n)&&(Ar(t,{...n&&{status:"crashed"},errors:t.errors||Number(i||n)}),this.captureSession(t))}_isClientDoneProcessing(t){return new ie(e=>{let n=0;const i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),e(!0)):(n+=1,t&&n>=t&&(clearInterval(i),e(!1)))},1)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,e,n,i=_i()){const o=this.getOptions(),a=Object.keys(this._integrations);return!e.integrations&&a.length>0&&(e.integrations=a),this.emit("preprocessEvent",t,e),t.type||i.setLastEventId(t.event_id||e.event_id),Za(o,t,e,n,this,i).then(u=>{if(u===null)return u;const l={...i.getPropagationContext(),...n?n.getPropagationContext():void 0};if(!(u.contexts&&u.contexts.trace)&&l){const{traceId:p,spanId:m,parentSpanId:g,dsc:b}=l;u.contexts={trace:de({trace_id:p,span_id:m,parent_span_id:g}),...u.contexts};const w=b||ki(p,this);u.sdkProcessingMetadata={dynamicSamplingContext:w,...u.sdkProcessingMetadata}}return u})}_captureEvent(t,e={},n){return this._processEvent(t,e,n).then(i=>i.event_id,i=>{if(G){const o=i;o.logLevel==="log"?L.log(o.message):L.warn(o)}})}_processEvent(t,e,n){const i=this.getOptions(),{sampleRate:o}=i,a=ji(t),u=Ii(t),l=t.type||"error",p=`before send for type \`${l}\``,m=o===void 0?void 0:function(w){if(typeof w=="boolean")return Number(w);const y=typeof w=="string"?parseFloat(w):w;if(!(typeof y!="number"||isNaN(y)||y<0||y>1))return y;G&&L.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(w)} of type ${JSON.stringify(typeof w)}.`)}(o);if(u&&typeof m=="number"&&Math.random()>m)return this.recordDroppedEvent("sample_rate","error",t),Bt(new ye(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const g=l==="replay_event"?"replay":l,b=(t.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(t,e,n,b).then(w=>{if(w===null)throw this.recordDroppedEvent("event_processor",g,t),new ye("An event processor returned `null`, will not send event.","log");if(e.data&&e.data.__sentry__===!0)return w;const y=function(E,C,O,j){const{beforeSend:x,beforeSendTransaction:z,beforeSendSpan:W}=C;if(Ii(O)&&x)return x(O,j);if(ji(O)){if(O.spans&&W){const me=[];for(const oe of O.spans){const we=W(oe);we?me.push(we):E.recordDroppedEvent("before_send","span")}O.spans=me}if(z){if(O.spans){const me=O.spans.length;O.sdkProcessingMetadata={...O.sdkProcessingMetadata,spanCountBeforeProcessing:me}}return z(O,j)}}return O}(this,i,w,e);return function(E,C){const O=`${C} must return \`null\` or a valid event.`;if(Dt(E))return E.then(j=>{if(!st(j)&&j!==null)throw new ye(O);return j},j=>{throw new ye(`${C} rejected with ${j}`)});if(!st(E)&&E!==null)throw new ye(O);return E}(y,p)}).then(w=>{if(w===null){if(this.recordDroppedEvent("before_send",g,t),a){const C=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",C)}throw new ye(`${p} returned \`null\`, will not send event.`,"log")}const y=n&&n.getSession();if(!a&&y&&this._updateSessionFromEvent(y,w),a){const C=(w.sdkProcessingMetadata&&w.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(w.spans?w.spans.length:0);C>0&&this.recordDroppedEvent("before_send","span",C)}const E=w.transaction_info;if(a&&E&&w.transaction!==t.transaction){const C="custom";w.transaction_info={...E,source:C}}return this.sendEvent(w,e),w}).then(null,w=>{throw w instanceof ye?w:(this.captureException(w,{data:{__sentry__:!0},originalException:w}),new ye(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${w}`))})}_process(t){this._numProcessing++,t.then(e=>(this._numProcessing--,e),e=>(this._numProcessing--,e))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([e,n])=>{const[i,o]=e.split(":");return{reason:i,category:o,quantity:n}})}_flushOutcomes(){G&&L.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0)return void(G&&L.log("No outcomes to send"));if(!this._dsn)return void(G&&L.log("No dsn provided, will not send outcomes"));G&&L.log("Sending outcomes:",t);const e=(n=t,yt((i=this._options.tunnel&&Ft(this._dsn))?{dsn:i}:{},[[{type:"client_report"},{timestamp:o||gt(),discarded_events:n}]]));var n,i,o;this.sendEnvelope(e)}}function Ii(r){return r.type===void 0}function ji(r){return r.type==="transaction"}function rc(r,t,e=Da(r.bufferSize||64)){let n={};return{send:function(i){const o=[];if(pi(i,(l,p)=>{const m=hi(p);if(function(g,b,w=Date.now()){return function(y,E){return y[E]||y.all||0}(g,b)>w}(n,m)){const g=Di(l,p);r.recordDroppedEvent("ratelimit_backoff",m,g)}else o.push(l)}),o.length===0)return He({});const a=yt(i[0],o),u=l=>{pi(a,(p,m)=>{const g=Di(p,m);r.recordDroppedEvent(l,hi(m),g)})};return e.add(()=>t({body:$a(a)}).then(l=>(l.statusCode!==void 0&&(l.statusCode<200||l.statusCode>=300)&&G&&L.warn(`Sentry responded with status code ${l.statusCode} to sent event.`),n=Ba(n,l),l),l=>{throw u("network_error"),l})).then(l=>l,l=>{if(l instanceof ye)return G&&L.error("Skipped sending event because buffer is full."),u("queue_overflow"),He({});throw l})},flush:i=>e.drain(i)}}function Di(r,t){if(t==="event"||t==="transaction")return Array.isArray(r)?r[1]:void 0}const nc=100;function Qe(r,t){const e=te(),n=_i();if(!e)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:o=nc}=e.getOptions();if(o<=0)return;const a={timestamp:gt(),...r},u=i?vr(()=>i(a,t)):a;u!==null&&(e.emit&&e.emit("beforeAddBreadcrumb",u,t),n.addBreadcrumb(u,o))}let Ni;const Ri=new WeakMap,ic=()=>({name:"FunctionToString",setupOnce(){Ni=Function.prototype.toString;try{Function.prototype.toString=function(...r){const t=yr(this),e=Ri.has(te())&&t!==void 0?t:this;return Ni.apply(e,r)}}catch{}},setup(r){Ri.set(r,!0)}}),sc=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler"],oc=(r={})=>({name:"InboundFilters",processEvent(t,e,n){const i=n.getOptions(),o=function(a={},u={}){return{allowUrls:[...a.allowUrls||[],...u.allowUrls||[]],denyUrls:[...a.denyUrls||[],...u.denyUrls||[]],ignoreErrors:[...a.ignoreErrors||[],...u.ignoreErrors||[],...a.disableErrorDefaults?[]:sc],ignoreTransactions:[...a.ignoreTransactions||[],...u.ignoreTransactions||[]],ignoreInternal:a.ignoreInternal===void 0||a.ignoreInternal}}(r,i);return function(a,u){return u.ignoreInternal&&function(l){try{return l.exception.values[0].type==="SentryError"}catch{}return!1}(a)?(G&&L.warn(`Event dropped due to being internal Sentry Error.
Event: ${Ne(a)}`),!0):function(l,p){return l.type||!p||!p.length?!1:function(m){const g=[];m.message&&g.push(m.message);let b;try{b=m.exception.values[m.exception.values.length-1]}catch{}return b&&b.value&&(g.push(b.value),b.type&&g.push(`${b.type}: ${b.value}`)),g}(l).some(m=>Nt(m,p))}(a,u.ignoreErrors)?(G&&L.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Ne(a)}`),!0):function(l){return l.type||!l.exception||!l.exception.values||l.exception.values.length===0?!1:!l.message&&!l.exception.values.some(p=>p.stacktrace||p.type&&p.type!=="Error"||p.value)}(a)?(G&&L.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Ne(a)}`),!0):function(l,p){if(l.type!=="transaction"||!p||!p.length)return!1;const m=l.transaction;return!!m&&Nt(m,p)}(a,u.ignoreTransactions)?(G&&L.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Ne(a)}`),!0):function(l,p){if(!p||!p.length)return!1;const m=Wt(l);return!!m&&Nt(m,p)}(a,u.denyUrls)?(G&&L.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Ne(a)}.
Url: ${Wt(a)}`),!0):function(l,p){if(!p||!p.length)return!0;const m=Wt(l);return!m||Nt(m,p)}(a,u.allowUrls)?!1:(G&&L.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Ne(a)}.
Url: ${Wt(a)}`),!0)}(t,o)?null:t}});function Wt(r){try{let t;try{t=r.exception.values[0].stacktrace.frames}catch{}return t?function(e=[]){for(let n=e.length-1;n>=0;n--){const i=e[n];if(i&&i.filename!=="<anonymous>"&&i.filename!=="[native code]")return i.filename||null}return null}(t):null}catch{return G&&L.error(`Cannot extract url for event ${Ne(r)}`),null}}const ac=()=>{let r;return{name:"Dedupe",processEvent(t){if(t.type)return t;try{if(function(e,n){return n?!!(function(i,o){const a=i.message,u=o.message;return!(!a&&!u||a&&!u||!a&&u||a!==u||!Fi(i,o)||!xi(i,o))}(e,n)||function(i,o){const a=qi(o),u=qi(i);return!(!a||!u||a.type!==u.type||a.value!==u.value||!Fi(i,o)||!xi(i,o))}(e,n)):!1}(t,r))return G&&L.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return r=t}}};function xi(r,t){let e=si(r),n=si(t);if(!e&&!n)return!0;if(e&&!n||!e&&n||n.length!==e.length)return!1;for(let i=0;i<n.length;i++){const o=n[i],a=e[i];if(o.filename!==a.filename||o.lineno!==a.lineno||o.colno!==a.colno||o.function!==a.function)return!1}return!0}function Fi(r,t){let e=r.fingerprint,n=t.fingerprint;if(!e&&!n)return!0;if(e&&!n||!e&&n)return!1;try{return e.join("")===n.join("")}catch{return!1}}function qi(r){return r.exception&&r.exception.values&&r.exception.values[0]}const Q=F;let Dr=0;function $i(){return Dr>0}function ct(r,t={},e){if(typeof r!="function")return r;try{const i=r.__sentry_wrapped__;if(i)return typeof i=="function"?i:r;if(yr(r))return r}catch{return r}const n=function(){const i=Array.prototype.slice.call(arguments);try{e&&typeof e=="function"&&e.apply(this,arguments);const o=i.map(a=>ct(a,t));return r.apply(this,o)}catch(o){throw Dr++,setTimeout(()=>{Dr--}),function(...a){const u=Lr(Gt());if(a.length===2){const[l,p]=a;return l?u.withSetScope(l,p):u.withScope(p)}u.withScope(a[0])}(a=>{var u;a.addEventProcessor(l=>(t.mechanism&&(Er(l,void 0),vt(l,t.mechanism)),l.extra={...l.extra,arguments:i},l)),u=o,Ir().captureException(u,void 0)}),o}};try{for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}catch{}Xn(n,r),Ge(r,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>r.name})}catch{}return n}const Nr=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function Rr(r,t){const e=Fr(r,t),n={type:t&&t.name,value:uc(t)};return e.length&&(n.stacktrace={frames:e}),n.type===void 0&&n.value===""&&(n.value="Unrecoverable error caught"),n}function cc(r,t,e,n){const i=te(),o=i&&i.getOptions().normalizeDepth,a=function(p){for(const m in p)if(Object.prototype.hasOwnProperty.call(p,m)){const g=p[m];if(g instanceof Error)return g}}(t),u={__serialized__:ui(t,o)};if(a)return{exception:{values:[Rr(r,a)]},extra:u};const l={exception:{values:[{type:jt(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:dc(t,{isUnhandledRejection:n})}]},extra:u};if(e){const p=Fr(r,e);p.length&&(l.exception.values[0].stacktrace={frames:p})}return l}function xr(r,t){return{exception:{values:[Rr(r,t)]}}}function Fr(r,t){const e=t.stacktrace||t.stack||"",n=function(o){return o&&lc.test(o.message)?1:0}(t),i=function(o){return typeof o.framesToPop=="number"?o.framesToPop:0}(t);try{return r(e,n,i)}catch{}return[]}const lc=/Minified React error #\d+;/i;function uc(r){const t=r&&r.message;return t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function qr(r,t,e,n,i){let o;if(Bn(t)&&t.error)return xr(r,t.error);if(Jn(t)||it(t,"DOMException")){const a=t;if("stack"in t)o=xr(r,t);else{const u=a.name||(Jn(a)?"DOMError":"DOMException"),l=a.message?`${u}: ${a.message}`:u;o=$r(r,l,e,n),Er(o,l)}return"code"in a&&(o.tags={...o.tags,"DOMException.code":`${a.code}`}),o}return dr(t)?xr(r,t):st(t)||jt(t)?(o=cc(r,t,e,i),vt(o,{synthetic:!0}),o):(o=$r(r,t,e,n),Er(o,`${t}`),vt(o,{synthetic:!0}),o)}function $r(r,t,e,n){const i={};if(n&&e){const o=Fr(r,e);o.length&&(i.exception={values:[{value:t,stacktrace:{frames:o}}]})}if(pr(t)){const{__sentry_template_string__:o,__sentry_template_values__:a}=t;return i.logentry={message:o,params:a},i}return i.message=t,i}function dc(r,{isUnhandledRejection:t}){const e=function(i,o=40){const a=Object.keys(Zn(i));a.sort();const u=a[0];if(!u)return"[object has no keys]";if(u.length>=o)return ot(u,o);for(let l=a.length;l>0;l--){const p=a.slice(0,l).join(", ");if(!(p.length>o))return l===a.length?p:ot(p,o)}return""}(r),n=t?"promise rejection":"exception";return Bn(r)?`Event \`ErrorEvent\` captured as ${n} with message \`${r.message}\``:jt(r)?`Event \`${function(i){try{const o=Object.getPrototypeOf(i);return o?o.constructor.name:void 0}catch{}}(r)}\` (type=${r.type}) captured as ${n}`:`Object captured as ${n} with keys: ${e}`}class pc extends tc{constructor(t){const e={parentSpanIsAlwaysRootSpan:!0,...t};(function(n,i,o=[i],a="npm"){const u=n._metadata||{};u.sdk||(u.sdk={name:`sentry.javascript.${i}`,packages:o.map(l=>({name:`${a}:@sentry/${l}`,version:Je})),version:Je}),n._metadata=u})(e,"browser",["browser"],Q.SENTRY_SDK_SOURCE||"npm"),super(e),e.sendClientReports&&Q.document&&Q.document.addEventListener("visibilitychange",()=>{Q.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(t,e){return function(n,i,o,a){const u=qr(n,i,o&&o.syntheticException||void 0,a);return vt(u),u.level="error",o&&o.event_id&&(u.event_id=o.event_id),He(u)}(this._options.stackParser,t,e,this._options.attachStacktrace)}eventFromMessage(t,e="info",n){return function(i,o,a="info",u,l){const p=$r(i,o,u&&u.syntheticException||void 0,l);return p.level=a,u&&u.event_id&&(p.event_id=u.event_id),He(p)}(this._options.stackParser,t,e,n,this._options.attachStacktrace)}captureUserFeedback(t){if(!this._isEnabled())return void(Nr&&L.warn("SDK not enabled, will not capture user feedback."));const e=function(n,{metadata:i,tunnel:o,dsn:a}){const u={event_id:n.event_id,sent_at:new Date().toISOString(),...i&&i.sdk&&{sdk:{name:i.sdk.name,version:i.sdk.version}},...!!o&&!!a&&{dsn:Ft(a)}};return yt(u,[function(p){return[{type:"user_report"},p]}(n)])}(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(e)}_prepareEvent(t,e,n){return t.platform=t.platform||"javascript",super._prepareEvent(t,e,n)}}const hc=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,K=F;let Vi,Vr,Ur,zt;function fc(){if(!K.document)return;const r=pe.bind(null,"dom"),t=Ui(r,!0);K.document.addEventListener("click",t,!1),K.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(e=>{const n=K[e]&&K[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(re(n,"addEventListener",function(i){return function(o,a,u){if(o==="click"||o=="keypress")try{const l=this,p=l.__sentry_instrumentation_handlers__=l.__sentry_instrumentation_handlers__||{},m=p[o]=p[o]||{refCount:0};if(!m.handler){const g=Ui(r);m.handler=g,i.call(this,o,g,u)}m.refCount++}catch{}return i.call(this,o,a,u)}}),re(n,"removeEventListener",function(i){return function(o,a,u){if(o==="click"||o=="keypress")try{const l=this,p=l.__sentry_instrumentation_handlers__||{},m=p[o];m&&(m.refCount--,m.refCount<=0&&(i.call(this,o,m.handler,u),m.handler=void 0,delete p[o]),Object.keys(p).length===0&&delete l.__sentry_instrumentation_handlers__)}catch{}return i.call(this,o,a,u)}}))})}function Ui(r,t=!1){return e=>{if(!e||e._sentryCaptured)return;const n=function(o){try{return o.target}catch{return null}}(e);if(function(o,a){return o==="keypress"&&(!a||!a.tagName||a.tagName!=="INPUT"&&a.tagName!=="TEXTAREA"&&!a.isContentEditable)}(e.type,n))return;Ge(e,"_sentryCaptured",!0),n&&!n._sentryId&&Ge(n,"_sentryId",he());const i=e.type==="keypress"?"input":e.type;(function(o){if(o.type!==Vr)return!1;try{if(!o.target||o.target._sentryId!==Ur)return!1}catch{}return!0})(e)||(r({event:e,name:i,global:t}),Vr=e.type,Ur=n?n._sentryId:void 0),clearTimeout(Vi),Vi=K.setTimeout(()=>{Ur=void 0,Vr=void 0},1e3)}}function mc(){if(!function(){const e=Jt.chrome,n=e&&e.app&&e.app.runtime,i="history"in Jt&&!!Jt.history.pushState&&!!Jt.history.replaceState;return!n&&i}())return;const r=K.onpopstate;function t(e){return function(...n){const i=n.length>2?n[2]:void 0;if(i){const o=zt,a=String(i);zt=a,pe("history",{from:o,to:a})}return e.apply(this,n)}}K.onpopstate=function(...e){const n=K.location.href,i=zt;if(zt=n,pe("history",{from:i,to:n}),r)try{return r.apply(this,e)}catch{}},re(K.history,"pushState",t),re(K.history,"replaceState",t)}const Ht={};function Bi(r){Ht[r]=void 0}const bt="__sentry_xhr_v3__";function gc(){if(!K.XMLHttpRequest)return;const r=XMLHttpRequest.prototype;r.open=new Proxy(r.open,{apply(t,e,n){const i=1e3*De(),o=Ae(n[0])?n[0].toUpperCase():void 0,a=function(l){if(Ae(l))return l;try{return l.toString()}catch{}}(n[1]);if(!o||!a)return t.apply(e,n);e[bt]={method:o,url:a,request_headers:{}},o==="POST"&&a.match(/sentry_key/)&&(e.__sentry_own_request__=!0);const u=()=>{const l=e[bt];if(l&&e.readyState===4){try{l.status_code=e.status}catch{}pe("xhr",{endTimestamp:1e3*De(),startTimestamp:i,xhr:e})}};return"onreadystatechange"in e&&typeof e.onreadystatechange=="function"?e.onreadystatechange=new Proxy(e.onreadystatechange,{apply:(l,p,m)=>(u(),l.apply(p,m))}):e.addEventListener("readystatechange",u),e.setRequestHeader=new Proxy(e.setRequestHeader,{apply(l,p,m){const[g,b]=m,w=p[bt];return w&&Ae(g)&&Ae(b)&&(w.request_headers[g.toLowerCase()]=b),l.apply(p,m)}}),t.apply(e,n)}}),r.send=new Proxy(r.send,{apply(t,e,n){const i=e[bt];return i?(n[0]!==void 0&&(i.body=n[0]),pe("xhr",{startTimestamp:1e3*De(),xhr:e}),t.apply(e,n)):t.apply(e,n)}})}function vc(r,t=function(e){const n=Ht[e];if(n)return n;let i=K[e];if(wr(i))return Ht[e]=i.bind(K);const o=K.document;if(o&&typeof o.createElement=="function")try{const a=o.createElement("iframe");a.hidden=!0,o.head.appendChild(a);const u=a.contentWindow;u&&u[e]&&(i=u[e]),o.head.removeChild(a)}catch(a){hc&&L.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,a)}return i&&(Ht[e]=i.bind(K))}("fetch")){let e=0,n=0;return rc(r,function(i){const o=i.body.length;e+=o,n++;const a={body:i.body,method:"POST",referrerPolicy:"origin",headers:r.headers,keepalive:e<=6e4&&n<15,...r.fetchOptions};if(!t)return Bi("fetch"),Bt("No fetch implementation available");try{return t(r.url,a).then(u=>(e-=o,n--,{statusCode:u.status,headers:{"x-sentry-rate-limits":u.headers.get("X-Sentry-Rate-Limits"),"retry-after":u.headers.get("Retry-After")}}))}catch(u){return Bi("fetch"),e-=o,n--,Bt(u)}})}function Br(r,t,e,n){const i={filename:r,function:t==="<anonymous>"?Ye:t,in_app:!0};return e!==void 0&&(i.lineno=e),n!==void 0&&(i.colno=n),i}const yc=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,_c=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,bc=/\((\S*)(?::(\d+))(?::(\d+))\)/,wc=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Sc=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Ec=function(...r){const t=r.sort((e,n)=>e[0]-n[0]).map(e=>e[1]);return(e,n=0,i=0)=>{const o=[],a=e.split(`
`);for(let u=n;u<a.length;u++){const l=a[u];if(l.length>1024)continue;const p=ri.test(l)?l.replace(ri,"$1"):l;if(!p.match(/\S*Error: /)){for(const m of t){const g=m(p);if(g){o.push(g);break}}if(o.length>=50+i)break}}return function(u){if(!u.length)return[];const l=Array.from(u);return/sentryWrapped/.test(qt(l).function||"")&&l.pop(),l.reverse(),ni.test(qt(l).function||"")&&(l.pop(),ni.test(qt(l).function||"")&&l.pop()),l.slice(0,50).map(p=>({...p,filename:p.filename||qt(l).filename,function:p.function||Ye}))}(o.slice(i))}}([30,r=>{const t=yc.exec(r);if(t){const[,n,i,o]=t;return Br(n,Ye,+i,+o)}const e=_c.exec(r);if(e){if(e[2]&&e[2].indexOf("eval")===0){const o=bc.exec(e[2]);o&&(e[2]=o[1],e[3]=o[2],e[4]=o[3])}const[n,i]=Ji(e[1]||Ye,e[2]);return Br(i,n,e[3]?+e[3]:void 0,e[4]?+e[4]:void 0)}}],[50,r=>{const t=wc.exec(r);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const i=Sc.exec(t[3]);i&&(t[1]=t[1]||"eval",t[3]=i[1],t[4]=i[2],t[5]="")}let e=t[3],n=t[1]||Ye;return[n,e]=Ji(n,e),Br(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}]),Ji=(r,t)=>{const e=r.indexOf("safari-extension")!==-1,n=r.indexOf("safari-web-extension")!==-1;return e||n?[r.indexOf("@")!==-1?r.split("@")[0]:Ye,e?`safari-extension:${t}`:`safari-web-extension:${t}`]:[r,t]},Gi=1024,kc=(r={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...r};return{name:"Breadcrumbs",setup(e){var n;t.console&&function(i){const o="console";We(o,i),ze(o,Oa)}(function(i){return function(o){if(te()!==i)return;const a={category:"console",data:{arguments:o.args,logger:"console"},level:Ra(o.level),message:Yn(o.args," ")};if(o.level==="assert"){if(o.args[0]!==!1)return;a.message=`Assertion failed: ${Yn(o.args.slice(1)," ")||"console.assert"}`,a.data.arguments=o.args.slice(1)}Qe(a,{input:o.args,level:o.level})}}(e)),t.dom&&(n=function(i,o){return function(a){if(te()!==i)return;let u,l,p=typeof o=="object"?o.serializeAttribute:void 0,m=typeof o=="object"&&typeof o.maxStringLength=="number"?o.maxStringLength:void 0;m&&m>Gi&&(Nr&&L.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${m} was configured. Sentry will use 1024 instead.`),m=Gi),typeof p=="string"&&(p=[p]);try{const b=a.event,w=function(y){return!!y&&!!y.target}(b)?b.target:b;u=Qn(w,{keyAttrs:p,maxStringLength:m}),l=function(y){if(!mr.HTMLElement)return null;let E=y;for(let C=0;C<5;C++){if(!E)return null;if(E instanceof HTMLElement){if(E.dataset.sentryComponent)return E.dataset.sentryComponent;if(E.dataset.sentryElement)return E.dataset.sentryElement}E=E.parentNode}return null}(w)}catch{u="<unknown>"}if(u.length===0)return;const g={category:`ui.${a.name}`,message:u};l&&(g.data={"ui.component_name":l}),Qe(g,{event:a.event,name:a.name,global:a.global})}}(e,t.dom),We("dom",n),ze("dom",fc)),t.xhr&&function(i){We("xhr",i),ze("xhr",gc)}(function(i){return function(o){if(te()!==i)return;const{startTimestamp:a,endTimestamp:u}=o,l=o.xhr[bt];if(!a||!u||!l)return;const{method:p,url:m,status_code:g,body:b}=l,w={method:p,url:m,status_code:g},y={xhr:o.xhr,input:b,startTimestamp:a,endTimestamp:u};Qe({category:"xhr",data:w,type:"http",level:Hn(g)},y)}}(e)),t.fetch&&La(function(i){return function(o){if(te()!==i)return;const{startTimestamp:a,endTimestamp:u}=o;if(u&&(!o.fetchData.url.match(/sentry_key/)||o.fetchData.method!=="POST"))if(o.error)Qe({category:"fetch",data:o.fetchData,level:"error",type:"http"},{data:o.error,input:o.args,startTimestamp:a,endTimestamp:u});else{const l=o.response,p={...o.fetchData,status_code:l&&l.status},m={input:o.args,response:l,startTimestamp:a,endTimestamp:u};Qe({category:"fetch",data:p,type:"http",level:Hn(p.status_code)},m)}}}(e)),t.history&&function(i){const o="history";We(o,i),ze(o,mc)}(function(i){return function(o){if(te()!==i)return;let a=o.from,u=o.to;const l=Cr(Q.location.href);let p=a?Cr(a):void 0;const m=Cr(u);p&&p.path||(p=l),l.protocol===m.protocol&&l.host===m.host&&(u=m.relative),l.protocol===p.protocol&&l.host===p.host&&(a=p.relative),Qe({category:"navigation",data:{from:a,to:u}})}}(e)),t.sentry&&e.on("beforeSendEvent",function(i){return function(o){te()===i&&Qe({category:"sentry."+(o.type==="transaction"?"transaction":"event"),event_id:o.event_id,level:o.level,message:Ne(o)},{event:o})}}(e))}}},Cc=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Tc=(r={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...r};return{name:"BrowserApiErrors",setupOnce(){t.setTimeout&&re(Q,"setTimeout",Yi),t.setInterval&&re(Q,"setInterval",Yi),t.requestAnimationFrame&&re(Q,"requestAnimationFrame",Mc),t.XMLHttpRequest&&"XMLHttpRequest"in Q&&re(XMLHttpRequest.prototype,"send",Ac);const e=t.eventTarget;e&&(Array.isArray(e)?e:Cc).forEach(Oc)}}};function Yi(r){return function(...t){const e=t[0];return t[0]=ct(e,{mechanism:{data:{function:je(r)},handled:!1,type:"instrument"}}),r.apply(this,t)}}function Mc(r){return function(t){return r.apply(this,[ct(t,{mechanism:{data:{function:"requestAnimationFrame",handler:je(r)},handled:!1,type:"instrument"}})])}}function Ac(r){return function(...t){const e=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(n=>{n in e&&typeof e[n]=="function"&&re(e,n,function(i){const o={mechanism:{data:{function:n,handler:je(i)},handled:!1,type:"instrument"}},a=yr(i);return a&&(o.mechanism.data.handler=je(a)),ct(i,o)})}),r.apply(this,t)}}function Oc(r){const t=Q,e=t[r]&&t[r].prototype;e&&e.hasOwnProperty&&e.hasOwnProperty("addEventListener")&&(re(e,"addEventListener",function(n){return function(i,o,a){try{typeof o.handleEvent=="function"&&(o.handleEvent=ct(o.handleEvent,{mechanism:{data:{function:"handleEvent",handler:je(o),target:r},handled:!1,type:"instrument"}}))}catch{}return n.apply(this,[i,ct(o,{mechanism:{data:{function:"addEventListener",handler:je(o),target:r},handled:!1,type:"instrument"}}),a])}}),re(e,"removeEventListener",function(n){return function(i,o,a){const u=o;try{const l=u&&u.__sentry_wrapped__;l&&n.call(this,i,l,a)}catch{}return n.call(this,i,u,a)}}))}const Pc=(r={})=>{const t={onerror:!0,onunhandledrejection:!0,...r};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(function(n){(function(i){const o="error";We(o,i),ze(o,Ia)})(i=>{const{stackParser:o,attachStacktrace:a}=zi();if(te()!==n||$i())return;const{msg:u,url:l,line:p,column:m,error:g}=i,b=function(w,y,E,C){const O=w.exception=w.exception||{},j=O.values=O.values||[],x=j[0]=j[0]||{},z=x.stacktrace=x.stacktrace||{},W=z.frames=z.frames||[],me=isNaN(parseInt(C,10))?void 0:C,oe=isNaN(parseInt(E,10))?void 0:E,we=Ae(y)&&y.length>0?y:function(){try{return mr.document.location.href}catch{return""}}();return W.length===0&&W.push({colno:me,filename:we,function:Ye,in_app:!0,lineno:oe}),w}(qr(o,g||u,void 0,a,!1),l,p,m);b.level="error",Mi(b,{originalException:g,mechanism:{handled:!1,type:"onerror"}})})}(e),Wi("onerror")),t.onunhandledrejection&&(function(n){(function(i){const o="unhandledrejection";We(o,i),ze(o,ja)})(i=>{const{stackParser:o,attachStacktrace:a}=zi();if(te()!==n||$i())return;const u=function(p){if(hr(p))return p;try{if("reason"in p)return p.reason;if("detail"in p&&"reason"in p.detail)return p.detail.reason}catch{}return p}(i),l=hr(u)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(u)}`}]}}:qr(o,u,void 0,a,!0);l.level="error",Mi(l,{originalException:u,mechanism:{handled:!1,type:"onunhandledrejection"}})})}(e),Wi("onunhandledrejection"))}}};function Wi(r){Nr&&L.log(`Global Handler attached: ${r}`)}function zi(){const r=te();return r&&r.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Lc=()=>({name:"HttpContext",preprocessEvent(r){if(!Q.navigator&&!Q.location&&!Q.document)return;const t=r.request&&r.request.url||Q.location&&Q.location.href,{referrer:e}=Q.document||{},{userAgent:n}=Q.navigator||{},i={...r.request&&r.request.headers,...e&&{Referer:e},...n&&{"User-Agent":n}},o={...r.request,...t&&{url:t},headers:i};r.request=o}}),Ic=(r={})=>{const t=r.limit||5,e=r.key||"cause";return{name:"LinkedErrors",preprocessEvent(n,i,o){const a=o.getOptions();Ca(Rr,a.stackParser,a.maxValueLength,e,t,n,i)}}};var Jr="new",Hi="loading",Qi="loaded",Qt="joining-meeting",Fe="joined-meeting",qe="left-meeting",Pe="error",jc="blocked",Dc="off",Nc="sendable",Rc="loading",xc="interrupted",Ki="playable",Kt="unknown",Xi="full",Fc="lobby",qc="none",Zi="base",$c="*",Vc="ejected",Uc="nbf-room",Bc="nbf-token",Jc="exp-room",Gc="exp-token",Gr="no-room",Yc="meeting-full",es="end-of-life",Wc="not-allowed",ts="connection-error",zc="cam-in-use",Hc="mic-in-use",Qc="cam-mic-in-use",Kc="permissions",Xc="undefined-mediadevices",Zc="not-found",el="constraints",tl="unknown",rs="iframe-ready-for-launch-config",ns="iframe-launch-config",is="theme-updated",ss="loading",os="load-attempt-failed",Yr="loaded",as="started-camera",cs="camera-error",ls="joining-meeting",us="joined-meeting",ds="left-meeting",ps="participant-joined",hs="participant-updated",fs="participant-left",ms="participant-counts-updated",gs="access-state-updated",vs="meeting-session-summary-updated",ys="meeting-session-state-updated",rl="meeting-session-data-error",_s="waiting-participant-added",bs="waiting-participant-updated",ws="waiting-participant-removed",Ss="track-started",Es="track-stopped",ks="transcription-started",Cs="transcription-stopped",Ts="transcription-error",Wr="recording-started",zr="recording-stopped",Ms="recording-stats",As="recording-error",Os="recording-upload-completed",Ps="recording-data",Ls="app-message",Is="transcription-message",js="remote-media-player-started",Ds="remote-media-player-updated",Ns="remote-media-player-stopped",Rs="local-screen-share-started",xs="local-screen-share-stopped",Fs="local-screen-share-canceled",qs="active-speaker-change",$s="active-speaker-mode-change",Vs="network-quality-change",Us="network-connection",Bs="cpu-load-change",Js="face-counts-updated",wt="fullscreen",St="exited-fullscreen",Gs="live-streaming-started",Ys="live-streaming-updated",Ws="live-streaming-stopped",zs="live-streaming-error",Hs="lang-updated",Qs="receive-settings-updated",Hr="input-settings-updated",Qr="nonfatal-error",Kr="error",Xr=4096,Ks=102400,Zr="iframe-call-message",Xs="local-screen-start",Zs="daily-method-update-live-streaming-endpoints",Xt="transmit-log",Le="daily-custom-track",Zt={NONE:"none",BGBLUR:"background-blur",BGIMAGE:"background-image",FACE_DETECTION:"face-detection"},eo={NONE:"none",NOISE_CANCELLATION:"noise-cancellation"},en={PLAY:"play",PAUSE:"pause"},tn=["jpg","png","jpeg"],nl="add-endpoints",il="remove-endpoints",to="sip-call-transfer";function se(){return!N()&&typeof window<"u"&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""}function N(){return typeof navigator<"u"&&navigator.product&&navigator.product==="ReactNative"}function ro(){return navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia}function sl(){return!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)&&(function(r,t){if(!r||!t)return!0;switch(r){case"Chrome":return t.major>=75;case"Safari":return RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")&&!(t.major===13&&t.minor===0&&t.point===0);case"Firefox":return t.major>=67}return!0}(Ke(),er())||N())}function no(){if(N()||!document)return!1;var r=document.createElement("iframe");return!!r.requestFullscreen||!!r.webkitRequestFullscreen}var ol=function(){try{var r=document.createElement("canvas"),t=r.getContext("webgl2")!=null;return r.remove(),t}catch{return!1}}();function io(){var r=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return!N()&&!!ol&&(r?function(){return co()?!1:["Chrome","Firefox"].includes(Ke())}():function(){if(co())return!1;var t=Ke();if(t==="Safari"){var e=nn();if(e.major<15||e.major===15&&e.minor<4)return!1}return t==="Chrome"?rn().major>=77:t==="Firefox"?sn().major>=97:["Chrome","Firefox","Safari"].includes(t)}())}function so(){if(N()||ao()||typeof AudioWorkletNode>"u")return!1;switch(Ke()){case"Chrome":case"Firefox":return!0;case"Safari":var r=er();return r.major>17||r.major===17&&r.minor>=4}return!1}function oo(){return ro()&&!function(){var r,t=Ke();if(!se())return!0;switch(t){case"Chrome":return(r=rn()).major&&r.major>0&&r.major<75;case"Firefox":return(r=sn()).major<91;case"Safari":return(r=nn()).major<13||r.major===13&&r.minor<1;default:return!0}}()}function ao(){return se().match(/Linux; Android/)}function co(){var r,t,e=se(),n=e.match(/Mac/)&&(!N()&&typeof window<"u"&&(r=window)!==null&&r!==void 0&&(t=r.navigator)!==null&&t!==void 0&&t.maxTouchPoints?window.navigator.maxTouchPoints:0)>=5;return!!(e.match(/Mobi/)||e.match(/Android/)||n)||!!se().match(/DailyAnd\//)||void 0}function Ke(){if(typeof window<"u"){var r=se();return lo()?"Safari":r.indexOf("Edge")>-1?"Edge":r.match(/Chrome\//)?"Chrome":r.indexOf("Safari")>-1||uo()?"Safari":r.indexOf("Firefox")>-1?"Firefox":r.indexOf("MSIE")>-1||r.indexOf(".NET")>-1?"IE":"Unknown Browser"}}function er(){switch(Ke()){case"Chrome":return rn();case"Safari":return nn();case"Firefox":return sn();case"Edge":return function(){var r=0,t=0;if(typeof window<"u"){var e=se().match(/Edge\/(\d+).(\d+)/);if(e)try{r=parseInt(e[1]),t=parseInt(e[2])}catch{}}return{major:r,minor:t}}()}}function rn(){var r=0,t=0,e=0,n=0,i=!1;if(typeof window<"u"){var o=se(),a=o.match(/Chrome\/(\d+).(\d+).(\d+).(\d+)/);if(a)try{r=parseInt(a[1]),t=parseInt(a[2]),e=parseInt(a[3]),n=parseInt(a[4]),i=o.indexOf("OPR/")>-1}catch{}}return{major:r,minor:t,build:e,patch:n,opera:i}}function lo(){return!!se().match(/iPad|iPhone|iPod/i)&&ro()}function uo(){return se().indexOf("AppleWebKit/605.1.15")>-1}function nn(){var r=0,t=0,e=0;if(typeof window<"u"){var n=se().match(/Version\/(\d+).(\d+)(.(\d+))?/);if(n)try{r=parseInt(n[1]),t=parseInt(n[2]),e=parseInt(n[4])}catch{}else(lo()||uo())&&(r=14,t=0,e=3)}return{major:r,minor:t,point:e}}function sn(){var r=0,t=0;if(typeof window<"u"){var e=se().match(/Firefox\/(\d+).(\d+)/);if(e)try{r=parseInt(e[1]),t=parseInt(e[2])}catch{}}return{major:r,minor:t}}var po=function(){function r(){ce(this,r)}return le(r,[{key:"addListenerForMessagesFromCallMachine",value:function(t,e,n){ft()}},{key:"addListenerForMessagesFromDailyJs",value:function(t,e,n){ft()}},{key:"sendMessageToCallMachine",value:function(t,e,n,i){ft()}},{key:"sendMessageToDailyJs",value:function(t,e){ft()}},{key:"removeListener",value:function(t){ft()}}]),r}();function ho(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function on(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?ho(Object(e),!0).forEach(function(n){Te(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ho(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function al(r){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=ue(r);if(t){var i=ue(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return At(this,e)}}var cl=function(){Mt(t,po);var r=al(t);function t(){var e;return ce(this,t),(e=r.call(this))._wrappedListeners={},e._messageCallbacks={},e}return le(t,[{key:"addListenerForMessagesFromCallMachine",value:function(e,n,i){var o=this,a=function(u){if(u.data&&u.data.what==="iframe-call-message"&&(!u.data.callClientId||u.data.callClientId===n)&&(!u.data.from||u.data.from!=="module")){var l=on({},u.data);if(delete l.from,l.callbackStamp&&o._messageCallbacks[l.callbackStamp]){var p=l.callbackStamp;o._messageCallbacks[p].call(i,l),delete o._messageCallbacks[p]}delete l.what,delete l.callbackStamp,e.call(i,l)}};this._wrappedListeners[e]=a,window.addEventListener("message",a)}},{key:"addListenerForMessagesFromDailyJs",value:function(e,n,i){var o=function(a){var u;if(!(!a.data||a.data.what!==Zr||!a.data.action||a.data.from&&a.data.from!=="module"||a.data.callClientId&&n&&a.data.callClientId!==n||a!=null&&(u=a.data)!==null&&u!==void 0&&u.callFrameId)){var l=a.data;e.call(i,l)}};this._wrappedListeners[e]=o,window.addEventListener("message",o)}},{key:"sendMessageToCallMachine",value:function(e,n,i,o){if(!i)throw new Error("undefined callClientId. Are you trying to use a DailyCall instance previously destroyed?");var a=on({},e);if(a.what=Zr,a.from="module",a.callClientId=i,n){var u=Pt();this._messageCallbacks[u]=n,a.callbackStamp=u}var l=o?o.contentWindow:window,p=this._callMachineTargetOrigin(o);p&&l.postMessage(a,p)}},{key:"sendMessageToDailyJs",value:function(e,n){e.what=Zr,e.callClientId=n,e.from="embedded",window.postMessage(e,this._targetOriginFromWindowLocation())}},{key:"removeListener",value:function(e){var n=this._wrappedListeners[e];n&&(window.removeEventListener("message",n),delete this._wrappedListeners[e])}},{key:"forwardPackagedMessageToCallMachine",value:function(e,n,i){var o=on({},e);o.callClientId=i;var a=n?n.contentWindow:window,u=this._callMachineTargetOrigin(n);u&&a.postMessage(o,u)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(e,n){var i=function(o){if(o.data&&o.data.what==="iframe-call-message"&&(!o.data.callClientId||o.data.callClientId===n)&&(!o.data.from||o.data.from!=="module")){var a=o.data;e(a)}};return this._wrappedListeners[e]=i,window.addEventListener("message",i),e}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(e){var n=this._wrappedListeners[e];n&&(window.removeEventListener("message",n),delete this._wrappedListeners[e])}},{key:"_callMachineTargetOrigin",value:function(e){return e?e.src?new URL(e.src).origin:void 0:this._targetOriginFromWindowLocation()}},{key:"_targetOriginFromWindowLocation",value:function(){return window.location.protocol==="file:"?"*":window.location.origin}}]),t}();function fo(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function ll(r){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=ue(r);if(t){var i=ue(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return At(this,e)}}var ul=function(){Mt(t,po);var r=ll(t);function t(){var e;return ce(this,t),e=r.call(this),global.callMachineToDailyJsEmitter=global.callMachineToDailyJsEmitter||new Me.EventEmitter,global.dailyJsToCallMachineEmitter=global.dailyJsToCallMachineEmitter||new Me.EventEmitter,e._wrappedListeners={},e._messageCallbacks={},e}return le(t,[{key:"addListenerForMessagesFromCallMachine",value:function(e,n,i){this._addListener(e,global.callMachineToDailyJsEmitter,n,i,"received call machine message")}},{key:"addListenerForMessagesFromDailyJs",value:function(e,n,i){this._addListener(e,global.dailyJsToCallMachineEmitter,n,i,"received daily-js message")}},{key:"sendMessageToCallMachine",value:function(e,n,i){this._sendMessage(e,global.dailyJsToCallMachineEmitter,i,n,"sending message to call machine")}},{key:"sendMessageToDailyJs",value:function(e,n){this._sendMessage(e,global.callMachineToDailyJsEmitter,n,null,"sending message to daily-js")}},{key:"removeListener",value:function(e){var n=this._wrappedListeners[e];n&&(global.callMachineToDailyJsEmitter.removeListener("message",n),global.dailyJsToCallMachineEmitter.removeListener("message",n),delete this._wrappedListeners[e])}},{key:"_addListener",value:function(e,n,i,o,a){var u=this,l=function(p){if(p.callClientId===i){if(p.callbackStamp&&u._messageCallbacks[p.callbackStamp]){var m=p.callbackStamp;u._messageCallbacks[m].call(o,p),delete u._messageCallbacks[m]}e.call(o,p)}};this._wrappedListeners[e]=l,n.addListener("message",l)}},{key:"_sendMessage",value:function(e,n,i,o,a){var u=function(p){for(var m=1;m<arguments.length;m++){var g=arguments[m]!=null?arguments[m]:{};m%2?fo(Object(g),!0).forEach(function(b){Te(p,b,g[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(g)):fo(Object(g)).forEach(function(b){Object.defineProperty(p,b,Object.getOwnPropertyDescriptor(g,b))})}return p}({},e);if(u.callClientId=i,o){var l=Pt();this._messageCallbacks[l]=o,u.callbackStamp=l}n.emit("message",u)}}]),t}(),an="replace",cn="shallow-merge",mo=[an,cn],dl=function(){function r(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.data,n=t.mergeStrategy,i=n===void 0?an:n;ce(this,r),r._validateMergeStrategy(i),r._validateData(e,i),this.mergeStrategy=i,this.data=e}return le(r,[{key:"isNoOp",value:function(){return r.isNoOpUpdate(this.data,this.mergeStrategy)}}],[{key:"isNoOpUpdate",value:function(t,e){return Object.keys(t).length===0&&e===cn}},{key:"_validateMergeStrategy",value:function(t){if(!mo.includes(t))throw Error("Unrecognized mergeStrategy provided. Options are: [".concat(mo,"]"))}},{key:"_validateData",value:function(t,e){if(!function(u){if(u==null||q(u)!=="object")return!1;var l=Object.getPrototypeOf(u);return l==null||l===Object.prototype}(t))throw Error("Meeting session data must be a plain (map-like) object");var n;try{if(n=JSON.stringify(t),e===an){var i=JSON.parse(n);ee(i,t)||console.warn("The meeting session data provided will be modified when serialized.",i,t)}else if(e===cn){for(var o in t)if(Object.hasOwnProperty.call(t,o)&&t[o]!==void 0){var a=JSON.parse(JSON.stringify(t[o]));ee(t[o],a)||console.warn("At least one key in the meeting session data provided will be modified when serialized.",a,t[o])}}}catch(u){throw Error("Meeting session data must be serializable to JSON: ".concat(u))}if(n.length>Ks)throw Error("Meeting session data is too large (".concat(n.length," characters). Maximum size suppported is ").concat(Ks,"."))}}]),r}();function ln(r,t,e){return ln=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct.bind():function(n,i,o){var a=[null];a.push.apply(a,i);var u=new(Function.bind.apply(n,a));return o&&ht(u,o.prototype),u},ln.apply(null,arguments)}function un(r){var t=typeof Map=="function"?new Map:void 0;return un=function(e){if(e===null||(n=e,Function.toString.call(n).indexOf("[native code]")===-1))return e;var n;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return ln(e,arguments,ue(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),ht(i,e)},un(r)}function pl(r){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=ue(r);if(t){var i=ue(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return At(this,e)}}function go(r){var t,e=(t=window._daily)===null||t===void 0?void 0:t.pendings;if(e){var n=e.indexOf(r);n!==-1&&e.splice(n,1)}}var hl=function(){function r(t){ce(this,r),this._currentLoad=null,this._callClientId=t}return le(r,[{key:"load",value:function(){var t,e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;if(this.loaded)return window._daily.instances[this._callClientId].callMachine.reset(),void i(!0);t=this._callClientId,window._daily.pendings.push(t),this._currentLoad&&this._currentLoad.cancel(),this._currentLoad=new fl(n,function(){i(!1)},function(a,u){u||go(e._callClientId),o(a,u)}),this._currentLoad.start()}},{key:"cancel",value:function(){this._currentLoad&&this._currentLoad.cancel(),go(this._callClientId)}},{key:"loaded",get:function(){return this._currentLoad&&this._currentLoad.succeeded}}]),r}(),fl=function(){function r(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;ce(this,r),this._attemptsRemaining=3,this._currentAttempt=null,this._dailyConfig=t,this._successCallback=e,this._failureCallback=n}return le(r,[{key:"start",value:function(){var t=this;this._currentAttempt||(this._currentAttempt=new vo(this._dailyConfig,this._successCallback,function e(n){t._currentAttempt.cancelled||(t._attemptsRemaining--,t._failureCallback(n,t._attemptsRemaining>0),t._attemptsRemaining<=0||setTimeout(function(){t._currentAttempt.cancelled||(t._currentAttempt=new vo(t._dailyConfig,t._successCallback,e),t._currentAttempt.start())},3e3))}),this._currentAttempt.start())}},{key:"cancel",value:function(){this._currentAttempt&&this._currentAttempt.cancel()}},{key:"cancelled",get:function(){return this._currentAttempt&&this._currentAttempt.cancelled}},{key:"succeeded",get:function(){return this._currentAttempt&&this._currentAttempt.succeeded}}]),r}(),dn=function(){Mt(t,un(Error));var r=pl(t);function t(){return ce(this,t),r.apply(this,arguments)}return le(t)}(),tr=2e4,vo=function(){function r(e,n,i){ce(this,r),this._loadAttemptImpl=N()||!e.avoidEval?new ml(e,n,i):new gl(e,n,i)}var t;return le(r,[{key:"start",value:(t=P(function*(){return this._loadAttemptImpl.start()}),function(){return t.apply(this,arguments)})},{key:"cancel",value:function(){this._loadAttemptImpl.cancel()}},{key:"cancelled",get:function(){return this._loadAttemptImpl.cancelled}},{key:"succeeded",get:function(){return this._loadAttemptImpl.succeeded}}]),r}(),ml=function(){function r(o,a,u){ce(this,r),this.cancelled=!1,this.succeeded=!1,this._networkTimedOut=!1,this._networkTimeout=null,this._iosCache=typeof iOSCallObjectBundleCache<"u"&&iOSCallObjectBundleCache,this._refetchHeaders=null,this._dailyConfig=o,this._successCallback=a,this._failureCallback=u}var t,e,n,i;return le(r,[{key:"start",value:(i=P(function*(){var o=Lt(this._dailyConfig);!(yield this._tryLoadFromIOSCache(o))&&this._loadFromNetwork(o)}),function(){return i.apply(this,arguments)})},{key:"cancel",value:function(){clearTimeout(this._networkTimeout),this.cancelled=!0}},{key:"_tryLoadFromIOSCache",value:(n=P(function*(o){if(!this._iosCache)return!1;try{var a=yield this._iosCache.get(o);return!!this.cancelled||!!a&&(a.code?(Function('"use strict";'+a.code)(),this.succeeded=!0,this._successCallback(),!0):(this._refetchHeaders=a.refetchHeaders,!1))}catch{return!1}}),function(o){return n.apply(this,arguments)})},{key:"_loadFromNetwork",value:(e=P(function*(o){var a=this;this._networkTimeout=setTimeout(function(){a._networkTimedOut=!0,a._failureCallback({msg:"Timed out (>".concat(tr," ms) when loading call object bundle ").concat(o),type:"timeout"})},tr);try{var u=this._refetchHeaders?{headers:this._refetchHeaders}:{},l=yield fetch(o,u);if(clearTimeout(this._networkTimeout),this.cancelled||this._networkTimedOut)throw new dn;var p=yield this._getBundleCodeFromResponse(o,l);if(this.cancelled)throw new dn;Function('"use strict";'+p)(),this._iosCache&&this._iosCache.set(o,p,l.headers),this.succeeded=!0,this._successCallback()}catch(m){if(clearTimeout(this._networkTimeout),m instanceof dn||this.cancelled||this._networkTimedOut)return;this._failureCallback({msg:"Failed to load call object bundle ".concat(o,": ").concat(m),type:m.message})}}),function(o){return e.apply(this,arguments)})},{key:"_getBundleCodeFromResponse",value:(t=P(function*(o,a){if(a.ok)return yield a.text();if(this._iosCache&&a.status===304)return(yield this._iosCache.renew(o,a.headers)).code;throw new Error("Received ".concat(a.status," response"))}),function(o,a){return t.apply(this,arguments)})}]),r}(),gl=function(){function r(t,e,n){ce(this,r),this.cancelled=!1,this.succeeded=!1,this._dailyConfig=t,this._successCallback=e,this._failureCallback=n,this._attemptId=Pt(),this._networkTimeout=null,this._scriptElement=null}return le(r,[{key:"start",value:function(){window._dailyCallMachineLoadWaitlist||(window._dailyCallMachineLoadWaitlist=new Set);var t=Lt(this._dailyConfig);(typeof document>"u"?"undefined":q(document))==="object"?this._startLoading(t):this._failureCallback({msg:"Call object bundle must be loaded in a DOM/web context",type:"missing context"})}},{key:"cancel",value:function(){this._stopLoading(),this.cancelled=!0}},{key:"_startLoading",value:function(t){var e=this;this._signUpForCallMachineLoadWaitlist(),this._networkTimeout=setTimeout(function(){e._stopLoading(),e._failureCallback({msg:"Timed out (>".concat(tr," ms) when loading call object bundle ").concat(t),type:"timeout"})},tr);var n=document.getElementsByTagName("head")[0],i=document.createElement("script");this._scriptElement=i,i.onload=function(){e._stopLoading(),e.succeeded=!0,e._successCallback()},i.onerror=function(o){e._stopLoading(),e._failureCallback({msg:"Failed to load call object bundle ".concat(o.target.src),type:o.message})},i.src=t,n.appendChild(i)}},{key:"_stopLoading",value:function(){this._withdrawFromCallMachineLoadWaitlist(),clearTimeout(this._networkTimeout),this._scriptElement&&(this._scriptElement.onload=null,this._scriptElement.onerror=null)}},{key:"_signUpForCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.add(this._attemptId)}},{key:"_withdrawFromCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.delete(this._attemptId)}}]),r}(),rr=function(r,t,e){return yl(r.local,t,e)===!0},vl=function(r,t,e){return r.local.streams&&r.local.streams[t]&&r.local.streams[t].stream&&r.local.streams[t].stream["get".concat(e==="video"?"Video":"Audio","Tracks")]()[0]},lt=function(r,t,e,n){var i=_l(r,t,e,n);return i&&i.pendingTrack},yl=function(r,t,e){if(!r)return!1;var n=function(o){switch(o){case"avatar":return!0;case"staged":return o;default:return!!o}},i=r.public.subscribedTracks;return i&&i[t]?["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo"].indexOf(e)===-1&&i[t].custom?[!0,"staged"].includes(i[t].custom)?n(i[t].custom):n(i[t].custom[e]):n(i[t][e]):!i||n(i.ALL)},_l=function(r,t,e,n){var i=Object.values(r.streams||{}).filter(function(o){return o.participantId===t&&o.type===e&&o.pendingTrack&&o.pendingTrack.kind===n}).sort(function(o,a){return new Date(a.starttime)-new Date(o.starttime)});return i&&i[0]},bl=function(r,t){var e=r.local.public.customTracks;if(e&&e[t])return e[t].track};function yo(r,t){for(var e=t.getState(),n=0,i=["cam","screen"];n<i.length;n++)for(var o=i[n],a=0,u=["video","audio"];a<u.length;a++){var l=u[a],p=o==="cam"?l:"screen".concat(l.charAt(0).toUpperCase()+l.slice(1)),m=r.tracks[p];if(m){var g=r.local?vl(e,o,l):lt(e,r.session_id,o,l);m.state==="playable"&&(m.track=g),m.persistentTrack=g}}}function _o(r,t){try{var e=t.getState();for(var n in r.tracks)if(!wl(n)){var i=r.tracks[n].kind;if(i){var o=r.tracks[n];if(o){var a=r.local?bl(e,n):lt(e,r.session_id,n,i);o.state==="playable"&&(r.tracks[n].track=a),o.persistentTrack=a}}else console.error("unknown type for custom track")}}catch(u){console.error(u)}}function wl(r){return["video","audio","screenVideo","screenAudio"].includes(r)}function bo(r,t,e){var n=e.getState();if(r.local){if(r.audio)try{r.audioTrack=n.local.streams.cam.stream.getAudioTracks()[0],r.audioTrack||(r.audio=!1)}catch{}if(r.video)try{r.videoTrack=n.local.streams.cam.stream.getVideoTracks()[0],r.videoTrack||(r.video=!1)}catch{}if(r.screen)try{r.screenVideoTrack=n.local.streams.screen.stream.getVideoTracks()[0],r.screenAudioTrack=n.local.streams.screen.stream.getAudioTracks()[0],r.screenVideoTrack||r.screenAudioTrack||(r.screen=!1)}catch{}}else{var i=!0;try{var o=n.participants[r.session_id];o&&o.public&&o.public.rtcType&&o.public.rtcType.impl==="peer-to-peer"&&o.private&&!["connected","completed"].includes(o.private.peeringState)&&(i=!1)}catch(m){console.error(m)}if(!i)return r.audio=!1,r.audioTrack=!1,r.video=!1,r.videoTrack=!1,r.screen=!1,void(r.screenTrack=!1);try{if(n.streams,r.audio&&rr(n,r.session_id,"cam-audio")){var a=lt(n,r.session_id,"cam","audio");a&&(t&&t.audioTrack&&t.audioTrack.id===a.id?r.audioTrack=a:a.muted||(r.audioTrack=a)),r.audioTrack||(r.audio=!1)}if(r.video&&rr(n,r.session_id,"cam-video")){var u=lt(n,r.session_id,"cam","video");u&&(t&&t.videoTrack&&t.videoTrack.id===u.id?r.videoTrack=u:u.muted||(r.videoTrack=u)),r.videoTrack||(r.video=!1)}if(r.screen&&rr(n,r.session_id,"screen-audio")){var l=lt(n,r.session_id,"screen","audio");l&&(t&&t.screenAudioTrack&&t.screenAudioTrack.id===l.id?r.screenAudioTrack=l:l.muted||(r.screenAudioTrack=l))}if(r.screen&&rr(n,r.session_id,"screen-video")){var p=lt(n,r.session_id,"screen","video");p&&(t&&t.screenVideoTrack&&t.screenVideoTrack.id===p.id?r.screenVideoTrack=p:p.muted||(r.screenVideoTrack=p))}r.screenVideoTrack||r.screenAudioTrack||(r.screen=!1)}catch(m){console.error("unexpected error matching up tracks",m)}}}function Sl(r,t){var e=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!e){if(Array.isArray(r)||(e=function(l,p){if(l){if(typeof l=="string")return wo(l,p);var m=Object.prototype.toString.call(l).slice(8,-1);if(m==="Object"&&l.constructor&&(m=l.constructor.name),m==="Map"||m==="Set")return Array.from(l);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return wo(l,p)}}(r))||t){e&&(r=e);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,u=!1;return{s:function(){e=e.call(r)},n:function(){var l=e.next();return a=l.done,l},e:function(l){u=!0,o=l},f:function(){try{a||e.return==null||e.return()}finally{if(u)throw o}}}}function wo(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}var _e=new Map,ut=null;function El(r,t){var e=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!e){if(Array.isArray(r)||(e=function(l,p){if(l){if(typeof l=="string")return So(l,p);var m=Object.prototype.toString.call(l).slice(8,-1);if(m==="Object"&&l.constructor&&(m=l.constructor.name),m==="Map"||m==="Set")return Array.from(l);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return So(l,p)}}(r))||t){e&&(r=e);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,u=!1;return{s:function(){e=e.call(r)},n:function(){var l=e.next();return a=l.done,l},e:function(l){u=!0,o=l},f:function(){try{a||e.return==null||e.return()}finally{if(u)throw o}}}}function So(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}var be=new Map,Et=null;function kl(r){Eo()?function(t){_e.has(t)||(_e.set(t,{}),navigator.mediaDevices.enumerateDevices().then(function(e){_e.has(t)&&(_e.get(t).lastDevicesString=JSON.stringify(e),ut||(ut=function(){var n=P(function*(){var i,o=yield navigator.mediaDevices.enumerateDevices(),a=Sl(_e.keys());try{for(a.s();!(i=a.n()).done;){var u=i.value,l=JSON.stringify(o);l!==_e.get(u).lastDevicesString&&(_e.get(u).lastDevicesString=l,u(o))}}catch(p){a.e(p)}finally{a.f()}});return function(){return n.apply(this,arguments)}}(),navigator.mediaDevices.addEventListener("devicechange",ut)))}).catch(function(){}))}(r):function(t){be.has(t)||(be.set(t,{}),navigator.mediaDevices.enumerateDevices().then(function(e){be.has(t)&&(be.get(t).lastDevicesString=JSON.stringify(e),Et||(Et=setInterval(P(function*(){var n,i=yield navigator.mediaDevices.enumerateDevices(),o=El(be.keys());try{for(o.s();!(n=o.n()).done;){var a=n.value,u=JSON.stringify(i);u!==be.get(a).lastDevicesString&&(be.get(a).lastDevicesString=u,a(i))}}catch(l){o.e(l)}finally{o.f()}}),3e3)))}))}(r)}function Cl(r){Eo()?function(t){_e.has(t)&&(_e.delete(t),_e.size===0&&ut&&(navigator.mediaDevices.removeEventListener("devicechange",ut),ut=null))}(r):function(t){be.has(t)&&(be.delete(t),be.size===0&&Et&&(clearInterval(Et),Et=null))}(r)}function Eo(){var r;return N()||((r=navigator.mediaDevices)===null||r===void 0?void 0:r.ondevicechange)!==void 0}var Tl=new Set;function Ml(r,t){return r&&r.readyState==="live"&&!function(e,n){return e.muted&&!Tl.has(e.id)}(r)}var Al=["result"],Ol=["preserveIframe"];function ko(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function T(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?ko(Object(e),!0).forEach(function(n){Te(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ko(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function Pl(r){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,n=ue(r);if(t){var i=ue(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return At(this,e)}}function Co(r,t){var e=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!e){if(Array.isArray(r)||(e=function(l,p){if(l){if(typeof l=="string")return To(l,p);var m=Object.prototype.toString.call(l).slice(8,-1);if(m==="Object"&&l.constructor&&(m=l.constructor.name),m==="Map"||m==="Set")return Array.from(l);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return To(l,p)}}(r))||t){e&&(r=e);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,u=!1;return{s:function(){e=e.call(r)},n:function(){var l=e.next();return a=l.done,l},e:function(l){u=!0,o=l},f:function(){try{a||e.return==null||e.return()}finally{if(u)throw o}}}}function To(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}var Xe={},Mo="video",Ll="voice",Ao=N()?{data:{}}:{data:{},topology:"none"},Oo={present:0,hidden:0},Po={maxBitrate:{min:1e5,max:25e5},maxFramerate:{min:1,max:30},scaleResolutionDownBy:{min:1,max:8}},pn=Object.keys(Po),Lo=["state","volume","simulcastEncodings"],Io={androidInCallNotification:{title:"string",subtitle:"string",iconName:"string",disableForCustomOverride:"boolean"},disableAutoDeviceManagement:{audio:"boolean",video:"boolean"}},nr={id:{iconPath:"string",iconPathDarkMode:"string",label:"string",tooltip:"string",visualState:"'default' | 'sidebar-open' | 'active'"}},hn={id:{allow:"string",controlledBy:"'*' | 'owners' | string[]",csp:"string",iconURL:"string",label:"string",loading:"'eager' | 'lazy'",location:"'main' | 'sidebar'",name:"string",referrerPolicy:"string",sandbox:"string",src:"string",srcdoc:"string",shared:"string[] | 'owners' | boolean"}},Ze={customIntegrations:{validate:Vo,help:qo()},customTrayButtons:{validate:$o,help:"customTrayButtons should be a dictionary of the type ".concat(JSON.stringify(nr))},url:{validate:function(r){return typeof r=="string"},help:"url should be a string"},baseUrl:{validate:function(r){return typeof r=="string"},help:"baseUrl should be a string"},token:{validate:function(r){return typeof r=="string"},help:"token should be a string",queryString:"t"},dailyConfig:{validate:function(r,t){try{return t.validateDailyConfig(r),!0}catch(e){console.error("Failed to validate dailyConfig",e)}return!1},help:"Unsupported dailyConfig. Check error logs for detailed info."},reactNativeConfig:{validate:function(r){return Uo(r,Io)},help:"reactNativeConfig should look like ".concat(JSON.stringify(Io),", all fields optional")},lang:{validate:function(r){return["da","de","en-us","en","es","fi","fr","it","jp","ka","nl","no","pl","pt","pt-BR","ru","sv","tr","user"].includes(r)},help:"language not supported. Options are: da, de, en-us, en, es, fi, fr, it, jp, ka, nl, no, pl, pt, pt-BR, ru, sv, tr, user"},userName:!0,userData:{validate:function(r){try{return jo(r),!0}catch(t){return console.error(t),!1}},help:"invalid userData type provided"},startVideoOff:!0,startAudioOff:!0,allowLocalVideo:!0,allowLocalAudio:!0,activeSpeakerMode:!0,showLeaveButton:!0,showLocalVideo:!0,showParticipantsBar:!0,showFullscreenButton:!0,showUserNameChangeUI:!0,iframeStyle:!0,customLayout:!0,cssFile:!0,cssText:!0,bodyClass:!0,videoSource:{validate:function(r,t){if(typeof r=="boolean")return t._preloadCache.allowLocalVideo=r,!0;var e;if(r instanceof MediaStreamTrack)t._sharedTracks.videoTrack=r,e={customTrack:Le};else{if(delete t._sharedTracks.videoTrack,typeof r!="string")return console.error("videoSource must be a MediaStreamTrack, boolean, or a string"),!1;e={deviceId:r}}return t._updatePreloadCacheInputSettings({video:{settings:e}},!1),!0}},audioSource:{validate:function(r,t){if(typeof r=="boolean")return t._preloadCache.allowLocalAudio=r,!0;var e;if(r instanceof MediaStreamTrack)t._sharedTracks.audioTrack=r,e={customTrack:Le};else{if(delete t._sharedTracks.audioTrack,typeof r!="string")return console.error("audioSource must be a MediaStreamTrack, boolean, or a string"),!1;e={deviceId:r}}return t._updatePreloadCacheInputSettings({audio:{settings:e}},!1),!0}},subscribeToTracksAutomatically:{validate:function(r,t){return t._preloadCache.subscribeToTracksAutomatically=r,!0}},theme:{validate:function(r){var t=["accent","accentText","background","backgroundAccent","baseText","border","mainAreaBg","mainAreaBgAccent","mainAreaText","supportiveText"],e=function(n){for(var i=0,o=Object.keys(n);i<o.length;i++){var a=o[i];if(!t.includes(a))return console.error('unsupported color "'.concat(a,'". Valid colors: ').concat(t.join(", "))),!1;if(!n[a].match(/^#[0-9a-f]{6}|#[0-9a-f]{3}$/i))return console.error("".concat(a,' theme color should be provided in valid hex color format. Received: "').concat(n[a],'"')),!1}return!0};return q(r)==="object"&&("light"in r&&"dark"in r||"colors"in r)?"light"in r&&"dark"in r?"colors"in r.light?"colors"in r.dark?e(r.light.colors)&&e(r.dark.colors):(console.error('Dark theme is missing "colors" property.',r),!1):(console.error('Light theme is missing "colors" property.',r),!1):e(r.colors):(console.error('Theme must contain either both "light" and "dark" properties, or "colors".',r),!1)},help:"unsupported theme configuration. Check error logs for detailed info."},layoutConfig:{validate:function(r){if("grid"in r){var t=r.grid;if("maxTilesPerPage"in t){if(!Number.isInteger(t.maxTilesPerPage))return console.error("grid.maxTilesPerPage should be an integer. You passed ".concat(t.maxTilesPerPage,".")),!1;if(t.maxTilesPerPage>49)return console.error("grid.maxTilesPerPage can't be larger than 49 without sacrificing browser performance. Please contact us at https://www.daily.co/contact to talk about your use case."),!1}if("minTilesPerPage"in t){if(!Number.isInteger(t.minTilesPerPage))return console.error("grid.minTilesPerPage should be an integer. You passed ".concat(t.minTilesPerPage,".")),!1;if(t.minTilesPerPage<1)return console.error("grid.minTilesPerPage can't be lower than 1."),!1;if("maxTilesPerPage"in t&&t.minTilesPerPage>t.maxTilesPerPage)return console.error("grid.minTilesPerPage can't be higher than grid.maxTilesPerPage."),!1}}return!0},help:"unsupported layoutConfig. Check error logs for detailed info."},receiveSettings:{validate:function(r){return Do(r,{allowAllParticipantsKey:!1})},help:Fo({allowAllParticipantsKey:!1})},sendSettings:{validate:function(r,t){return!!function(e,n){try{return n.validateUpdateSendSettings(e),!0}catch(i){return console.error("Failed to validate send settings",i),!1}}(r,t)&&(t._preloadCache.sendSettings=r,!0)},help:"Invalid sendSettings provided. Check error logs for detailed info."},inputSettings:{validate:function(r,t){var e;return!!No(r)&&(t._inputSettings||(t._inputSettings={}),Ro(r,(e=t.properties)===null||e===void 0?void 0:e.dailyConfig,t._sharedTracks),t._updatePreloadCacheInputSettings(r,!0),!0)},help:gn()},layout:{validate:function(r){return r==="custom-v1"||r==="browser"||r==="none"},help:'layout may only be set to "custom-v1"',queryString:"layout"},emb:{queryString:"emb"},embHref:{queryString:"embHref"},dailyJsVersion:{queryString:"dailyJsVersion"},proxy:{queryString:"proxy"},strictMode:!0,allowMultipleCallInstances:!0},ir={styles:{validate:function(r){for(var t in r)if(t!=="cam"&&t!=="screen")return!1;if(r.cam){for(var e in r.cam)if(e!=="div"&&e!=="video")return!1}if(r.screen){for(var n in r.screen)if(n!=="div"&&n!=="video")return!1}return!0},help:"styles format should be a subset of: { cam: {div: {}, video: {}}, screen: {div: {}, video: {}} }"},setSubscribedTracks:{validate:function(r,t){if(t._preloadCache.subscribeToTracksAutomatically)return!1;var e=[!0,!1,"staged"];if(e.includes(r)||!N()&&r==="avatar")return!0;var n=["audio","video","screenAudio","screenVideo","rmpAudio","rmpVideo"];return function i(o){var a=arguments.length>1&&arguments[1]!==void 0&&arguments[1];for(var u in o)if(u==="custom"){if(!e.includes(o[u])&&!i(o[u],!0))return!1}else{var l=!a&&!n.includes(u),p=!e.includes(o[u]);if(l||p)return!1}return!0}(r)},help:"setSubscribedTracks cannot be used when setSubscribeToTracksAutomatically is enabled, and should be of the form: "+"true".concat(N()?"":" | 'avatar'"," | false | 'staged' | { [audio: true|false|'staged'], [video: true|false|'staged'], [screenAudio: true|false|'staged'], [screenVideo: true|false|'staged'] }")},setAudio:!0,setVideo:!0,setScreenShare:{validate:function(r){return r===!1},help:"setScreenShare must be false, as it's only meant for stopping remote participants' screen shares"},eject:!0,updatePermissions:{validate:function(r){for(var t=0,e=Object.entries(r);t<e.length;t++){var n=ve(e[t],2),i=n[0],o=n[1];switch(i){case"hasPresence":if(typeof o!="boolean")return!1;break;case"canSend":if(o instanceof Set||o instanceof Array||Array.isArray(o)){var a,u=["video","audio","screenVideo","screenAudio","customVideo","customAudio"],l=Co(o);try{for(l.s();!(a=l.n()).done;){var p=a.value;if(!u.includes(p))return!1}}catch(y){l.e(y)}finally{l.f()}}else if(typeof o!="boolean")return!1;(o instanceof Array||Array.isArray(o))&&(r.canSend=new Set(o));break;case"canAdmin":if(o instanceof Set||o instanceof Array||Array.isArray(o)){var m,g=["participants","streaming","transcription"],b=Co(o);try{for(b.s();!(m=b.n()).done;){var w=m.value;if(!g.includes(w))return!1}}catch(y){b.e(y)}finally{b.f()}}else if(typeof o!="boolean")return!1;(o instanceof Array||Array.isArray(o))&&(r.canAdmin=new Set(o));break;default:return!1}}return!0},help:"updatePermissions can take hasPresence, canSend, and canAdmin permissions. hasPresence must be a boolean. canSend can be a boolean or an Array or Set of media types (video, audio, screenVideo, screenAudio, customVideo, customAudio). canAdmin can be a boolean or an Array or Set of admin types (participants, streaming, transcription)."}};Promise.any||(Promise.any=function(){var r=P(function*(t){return new Promise(function(e,n){var i=[];t.forEach(function(o){return Promise.resolve(o).then(function(a){e(a)}).catch(function(a){i.push(a),i.length===t.length&&n(i)})})})});return function(t){return r.apply(this,arguments)}}());var Il=function(){Mt(ge,Me);var r,t,e,n,i,o,a,u,l,p,m,g,b,w,y,E,C,O,j,x,z,W,me,oe,we,et,Ct,sa,oa,aa,ca,la,ua,da,pa,ha,fa,ma,ou=Pl(ge);function ge(s){var d,c,f,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ce(this,ge),Te(Ce(c=ou.call(this)),"startListeningForDeviceChanges",function(){kl(c.handleDeviceChange)}),Te(Ce(c),"stopListeningForDeviceChanges",function(){Cl(c.handleDeviceChange)}),Te(Ce(c),"handleDeviceChange",function(S){S=S.map(function(k){return JSON.parse(JSON.stringify(k))}),c.emitDailyJSEvent({action:"available-devices-updated",availableDevices:S})}),Te(Ce(c),"handleNativeAppStateChange",function(){var S=P(function*(k){if(k==="destroyed")return console.warn("App has been destroyed before leaving the meeting. Cleaning up all the resources!"),void(yield c.destroy());var A=k==="active";c.disableReactNativeAutoDeviceManagement("video")||(A?c.camUnmutedBeforeLosingNativeActiveState&&c.setLocalVideo(!0):(c.camUnmutedBeforeLosingNativeActiveState=c.localVideo(),c.camUnmutedBeforeLosingNativeActiveState&&c.setLocalVideo(!1)))});return function(k){return S.apply(this,arguments)}}()),Te(Ce(c),"handleNativeAudioFocusChange",function(S){c.disableReactNativeAutoDeviceManagement("audio")||(c._hasNativeAudioFocus=S,c.toggleParticipantAudioBasedOnNativeAudioFocus(),c._hasNativeAudioFocus?c.micUnmutedBeforeLosingNativeAudioFocus&&c.setLocalAudio(!0):(c.micUnmutedBeforeLosingNativeAudioFocus=c.localAudio(),c.setLocalAudio(!1)))}),Te(Ce(c),"handleNativeSystemScreenCaptureStop",function(){c.stopScreenShare()}),c.strictMode=h.strictMode===void 0||h.strictMode,c.allowMultipleCallInstances=(d=h.allowMultipleCallInstances)!==null&&d!==void 0&&d,Object.keys(Xe).length&&(c._logDuplicateInstanceAttempt(),!c.allowMultipleCallInstances)){if(c.strictMode)throw new Error("Duplicate DailyIframe instances are not allowed");console.warn("Using strictMode: false to allow multiple call instances is now deprecated. Set `allowMultipleCallInstances: true`")}if(window._daily||(window._daily={pendings:[],instances:{}}),c.callClientId=Pt(),f=Ce(c),Xe[f.callClientId]=f,window._daily.instances[c.callClientId]={},c._sharedTracks={},window._daily.instances[c.callClientId].tracks=c._sharedTracks,h.dailyJsVersion=ge.version(),c._iframe=s,c._callObjectMode=h.layout==="none"&&!c._iframe,c._preloadCache={subscribeToTracksAutomatically:!0,outputDeviceId:null,inputSettings:null,sendSettings:null,videoTrackForNetworkConnectivityTest:null,videoTrackForConnectionQualityTest:null},h.showLocalVideo!==void 0?c._callObjectMode?console.error("showLocalVideo is not available in call object mode"):c._showLocalVideo=!!h.showLocalVideo:c._showLocalVideo=!0,h.showParticipantsBar!==void 0?c._callObjectMode?console.error("showParticipantsBar is not available in call object mode"):c._showParticipantsBar=!!h.showParticipantsBar:c._showParticipantsBar=!0,h.customIntegrations!==void 0?c._callObjectMode?console.error("customIntegrations is not available in call object mode"):c._customIntegrations=h.customIntegrations:c._customIntegrations={},h.customTrayButtons!==void 0?c._callObjectMode?console.error("customTrayButtons is not available in call object mode"):c._customTrayButtons=h.customTrayButtons:c._customTrayButtons={},h.activeSpeakerMode!==void 0?c._callObjectMode?console.error("activeSpeakerMode is not available in call object mode"):c._activeSpeakerMode=!!h.activeSpeakerMode:c._activeSpeakerMode=!1,h.receiveSettings?c._callObjectMode?c._receiveSettings=h.receiveSettings:console.error("receiveSettings is only available in call object mode"):c._receiveSettings={},c.validateProperties(h),c.properties=T({},h),c._inputSettings||(c._inputSettings={}),c._callObjectLoader=c._callObjectMode?new hl(c.callClientId):null,c._callState=Jr,c._isPreparingToJoin=!1,c._accessState={access:Kt},c._meetingSessionSummary={},c._finalSummaryOfPrevSession={},c._meetingSessionState=vn(Ao,c._callObjectMode),c._nativeInCallAudioMode=Mo,c._participants={},c._isScreenSharing=!1,c._participantCounts=Oo,c._rmpPlayerState={},c._waitingParticipants={},c._network={threshold:"good",quality:100},c._activeSpeaker={},c._localAudioLevel=0,c._isLocalAudioLevelObserverRunning=!1,c._remoteParticipantsAudioLevel={},c._isRemoteParticipantsAudioLevelObserverRunning=!1,c._maxAppMessageSize=Xr,c._messageChannel=N()?new ul:new cl,c._iframe&&(c._iframe.requestFullscreen?c._iframe.addEventListener("fullscreenchange",function(){document.fullscreenElement===c._iframe?(c.emitDailyJSEvent({action:wt}),c.sendMessageToCallMachine({action:wt})):(c.emitDailyJSEvent({action:St}),c.sendMessageToCallMachine({action:St}))}):c._iframe.webkitRequestFullscreen&&c._iframe.addEventListener("webkitfullscreenchange",function(){document.webkitFullscreenElement===c._iframe?(c.emitDailyJSEvent({action:wt}),c.sendMessageToCallMachine({action:wt})):(c.emitDailyJSEvent({action:St}),c.sendMessageToCallMachine({action:St}))})),N()){var v=c.nativeUtils();v.addAudioFocusChangeListener&&v.removeAudioFocusChangeListener&&v.addAppStateChangeListener&&v.removeAppStateChangeListener&&v.addSystemScreenCaptureStopListener&&v.removeSystemScreenCaptureStopListener||console.warn("expected (add|remove)(AudioFocusChange|AppActiveStateChange|SystemScreenCaptureStop)Listener to be available in React Native"),c._hasNativeAudioFocus=!0,v.addAudioFocusChangeListener(c.handleNativeAudioFocusChange),v.addAppStateChangeListener(c.handleNativeAppStateChange),v.addSystemScreenCaptureStopListener(c.handleNativeSystemScreenCaptureStop)}return c._callObjectMode&&c.startListeningForDeviceChanges(),c._messageChannel.addListenerForMessagesFromCallMachine(c.handleMessageFromCallMachine,c.callClientId,Ce(c)),c}return le(ge,[{key:"destroy",value:(ma=P(function*(){var s,d;try{yield this.leave()}catch{}var c=this._iframe;if(c){var f=c.parentElement;f&&f.removeChild(c)}if(this._messageChannel.removeListener(this.handleMessageFromCallMachine),N()){var h=this.nativeUtils();h.removeAudioFocusChangeListener(this.handleNativeAudioFocusChange),h.removeAppStateChangeListener(this.handleNativeAppStateChange),h.removeSystemScreenCaptureStopListener(this.handleNativeSystemScreenCaptureStop)}this._callObjectMode&&this.stopListeningForDeviceChanges(),this.resetMeetingDependentVars(),this._destroyed=!0,this.emitDailyJSEvent({action:"call-instance-destroyed"}),delete Xe[this.callClientId],!((s=window)===null||s===void 0||(d=s._daily)===null||d===void 0)&&d.instances&&delete window._daily.instances[this.callClientId],this.strictMode&&(this.callClientId=void 0)}),function(){return ma.apply(this,arguments)})},{key:"isDestroyed",value:function(){return!!this._destroyed}},{key:"loadCss",value:function(s){var d=s.bodyClass,c=s.cssFile,f=s.cssText;return D(),this.sendMessageToCallMachine({action:"load-css",cssFile:this.absoluteUrl(c),bodyClass:d,cssText:f}),this}},{key:"iframe",value:function(){return D(),this._iframe}},{key:"meetingState",value:function(){return this._callState}},{key:"accessState",value:function(){return fe(this._callObjectMode,"accessState()"),this._accessState}},{key:"participants",value:function(){return this._participants}},{key:"participantCounts",value:function(){return this._participantCounts}},{key:"waitingParticipants",value:function(){return fe(this._callObjectMode,"waitingParticipants()"),this._waitingParticipants}},{key:"validateParticipantProperties",value:function(s,d){for(var c in d){if(!ir[c])throw new Error("unrecognized updateParticipant property ".concat(c));if(ir[c].validate&&!ir[c].validate(d[c],this,this._participants[s]))throw new Error(ir[c].help)}}},{key:"updateParticipant",value:function(s,d){return this._participants.local&&this._participants.local.session_id===s&&(s="local"),s&&d&&(this.validateParticipantProperties(s,d),this.sendMessageToCallMachine({action:"update-participant",id:s,properties:d})),this}},{key:"updateParticipants",value:function(s){var d=this._participants.local&&this._participants.local.session_id;for(var c in s)c===d&&(c="local"),c&&s[c]&&this.validateParticipantProperties(c,s[c]);return this.sendMessageToCallMachine({action:"update-participants",participants:s}),this}},{key:"updateWaitingParticipant",value:(fa=P(function*(){var s=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(fe(this._callObjectMode,"updateWaitingParticipant()"),J(this._callState,"updateWaitingParticipant()"),typeof d!="string"||q(c)!=="object")throw new Error("updateWaitingParticipant() must take an id string and a updates object");return new Promise(function(f,h){s.sendMessageToCallMachine({action:"daily-method-update-waiting-participant",id:d,updates:c},function(v){v.error&&h(v.error),v.id||h(new Error("unknown error in updateWaitingParticipant()")),f({id:v.id})})})}),function(){return fa.apply(this,arguments)})},{key:"updateWaitingParticipants",value:(ha=P(function*(){var s=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(fe(this._callObjectMode,"updateWaitingParticipants()"),J(this._callState,"updateWaitingParticipants()"),q(d)!=="object")throw new Error("updateWaitingParticipants() must take a mapping between ids and update objects");return new Promise(function(c,f){s.sendMessageToCallMachine({action:"daily-method-update-waiting-participants",updatesById:d},function(h){h.error&&f(h.error),h.ids||f(new Error("unknown error in updateWaitingParticipants()")),c({ids:h.ids})})})}),function(){return ha.apply(this,arguments)})},{key:"requestAccess",value:(pa=P(function*(){var s=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=d.access,f=c===void 0?{level:Xi}:c,h=d.name,v=h===void 0?"":h;return fe(this._callObjectMode,"requestAccess()"),J(this._callState,"requestAccess()"),new Promise(function(S,k){s.sendMessageToCallMachine({action:"daily-method-request-access",access:f,name:v},function(A){A.error&&k(A.error),A.access||k(new Error("unknown error in requestAccess()")),S({access:A.access,granted:A.granted})})})}),function(){return pa.apply(this,arguments)})},{key:"localAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.audio.state):null}},{key:"localVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.video.state):null}},{key:"setLocalAudio",value:function(s){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return"forceDiscardTrack"in d&&(N()?(console.warn("forceDiscardTrack option not supported in React Native; ignoring"),d={}):s&&(console.warn("forceDiscardTrack option only supported when calling setLocalAudio(false); ignoring"),d={})),this.sendMessageToCallMachine({action:"local-audio",state:s,options:d}),this}},{key:"localScreenAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenAudio.state):null}},{key:"localScreenVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenVideo.state):null}},{key:"updateScreenShare",value:function(s){if(this._isScreenSharing)return this.sendMessageToCallMachine({action:"local-screen-update",options:s}),this;console.warn("There is no screen share in progress. Try calling startScreenShare first.")}},{key:"setLocalVideo",value:function(s){return this.sendMessageToCallMachine({action:"local-video",state:s}),this}},{key:"_setAllowLocalAudio",value:function(s){if(this._preloadCache.allowLocalAudio=s,this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-allow-local-audio",state:s}),this}},{key:"_setAllowLocalVideo",value:function(s){if(this._preloadCache.allowLocalVideo=s,this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-allow-local-video",state:s}),this}},{key:"getReceiveSettings",value:(da=P(function*(s){var d=this,c=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).showInheritedValues,f=c!==void 0&&c;if(fe(this._callObjectMode,"getReceiveSettings()"),!this._callMachineInitialized)return this._receiveSettings;switch(q(s)){case"string":return new Promise(function(h){d.sendMessageToCallMachine({action:"get-single-participant-receive-settings",id:s,showInheritedValues:f},function(v){h(v.receiveSettings)})});case"undefined":return this._receiveSettings;default:throw new Error('first argument to getReceiveSettings() must be a participant id (or "base"), or there should be no arguments')}}),function(s){return da.apply(this,arguments)})},{key:"updateReceiveSettings",value:(ua=P(function*(s){var d=this;if(fe(this._callObjectMode,"updateReceiveSettings()"),!Do(s,{allowAllParticipantsKey:!0}))throw new Error(Fo({allowAllParticipantsKey:!0}));return J(this._callState,"updateReceiveSettings()","To specify receive settings earlier, use the receiveSettings config property."),new Promise(function(c){d.sendMessageToCallMachine({action:"update-receive-settings",receiveSettings:s},function(f){c({receiveSettings:f.receiveSettings})})})}),function(s){return ua.apply(this,arguments)})},{key:"_prepInputSettingsForSharing",value:function(s,d){if(s){var c={};if(s.audio){var f,h,v,S;s.audio.settings&&(!Object.keys(s.audio.settings).length&&d||(c.audio={settings:T({},s.audio.settings)})),d&&(f=c.audio)!==null&&f!==void 0&&(h=f.settings)!==null&&h!==void 0&&h.customTrack&&(c.audio.settings={customTrack:this._sharedTracks.audioTrack});var k=((v=s.audio.processor)===null||v===void 0?void 0:v.type)==="none"&&((S=s.audio.processor)===null||S===void 0?void 0:S._isDefaultWhenNone);if(s.audio.processor&&!k){var A=T({},s.audio.processor);delete A._isDefaultWhenNone,c.audio=T(T({},c.audio),{},{processor:A})}}if(s.video){var $,R,H,Se;s.video.settings&&(!Object.keys(s.video.settings).length&&d||(c.video={settings:T({},s.video.settings)})),d&&($=c.video)!==null&&$!==void 0&&(R=$.settings)!==null&&R!==void 0&&R.customTrack&&(c.video.settings={customTrack:this._sharedTracks.videoTrack});var Ve=((H=s.video.processor)===null||H===void 0?void 0:H.type)==="none"&&((Se=s.video.processor)===null||Se===void 0?void 0:Se._isDefaultWhenNone);if(s.video.processor&&!Ve){var tt=T({},s.video.processor);delete tt._isDefaultWhenNone,c.video=T(T({},c.video),{},{processor:tt})}}return c}}},{key:"getInputSettings",value:function(){var s=this;return D(),new Promise(function(d){d(s._getInputSettings())})}},{key:"_getInputSettings",value:function(){var s,d,c,f,h,v,S,k,A={processor:{type:"none",_isDefaultWhenNone:!0}};this._inputSettings?(s=((c=this._inputSettings)===null||c===void 0?void 0:c.video)||A,d=((f=this._inputSettings)===null||f===void 0?void 0:f.audio)||A):(s=((h=this._preloadCache)===null||h===void 0||(v=h.inputSettings)===null||v===void 0?void 0:v.video)||A,d=((S=this._preloadCache)===null||S===void 0||(k=S.inputSettings)===null||k===void 0?void 0:k.audio)||A);var $={audio:d,video:s};return this._prepInputSettingsForSharing($,!0)}},{key:"_updatePreloadCacheInputSettings",value:function(s,d){var c=this._inputSettings||{},f={};if(s.video){var h,v,S;f.video={},s.video.settings?(f.video.settings={},d||s.video.settings.customTrack||(S=c.video)===null||S===void 0||!S.settings?f.video.settings=s.video.settings:f.video.settings=T(T({},c.video.settings),s.video.settings),Object.keys(f.video.settings).length||delete f.video.settings):(h=c.video)!==null&&h!==void 0&&h.settings&&(f.video.settings=c.video.settings),s.video.processor?f.video.processor=s.video.processor:(v=c.video)!==null&&v!==void 0&&v.processor&&(f.video.processor=c.video.processor)}else c.video&&(f.video=c.video);if(s.audio){var k,A,$;f.audio={},s.audio.settings?(f.audio.settings={},d||s.audio.settings.customTrack||($=c.audio)===null||$===void 0||!$.settings?f.audio.settings=s.audio.settings:f.audio.settings=T(T({},c.audio.settings),s.audio.settings),Object.keys(f.audio.settings).length||delete f.audio.settings):(k=c.audio)!==null&&k!==void 0&&k.settings&&(f.audio.settings=c.audio.settings),s.audio.processor?f.audio.processor=s.audio.processor:(A=c.audio)!==null&&A!==void 0&&A.processor&&(f.audio.processor=c.audio.processor)}else c.audio&&(f.audio=c.audio);this._maybeUpdateInputSettings(f)}},{key:"_devicesFromInputSettings",value:function(s){var d,c,f,h,v=(s==null||(d=s.video)===null||d===void 0||(c=d.settings)===null||c===void 0?void 0:c.deviceId)||null,S=(s==null||(f=s.audio)===null||f===void 0||(h=f.settings)===null||h===void 0?void 0:h.deviceId)||null,k=this._preloadCache.outputDeviceId||null;return{camera:v?{deviceId:v}:{},mic:S?{deviceId:S}:{},speaker:k?{deviceId:k}:{}}}},{key:"updateInputSettings",value:(la=P(function*(s){var d=this;return D(),No(s)?s.video||s.audio?(Ro(s,this.properties.dailyConfig,this._sharedTracks),this._callObjectMode&&!this._callMachineInitialized?(this._updatePreloadCacheInputSettings(s,!0),this._getInputSettings()):new Promise(function(c,f){d.sendMessageToCallMachine({action:"update-input-settings",inputSettings:s},function(h){if(h.error)f(h.error);else{if(h.returnPreloadCache)return d._updatePreloadCacheInputSettings(s,!0),void c(d._getInputSettings());d._maybeUpdateInputSettings(h.inputSettings),c(d._prepInputSettingsForSharing(h.inputSettings,!0))}})})):this._getInputSettings():(console.error(gn()),Promise.reject(gn()))}),function(s){return la.apply(this,arguments)})},{key:"setBandwidth",value:function(s){var d=s.kbs,c=s.trackConstraints;if(D(),this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-bandwidth",kbs:d,trackConstraints:c}),this}},{key:"getDailyLang",value:function(){var s=this;if(D(),this._callMachineInitialized)return new Promise(function(d){s.sendMessageToCallMachine({action:"get-daily-lang"},function(c){delete c.action,delete c.callbackStamp,d(c)})})}},{key:"setDailyLang",value:function(s){return D(),this.sendMessageToCallMachine({action:"set-daily-lang",lang:s}),this}},{key:"setProxyUrl",value:function(s){return this.sendMessageToCallMachine({action:"set-proxy-url",proxyUrl:s}),this}},{key:"setIceConfig",value:function(s){return this.sendMessageToCallMachine({action:"set-ice-config",iceConfig:s}),this}},{key:"meetingSessionSummary",value:function(){return[qe,Pe].includes(this._callState)?this._finalSummaryOfPrevSession:this._meetingSessionSummary}},{key:"getMeetingSession",value:(ca=P(function*(){var s=this;return console.warn("getMeetingSession() is deprecated: use meetingSessionSummary(), which will return immediately"),J(this._callState,"getMeetingSession()"),new Promise(function(d){s.sendMessageToCallMachine({action:"get-meeting-session"},function(c){delete c.action,delete c.callbackStamp,d(c)})})}),function(){return ca.apply(this,arguments)})},{key:"meetingSessionState",value:function(){return J(this._callState,"meetingSessionState"),this._meetingSessionState}},{key:"setMeetingSessionData",value:function(s){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"replace";fe(this._callObjectMode,"setMeetingSessionData()"),J(this._callState,"setMeetingSessionData");try{(function(c,f){new dl({data:c,mergeStrategy:f})})(s,d)}catch(c){throw console.error(c),c}try{this.sendMessageToCallMachine({action:"set-session-data",data:s,mergeStrategy:d})}catch(c){throw new Error("Error setting meeting session data: ".concat(c))}}},{key:"setUserName",value:function(s,d){var c=this;return this.properties.userName=s,new Promise(function(f){c.sendMessageToCallMachine({action:"set-user-name",name:s??"",thisMeetingOnly:N()||!!d&&!!d.thisMeetingOnly},function(h){delete h.action,delete h.callbackStamp,f(h)})})}},{key:"setUserData",value:(aa=P(function*(s){var d=this;try{jo(s)}catch(c){throw console.error(c),c}if(this.properties.userData=s,this._callMachineInitialized)return new Promise(function(c){try{d.sendMessageToCallMachine({action:"set-user-data",userData:s},function(f){delete f.action,delete f.callbackStamp,c(f)})}catch(f){throw new Error("Error setting user data: ".concat(f))}})}),function(s){return aa.apply(this,arguments)})},{key:"validateAudioLevelInterval",value:function(s){if(s&&(s<100||typeof s!="number"))throw new Error("The interval must be a number greater than or equal to 100 milliseconds.")}},{key:"startLocalAudioLevelObserver",value:function(s){var d=this;if(typeof AudioWorkletNode>"u"&&!N())throw new Error("startLocalAudioLevelObserver() is not supported on this browser");if(this.validateAudioLevelInterval(s),this._callMachineInitialized)return this._isLocalAudioLevelObserverRunning=!0,new Promise(function(c,f){d.sendMessageToCallMachine({action:"start-local-audio-level-observer",interval:s},function(h){d._isLocalAudioLevelObserverRunning=!h.error,h.error?f({error:h.error}):c()})});this._preloadCache.localAudioLevelObserver={enabled:!0,interval:s}}},{key:"isLocalAudioLevelObserverRunning",value:function(){return this._isLocalAudioLevelObserverRunning}},{key:"stopLocalAudioLevelObserver",value:function(){this._preloadCache.localAudioLevelObserver=null,this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-local-audio-level-observer"})}},{key:"startRemoteParticipantsAudioLevelObserver",value:function(s){var d=this;if(this.validateAudioLevelInterval(s),this._callMachineInitialized)return this._isRemoteParticipantsAudioLevelObserverRunning=!0,new Promise(function(c,f){d.sendMessageToCallMachine({action:"start-remote-participants-audio-level-observer",interval:s},function(h){d._isRemoteParticipantsAudioLevelObserverRunning=!h.error,h.error?f({error:h.error}):c()})});this._preloadCache.remoteParticipantsAudioLevelObserver={enabled:!0,interval:s}}},{key:"isRemoteParticipantsAudioLevelObserverRunning",value:function(){return this._isRemoteParticipantsAudioLevelObserverRunning}},{key:"stopRemoteParticipantsAudioLevelObserver",value:function(){this._preloadCache.remoteParticipantsAudioLevelObserver=null,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-remote-participants-audio-level-observer"})}},{key:"startCamera",value:(oa=P(function*(){var s=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(fe(this._callObjectMode,"startCamera()"),fn(this._callState,this._isPreparingToJoin,"startCamera()","Did you mean to use setLocalAudio() and/or setLocalVideo() instead?"),this.needsLoad())try{yield this.load(d)}catch(c){return Promise.reject(c)}else{if(this._didPreAuth){if(d.url&&d.url!==this.properties.url)return console.error("url in startCamera() is different than the one used in preAuth()"),Promise.reject();if(d.token&&d.token!==this.properties.token)return console.error("token in startCamera() is different than the one used in preAuth()"),Promise.reject()}this.validateProperties(d),this.properties=T(T({},this.properties),d)}return new Promise(function(c){s._preloadCache.inputSettings=s._prepInputSettingsForSharing(s._inputSettings,!1),s.sendMessageToCallMachine({action:"start-camera",properties:dt(s.properties,s.callClientId),preloadCache:dt(s._preloadCache,s.callClientId)},function(f){c({camera:f.camera,mic:f.mic,speaker:f.speaker})})})}),function(){return oa.apply(this,arguments)})},{key:"validateCustomTrack",value:function(s,d,c){if(c&&c.length>50)throw new Error("Custom track `trackName` must not be more than 50 characters");if(d&&d!=="music"&&d!=="speech"&&!(d instanceof Object))throw new Error("Custom track `mode` must be either `music` | `speech` | `DailyMicAudioModeSettings` or `undefined`");if(c&&["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo","customVideoDefaults"].includes(c))throw new Error("Custom track `trackName` must not match a track name already used by daily: cam-audio, cam-video, customVideoDefaults, screen-video, screen-audio, rmpAudio, rmpVideo");if(!(s instanceof MediaStreamTrack))throw new Error("Custom tracks provided must be instances of MediaStreamTrack")}},{key:"startCustomTrack",value:function(){var s=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{track,mode,trackName};return D(),J(this._callState,"startCustomTrack()"),this.validateCustomTrack(d.track,d.mode,d.trackName),new Promise(function(c,f){s._sharedTracks.customTrack=d.track,d.track=Le,s.sendMessageToCallMachine({action:"start-custom-track",properties:d},function(h){h.error?f({error:h.error}):c(h.mediaTag)})})}},{key:"stopCustomTrack",value:function(s){var d=this;return D(),J(this._callState,"stopCustomTrack()"),new Promise(function(c){d.sendMessageToCallMachine({action:"stop-custom-track",mediaTag:s},function(f){c(f.mediaTag)})})}},{key:"setCamera",value:function(s){var d=this;return kt(),or(this._callMachineInitialized,"setCamera()"),new Promise(function(c){d.sendMessageToCallMachine({action:"set-camera",cameraDeviceId:s},function(f){c({device:f.device})})})}},{key:"setAudioDevice",value:(sa=P(function*(s){return kt(),this.nativeUtils().setAudioDevice(s),{deviceId:yield this.nativeUtils().getAudioDevice()}}),function(s){return sa.apply(this,arguments)})},{key:"cycleCamera",value:function(){var s=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(c){s.sendMessageToCallMachine({action:"cycle-camera",properties:d},function(f){c({device:f.device})})})}},{key:"cycleMic",value:function(){var s=this;return D(),new Promise(function(d){s.sendMessageToCallMachine({action:"cycle-mic"},function(c){d({device:c.device})})})}},{key:"getCameraFacingMode",value:function(){var s=this;return kt(),new Promise(function(d){s.sendMessageToCallMachine({action:"get-camera-facing-mode"},function(c){d(c.facingMode)})})}},{key:"setInputDevicesAsync",value:(Ct=P(function*(s){var d=this,c=s.audioDeviceId,f=s.videoDeviceId,h=s.audioSource,v=s.videoSource;if(D(),h!==void 0&&(c=h),v!==void 0&&(f=v),typeof c=="boolean"&&(this._setAllowLocalAudio(c),c=void 0),typeof f=="boolean"&&(this._setAllowLocalVideo(f),f=void 0),!c&&!f)return yield this.getInputDevices();var S={};return c&&(c instanceof MediaStreamTrack?(this._sharedTracks.audioTrack=c,c=Le,S.audio={settings:{customTrack:c}}):(delete this._sharedTracks.audioTrack,S.audio={settings:{deviceId:c}})),f&&(f instanceof MediaStreamTrack?(this._sharedTracks.videoTrack=f,f=Le,S.video={settings:{customTrack:f}}):(delete this._sharedTracks.videoTrack,S.video={settings:{deviceId:f}})),this._callObjectMode&&this.needsLoad()?(this._updatePreloadCacheInputSettings(S,!1),this._devicesFromInputSettings(this._inputSettings)):new Promise(function(k){d.sendMessageToCallMachine({action:"set-input-devices",audioDeviceId:c,videoDeviceId:f},function(A){if(delete A.action,delete A.callbackStamp,A.returnPreloadCache)return d._updatePreloadCacheInputSettings(S,!1),void k(d._devicesFromInputSettings(d._inputSettings));k(A)})})}),function(s){return Ct.apply(this,arguments)})},{key:"setOutputDeviceAsync",value:(et=P(function*(s){var d=this,c=s.outputDeviceId;return D(),c&&(this._preloadCache.outputDeviceId=c),this._callObjectMode&&this.needsLoad()?this._devicesFromInputSettings(this._inputSettings):new Promise(function(f){d.sendMessageToCallMachine({action:"set-output-device",outputDeviceId:c},function(h){delete h.action,delete h.callbackStamp,h.returnPreloadCache?f(d._devicesFromInputSettings(d._inputSettings)):f(h)})})}),function(s){return et.apply(this,arguments)})},{key:"getInputDevices",value:(we=P(function*(){var s=this;return this._callObjectMode&&this.needsLoad()?this._devicesFromInputSettings(this._inputSettings):new Promise(function(d){s.sendMessageToCallMachine({action:"get-input-devices"},function(c){c.returnPreloadCache?d(s._devicesFromInputSettings(s._inputSettings)):d({camera:c.camera,mic:c.mic,speaker:c.speaker})})})}),function(){return we.apply(this,arguments)})},{key:"nativeInCallAudioMode",value:function(){return kt(),this._nativeInCallAudioMode}},{key:"setNativeInCallAudioMode",value:function(s){if(kt(),[Mo,Ll].includes(s)){if(s!==this._nativeInCallAudioMode)return this._nativeInCallAudioMode=s,!this.disableReactNativeAutoDeviceManagement("audio")&&sr(this._callState,this._isPreparingToJoin)&&this.nativeUtils().setAudioMode(this._nativeInCallAudioMode),this}else console.error("invalid in-call audio mode specified: ",s)}},{key:"preAuth",value:(oe=P(function*(){var s=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(fe(this._callObjectMode,"preAuth()"),fn(this._callState,this._isPreparingToJoin,"preAuth()"),this.needsLoad()&&(yield this.load(d)),!d.url)throw new Error("preAuth() requires at least a url to be provided");return this.validateProperties(d),this.properties=T(T({},this.properties),d),new Promise(function(c,f){s._preloadCache.inputSettings=s._prepInputSettingsForSharing(s._inputSettings,!1),s.sendMessageToCallMachine({action:"daily-method-preauth",properties:dt(s.properties,s.callClientId),preloadCache:dt(s._preloadCache,s.callClientId)},function(h){return h.error?f(h.error):h.access?(s._didPreAuth=!0,void c({access:h.access})):f(new Error("unknown error in preAuth()"))})})}),function(){return oe.apply(this,arguments)})},{key:"load",value:(me=P(function*(s){var d=this;if(this.needsLoad()){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");if(s&&(this.validateProperties(s),this.properties=T(T({},this.properties),s)),!this._callObjectMode&&!this.properties.url)throw new Error("can't load iframe meeting because url property isn't set");return this._updateCallState(Hi),this.emitDailyJSEvent({action:ss}),this._callObjectMode?new Promise(function(c,f){d._callObjectLoader.cancel();var h=Date.now();d._callObjectLoader.load(d.properties.dailyConfig,function(v){d._bundleLoadTime=v?"no-op":Date.now()-h,d._updateCallState(Qi),v&&d.emitDailyJSEvent({action:Yr}),c()},function(v,S){if(d.emitDailyJSEvent({action:os}),!S){d._updateCallState(Pe),d.resetMeetingDependentVars();var k={action:Kr,errorMsg:v.msg,error:{type:"connection-error",msg:"Failed to load call object bundle.",details:{on:"load",sourceError:v,bundleUrl:Lt(d.properties.dailyConfig)}}};d._maybeSendToSentry(k),d.emitDailyJSEvent(k),f(v.msg)}})}):(this._iframe.src=Vn(this.assembleMeetingUrl(),this.properties.dailyConfig),new Promise(function(c,f){d._loadedCallback=function(h){d._callState!==Pe?(d._updateCallState(Qi),(d.properties.cssFile||d.properties.cssText)&&d.loadCss(d.properties),c()):f(h)}}))}}),function(s){return me.apply(this,arguments)})},{key:"join",value:(W=P(function*(){var s=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._testCallInProgress&&this.stopTestCallQuality();var c=!1;if(this.needsLoad()){this.updateIsPreparingToJoin(!0);try{yield this.load(d)}catch(f){return this.updateIsPreparingToJoin(!1),Promise.reject(f)}}else{if(c=!(!this.properties.cssFile&&!this.properties.cssText),this._didPreAuth){if(d.url&&d.url!==this.properties.url)return console.error("url in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject();if(d.token&&d.token!==this.properties.token)return console.error("token in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject()}if(d.url&&!this._callObjectMode&&d.url&&d.url!==this.properties.url)return console.error("url in join() is different than the one used in load() (".concat(this.properties.url," -> ").concat(d.url,")")),this.updateIsPreparingToJoin(!1),Promise.reject();this.validateProperties(d),this.properties=T(T({},this.properties),d)}return d.showLocalVideo!==void 0&&(this._callObjectMode?console.error("showLocalVideo is not available in callObject mode"):this._showLocalVideo=!!d.showLocalVideo),d.showParticipantsBar!==void 0&&(this._callObjectMode?console.error("showParticipantsBar is not available in callObject mode"):this._showParticipantsBar=!!d.showParticipantsBar),this._callState===Fe||this._callState===Qt?(console.warn("already joined meeting, call leave() before joining again"),void this.updateIsPreparingToJoin(!1)):(this._updateCallState(Qt,!1),this.emitDailyJSEvent({action:ls}),this._preloadCache.inputSettings=this._prepInputSettingsForSharing(this._inputSettings||{},!1),this.sendMessageToCallMachine({action:"join-meeting",properties:dt(this.properties,this.callClientId),preloadCache:dt(this._preloadCache,this.callClientId)}),new Promise(function(f,h){s._joinedCallback=function(v,S){if(s._callState!==Pe){if(s._updateCallState(Fe),v)for(var k in v){if(s._callObjectMode){var A=s._callMachine().store;yo(v[k],A),_o(v[k],A),bo(v[k],s._participants[k],A)}s._participants[k]=T({},v[k]),s.toggleParticipantAudioBasedOnNativeAudioFocus()}c&&s.loadCss(s.properties),f(v)}else h(S)}}))}),function(){return W.apply(this,arguments)})},{key:"leave",value:(z=P(function*(){var s=this;return this._testCallInProgress&&this.stopTestCallQuality(),new Promise(function(d){s._callState===qe||s._callState===Pe?d():s._callObjectLoader&&!s._callObjectLoader.loaded?(s._callObjectLoader.cancel(),s._updateCallState(qe),s.resetMeetingDependentVars(),s.emitDailyJSEvent({action:qe}),d()):(s._resolveLeave=d,s.sendMessageToCallMachine({action:"leave-meeting"}))})}),function(){return z.apply(this,arguments)})},{key:"startScreenShare",value:(x=P(function*(){var s=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(or(this._callMachineInitialized,"startScreenShare()"),d.screenVideoSendSettings&&this._validateVideoSendSettings("screenVideo",d.screenVideoSendSettings),d.mediaStream&&(this._sharedTracks.screenMediaStream=d.mediaStream,d.mediaStream=Le),typeof DailyNativeUtils<"u"&&DailyNativeUtils.isIOS!==void 0&&DailyNativeUtils.isIOS){var c=this.nativeUtils();if(yield c.isScreenBeingCaptured())return void this.emitDailyJSEvent({action:Qr,type:"screen-share-error",errorMsg:"Could not start the screen sharing. The screen is already been captured!"});c.setSystemScreenCaptureStartCallback(function(){c.setSystemScreenCaptureStartCallback(null),s.sendMessageToCallMachine({action:Xs,captureOptions:d})}),c.presentSystemScreenCapturePrompt()}else this.sendMessageToCallMachine({action:Xs,captureOptions:d})}),function(){return x.apply(this,arguments)})},{key:"stopScreenShare",value:function(){or(this._callMachineInitialized,"stopScreenShare()"),this.sendMessageToCallMachine({action:"local-screen-stop"})}},{key:"startRecording",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=s.type;if(d&&d!=="cloud"&&d!=="raw-tracks"&&d!=="local")throw new Error("invalid type: ".concat(d,", allowed values 'cloud', 'raw-tracks', or 'local'"));this.sendMessageToCallMachine(T({action:"local-recording-start"},s))}},{key:"updateRecording",value:function(s){var d=s.layout,c=d===void 0?{preset:"default"}:d,f=s.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-recording",layout:c,instanceId:f})}},{key:"stopRecording",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(T({action:"local-recording-stop"},s))}},{key:"startLiveStreaming",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(T({action:"daily-method-start-live-streaming"},s))}},{key:"updateLiveStreaming",value:function(s){var d=s.layout,c=d===void 0?{preset:"default"}:d,f=s.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-live-streaming",layout:c,instanceId:f})}},{key:"addLiveStreamingEndpoints",value:function(s){var d=s.endpoints,c=s.instanceId;this.sendMessageToCallMachine({action:Zs,endpointsOp:nl,endpoints:d,instanceId:c})}},{key:"removeLiveStreamingEndpoints",value:function(s){var d=s.endpoints,c=s.instanceId;this.sendMessageToCallMachine({action:Zs,endpointsOp:il,endpoints:d,instanceId:c})}},{key:"stopLiveStreaming",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(T({action:"daily-method-stop-live-streaming"},s))}},{key:"validateDailyConfig",value:function(s){s.camSimulcastEncodings&&(console.warn("camSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide camera simulcast settings."),this.validateSimulcastEncodings(s.camSimulcastEncodings)),s.screenSimulcastEncodings&&console.warn("screenSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide screen simulcast settings."),ao()&&s.noAutoDefaultDeviceChange&&console.warn("noAutoDefaultDeviceChange is not supported on Android, and will be ignored.")}},{key:"validateSimulcastEncodings",value:function(s){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(s){if(!(s instanceof Array||Array.isArray(s)))throw new Error("encodings must be an Array");if(!Go(s.length,1,3))throw new Error("encodings must be an Array with between 1 to ".concat(3," layers"));for(var f=0;f<s.length;f++){var h=s[f];for(var v in this._validateEncodingLayerHasValidProperties(h),h)if(pn.includes(v)){if(typeof h[v]!="number")throw new Error("".concat(v," must be a number"));if(d){var S=d[v],k=S.min,A=S.max;if(!Go(h[v],k,A))throw new Error("".concat(v," value not in range. valid range: ").concat(k," to ").concat(A))}}else if(!["active","scalabilityMode"].includes(v))throw new Error("Invalid key ".concat(v,", valid keys are:")+Object.values(pn));if(c&&!h.hasOwnProperty("maxBitrate"))throw new Error("maxBitrate is not specified")}}}},{key:"startRemoteMediaPlayer",value:(j=P(function*(s){var d=this,c=s.url,f=s.settings,h=f===void 0?{state:en.PLAY}:f;try{(function(v){if(typeof v!="string")throw new Error('url parameter must be "string" type')})(c),Jo(h),function(v){for(var S in v)if(!Lo.includes(S))throw new Error("Invalid key ".concat(S,", valid keys are: ").concat(Lo));v.simulcastEncodings&&this.validateSimulcastEncodings(v.simulcastEncodings,Po,!0)}(h)}catch(v){throw console.error("invalid argument Error: ".concat(v)),console.error(`startRemoteMediaPlayer arguments must be of the form:
  { url: "playback url",
  settings?:
  {state: "play"|"pause", simulcastEncodings?: [{}] } }`),v}return new Promise(function(v,S){d.sendMessageToCallMachine({action:"daily-method-start-remote-media-player",url:c,settings:h},function(k){k.error?S({error:k.error,errorMsg:k.errorMsg}):v({session_id:k.session_id,remoteMediaPlayerState:{state:k.state,settings:k.settings}})})})}),function(s){return j.apply(this,arguments)})},{key:"stopRemoteMediaPlayer",value:(O=P(function*(s){var d=this;if(typeof s!="string")throw new Error(" remotePlayerID must be of type string");return new Promise(function(c,f){d.sendMessageToCallMachine({action:"daily-method-stop-remote-media-player",session_id:s},function(h){h.error?f({error:h.error,errorMsg:h.errorMsg}):c()})})}),function(s){return O.apply(this,arguments)})},{key:"updateRemoteMediaPlayer",value:(C=P(function*(s){var d=this,c=s.session_id,f=s.settings;try{Jo(f)}catch(h){throw console.error("invalid argument Error: ".concat(h)),console.error(`updateRemoteMediaPlayer arguments must be of the form:
  session_id: "participant session",
  { settings?: {state: "play"|"pause"} }`),h}return new Promise(function(h,v){d.sendMessageToCallMachine({action:"daily-method-update-remote-media-player",session_id:c,settings:f},function(S){S.error?v({error:S.error,errorMsg:S.errorMsg}):h({session_id:S.session_id,remoteMediaPlayerState:{state:S.state,settings:S.settings}})})})}),function(s){return C.apply(this,arguments)})},{key:"startTranscription",value:function(s){J(this._callState,"startTranscription()"),this.sendMessageToCallMachine(T({action:"daily-method-start-transcription"},s))}},{key:"updateTranscription",value:function(s){if(J(this._callState,"updateTranscription()"),!s)throw new Error("updateTranscription Error: options is mandatory");if(q(s)!=="object")throw new Error("updateTranscription Error: options must be object type");if(s.participants&&!Array.isArray(s.participants))throw new Error("updateTranscription Error: participants must be an array");this.sendMessageToCallMachine(T({action:"daily-method-update-transcription"},s))}},{key:"stopTranscription",value:function(s){if(J(this._callState,"stopTranscription()"),s&&q(s)!=="object")throw new Error("stopTranscription Error: options must be object type");if(s&&!s.instanceId)throw new Error('"instanceId" not provided');this.sendMessageToCallMachine(T({action:"daily-method-stop-transcription"},s))}},{key:"startDialOut",value:(E=P(function*(s){var d=this;J(this._callState,"startDialOut()");var c=function(f){if(f){if(!Array.isArray(f))throw new Error("Error starting dial out: audio codec must be an array");if(f.length<=0)throw new Error("Error starting dial out: audio codec array specified but empty");f.forEach(function(h){if(typeof h!="string")throw new Error("Error starting dial out: audio codec must be a string");if(h!=="OPUS"&&h!=="PCMU"&&h!=="PCMA"&&h!=="G722")throw new Error("Error starting dial out: audio codec must be one of OPUS, PCMU, PCMA, G722")})}};if(!s.sipUri&&!s.phoneNumber)throw new Error("Error starting dial out: either a sip uri or phone number must be provided");if(s.sipUri&&s.phoneNumber)throw new Error("Error starting dial out: only one of sip uri or phone number must be provided");if(s.sipUri){if(typeof s.sipUri!="string")throw new Error("Error starting dial out: sipUri must be a string");if(!s.sipUri.startsWith("sip:"))throw new Error("Error starting dial out: Invalid SIP URI, must start with 'sip:'");if(s.video&&typeof s.video!="boolean")throw new Error("Error starting dial out: video must be a boolean value");(function(f){if(f&&(c(f.audio),f.video)){if(!Array.isArray(f.video))throw new Error("Error starting dial out: video codec must be an array");if(f.video.length<=0)throw new Error("Error starting dial out: video codec array specified but empty");f.video.forEach(function(h){if(typeof h!="string")throw new Error("Error starting dial out: video codec must be a string");if(h!=="H264"&&h!=="VP8")throw new Error("Error starting dial out: video codec must be H264 or VP8")})}})(s.codecs)}if(s.phoneNumber){if(typeof s.phoneNumber!="string")throw new Error("Error starting dial out: phoneNumber must be a string");if(!/^\+\d{1,}$/.test(s.phoneNumber))throw new Error("Error starting dial out: Invalid phone number, must be valid phone number as per E.164");s.codecs&&c(s.codecs.audio)}if(s.callerId){if(typeof s.callerId!="string")throw new Error("Error starting dial out: callerId must be a string");if(s.sipUri)throw new Error("Error starting dial out: callerId not allowed with sipUri")}if(s.displayName){if(typeof s.displayName!="string")throw new Error("Error starting dial out: displayName must be a string");if(s.displayName.length>=200)throw new Error("Error starting dial out: displayName length must be less than 200")}if(s.userId){if(typeof s.userId!="string")throw new Error("Error starting dial out: userId must be a string");if(s.userId.length>36)throw new Error("Error starting dial out: userId length must be less than or equal to 36")}return new Promise(function(f,h){d.sendMessageToCallMachine(T({action:"dialout-start"},s),function(v){v.error?h(v.error):f(v)})})}),function(s){return E.apply(this,arguments)})},{key:"stopDialOut",value:function(s){var d=this;return J(this._callState,"stopDialOut()"),new Promise(function(c,f){d.sendMessageToCallMachine(T({action:"dialout-stop"},s),function(h){h.error?f(h.error):c(h)})})}},{key:"sipCallTransfer",value:(y=P(function*(s){var d=this;if(J(this._callState,"sipCallTransfer()"),!s)throw new Error("sipCallTransfer() requires a sessionId and toEndPoint");return s.useSipRefer=!1,Bo(s,"sipCallTransfer"),new Promise(function(c,f){d.sendMessageToCallMachine(T({action:to},s),function(h){h.error?f(h.error):c(h)})})}),function(s){return y.apply(this,arguments)})},{key:"sipRefer",value:(w=P(function*(s){var d=this;if(J(this._callState,"sipRefer()"),!s)throw new Error("sessionId and toEndPoint are mandatory parameter");return s.useSipRefer=!0,Bo(s,"sipRefer"),new Promise(function(c,f){d.sendMessageToCallMachine(T({action:to},s),function(h){h.error?f(h.error):c(h)})})}),function(s){return w.apply(this,arguments)})},{key:"sendDTMF",value:(b=P(function*(s){var d=this;return J(this._callState,"sendDTMF()"),function(c){var f=c.sessionId,h=c.tones;if(!f||!h)throw new Error("sessionId and tones are mandatory parameter");if(typeof f!="string"||typeof h!="string")throw new Error("sessionId and tones should be of string type");if(h.length>20)throw new Error("tones string must be upto 20 characters");var v=/[^0-9A-D*#]/g,S=h.match(v);if(S&&S[0])throw new Error("".concat(S[0]," is not valid DTMF tone"))}(s),new Promise(function(c,f){d.sendMessageToCallMachine(T({action:"send-dtmf"},s),function(h){h.error?f(h.error):c(h)})})}),function(s){return b.apply(this,arguments)})},{key:"getNetworkStats",value:function(){var s=this;return this._callState!==Fe?{stats:{latest:{}}}:new Promise(function(d){s.sendMessageToCallMachine({action:"get-calc-stats"},function(c){d(T({stats:c.stats},s._network))})})}},{key:"testWebsocketConnectivity",value:(g=P(function*(){var s=this;if(mn(this._testCallInProgress,"testWebsocketConnectivity()"),this.needsLoad())try{yield this.load()}catch(d){return Promise.reject(d)}return new Promise(function(d,c){s.sendMessageToCallMachine({action:"test-websocket-connectivity"},function(f){f.error?c(f.error):d(f.results)})})}),function(){return g.apply(this,arguments)})},{key:"abortTestWebsocketConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-websocket-connectivity"})}},{key:"_validateVideoTrackForNetworkTests",value:function(s){return s?s instanceof MediaStreamTrack?!!Ml(s)||(console.error("Video track is not playable. This test needs a live video track."),!1):(console.error("Video track needs to be of type `MediaStreamTrack`."),!1):(console.error("Missing video track. You must provide a video track in order to run this test."),!1)}},{key:"testCallQuality",value:(m=P(function*(){var s=this;D(),fe(this._callObjectMode,"testCallQuality()"),or(this._callMachineInitialized,"testCallQuality()",null,!0),fn(this._callState,this._isPreparingToJoin,"testCallQuality()");var d=this._testCallAlreadyInProgress,c=function(h){d||(s._testCallInProgress=h)};if(c(!0),this.needsLoad())try{var f=this._callState;yield this.load(),this._callState=f}catch(h){return c(!1),Promise.reject(h)}return new Promise(function(h){s.sendMessageToCallMachine({action:"test-call-quality",dailyJsVersion:s.properties.dailyJsVersion},function(v){var S=v.results,k=S.result,A=wn(S,Al);if(k==="failed"){var $,R=T({},A);($=A.error)!==null&&$!==void 0&&$.details?(A.error.details=JSON.parse(A.error.details),R.error=T(T({},R.error),{},{details:T({},R.error.details)}),R.error.details.duringTest="testCallQuality"):(R.error=R.error?T({},R.error):{},R.error.details={duringTest:"testCallQuality"}),s._maybeSendToSentry(R)}c(!1),h(T({result:k},A))})})}),function(){return m.apply(this,arguments)})},{key:"stopTestCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-call-quality"})}},{key:"testConnectionQuality",value:(p=P(function*(s){var d;N()?(console.warn("testConnectionQuality() is deprecated: use testPeerToPeerCallQuality() instead"),d=yield this.testPeerToPeerCallQuality(s)):(console.warn("testConnectionQuality() is deprecated: use testCallQuality() instead"),d=yield this.testCallQuality());var c={result:d.result,secondsElapsed:d.secondsElapsed};return d.data&&(c.data={maxRTT:d.data.maxRoundTripTime,packetLoss:d.data.avgRecvPacketLoss}),c}),function(s){return p.apply(this,arguments)})},{key:"testPeerToPeerCallQuality",value:(l=P(function*(s){var d=this;if(mn(this._testCallInProgress,"testPeerToPeerCallQuality()"),this.needsLoad())try{yield this.load()}catch(h){return Promise.reject(h)}var c=s.videoTrack,f=s.duration;if(!this._validateVideoTrackForNetworkTests(c))throw new Error("Video track error");return this._sharedTracks.videoTrackForConnectionQualityTest=c,new Promise(function(h,v){d.sendMessageToCallMachine({action:"test-p2p-call-quality",duration:f},function(S){S.error?v(S.error):h(S.results)})})}),function(s){return l.apply(this,arguments)})},{key:"stopTestConnectionQuality",value:function(){N()?(console.warn("stopTestConnectionQuality() is deprecated: use testPeerToPeerCallQuality() and stopTestPeerToPeerCallQuality() instead"),this.stopTestPeerToPeerCallQuality()):(console.warn("stopTestConnectionQuality() is deprecated: use testCallQuality() and stopTestCallQuality() instead"),this.stopTestCallQuality())}},{key:"stopTestPeerToPeerCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-p2p-call-quality"})}},{key:"testNetworkConnectivity",value:(u=P(function*(s){var d=this;if(mn(this._testCallInProgress,"testNetworkConnectivity()"),this.needsLoad())try{yield this.load()}catch(c){return Promise.reject(c)}if(!this._validateVideoTrackForNetworkTests(s))throw new Error("Video track error");return this._sharedTracks.videoTrackForNetworkConnectivityTest=s,new Promise(function(c,f){d.sendMessageToCallMachine({action:"test-network-connectivity"},function(h){h.error?f(h.error):c(h.results)})})}),function(s){return u.apply(this,arguments)})},{key:"abortTestNetworkConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-network-connectivity"})}},{key:"getCpuLoadStats",value:function(){var s=this;return new Promise(function(d){s._callState===Fe?s.sendMessageToCallMachine({action:"get-cpu-load-stats"},function(c){d(c.cpuStats)}):d({cpuLoadState:void 0,cpuLoadStateReason:void 0,stats:{}})})}},{key:"_validateEncodingLayerHasValidProperties",value:function(s){var d;if(!(((d=Object.keys(s))===null||d===void 0?void 0:d.length)>0))throw new Error("Empty encoding is not allowed. At least one of these valid keys should be specified:"+Object.values(pn))}},{key:"_validateVideoSendSettings",value:function(s,d){var c=s==="screenVideo"?["default-screen-video","detail-optimized","motion-optimized","motion-and-detail-balanced"]:["default-video","bandwidth-optimized","bandwidth-and-quality-balanced","quality-optimized","adaptive-2-layers","adaptive-3-layers"],f="Video send settings should be either an object or one of the supported presets: ".concat(c.join());if(typeof d=="string"){if(!c.includes(d))throw new Error(f)}else{if(q(d)!=="object")throw new Error(f);if(!d.maxQuality&&!d.encodings&&d.allowAdaptiveLayers===void 0)throw new Error("Video send settings must contain at least maxQuality, allowAdaptiveLayers or encodings attribute");if(d.maxQuality&&["low","medium","high"].indexOf(d.maxQuality)===-1)throw new Error("maxQuality must be either low, medium or high");if(d.encodings){var h=!1;switch(Object.keys(d.encodings).length){case 1:h=!d.encodings.low;break;case 2:h=!d.encodings.low||!d.encodings.medium;break;case 3:h=!d.encodings.low||!d.encodings.medium||!d.encodings.high;break;default:h=!0}if(h)throw new Error("Encodings must be defined as: low, low and medium, or low, medium and high.");d.encodings.low&&this._validateEncodingLayerHasValidProperties(d.encodings.low),d.encodings.medium&&this._validateEncodingLayerHasValidProperties(d.encodings.medium),d.encodings.high&&this._validateEncodingLayerHasValidProperties(d.encodings.high)}}}},{key:"validateUpdateSendSettings",value:function(s){var d=this;if(!s||Object.keys(s).length===0)throw new Error("Send settings must contain at least information for one track!");Object.entries(s).forEach(function(c){var f=ve(c,2),h=f[0],v=f[1];d._validateVideoSendSettings(h,v)})}},{key:"updateSendSettings",value:function(s){var d=this;return this.validateUpdateSendSettings(s),this.needsLoad()?(this._preloadCache.sendSettings=s,{sendSettings:this._preloadCache.sendSettings}):new Promise(function(c,f){d.sendMessageToCallMachine({action:"update-send-settings",sendSettings:s},function(h){h.error?f(h.error):c(h.sendSettings)})})}},{key:"getSendSettings",value:function(){return this._sendSettings||this._preloadCache.sendSettings}},{key:"getLocalAudioLevel",value:function(){return this._localAudioLevel}},{key:"getRemoteParticipantsAudioLevel",value:function(){return this._remoteParticipantsAudioLevel}},{key:"getActiveSpeaker",value:function(){return D(),this._activeSpeaker}},{key:"setActiveSpeakerMode",value:function(s){return D(),this.sendMessageToCallMachine({action:"set-active-speaker-mode",enabled:s}),this}},{key:"activeSpeakerMode",value:function(){return D(),this._activeSpeakerMode}},{key:"subscribeToTracksAutomatically",value:function(){return this._preloadCache.subscribeToTracksAutomatically}},{key:"setSubscribeToTracksAutomatically",value:function(s){return J(this._callState,"setSubscribeToTracksAutomatically()","Use the subscribeToTracksAutomatically configuration property."),this._preloadCache.subscribeToTracksAutomatically=s,this.sendMessageToCallMachine({action:"daily-method-subscribe-to-tracks-automatically",enabled:s}),this}},{key:"enumerateDevices",value:(a=P(function*(){var s=this;if(this._callObjectMode){var d=yield navigator.mediaDevices.enumerateDevices();return Ke()==="Firefox"&&er().major>115&&er().major<123&&(d=d.filter(function(c){return c.kind!=="audiooutput"})),{devices:d.map(function(c){var f=JSON.parse(JSON.stringify(c));if(!N()&&c.kind==="videoinput"&&c.getCapabilities){var h,v=c.getCapabilities();f.facing=(v==null||(h=v.facingMode)===null||h===void 0?void 0:h.length)>=1?v.facingMode[0]:void 0}return f})}}return new Promise(function(c){s.sendMessageToCallMachine({action:"enumerate-devices"},function(f){c({devices:f.devices})})})}),function(){return a.apply(this,arguments)})},{key:"sendAppMessage",value:function(s){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"*";if(J(this._callState,"sendAppMessage()"),JSON.stringify(s).length>this._maxAppMessageSize)throw new Error("Message data too large. Max size is "+this._maxAppMessageSize);return this.sendMessageToCallMachine({action:"app-msg",data:s,to:d}),this}},{key:"addFakeParticipant",value:function(s){return D(),J(this._callState,"addFakeParticipant()"),this.sendMessageToCallMachine(T({action:"add-fake-participant"},s)),this}},{key:"setShowNamesMode",value:function(s){return ne(this._callObjectMode,"setShowNamesMode()"),D(),s&&s!=="always"&&s!=="never"?(console.error('setShowNamesMode argument should be "always", "never", or false'),this):(this.sendMessageToCallMachine({action:"set-show-names",mode:s}),this)}},{key:"setShowLocalVideo",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return ne(this._callObjectMode,"setShowLocalVideo()"),D(),J(this._callState,"setShowLocalVideo()"),typeof s!="boolean"?(console.error("setShowLocalVideo only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-local-video",show:s}),this._showLocalVideo=s,this)}},{key:"showLocalVideo",value:function(){return ne(this._callObjectMode,"showLocalVideo()"),D(),this._showLocalVideo}},{key:"setShowParticipantsBar",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return ne(this._callObjectMode,"setShowParticipantsBar()"),D(),J(this._callState,"setShowParticipantsBar()"),typeof s!="boolean"?(console.error("setShowParticipantsBar only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-participants-bar",show:s}),this._showParticipantsBar=s,this)}},{key:"showParticipantsBar",value:function(){return ne(this._callObjectMode,"showParticipantsBar()"),D(),this._showParticipantsBar}},{key:"customIntegrations",value:function(){return D(),ne(this._callObjectMode,"customIntegrations()"),this._customIntegrations}},{key:"setCustomIntegrations",value:function(s){return D(),ne(this._callObjectMode,"setCustomIntegrations()"),J(this._callState,"setCustomIntegrations()"),Vo(s)?(this.sendMessageToCallMachine({action:"set-custom-integrations",integrations:s}),this._customIntegrations=s,this):this}},{key:"startCustomIntegrations",value:function(s){var d=this;if(D(),ne(this._callObjectMode,"startCustomIntegrations()"),J(this._callState,"startCustomIntegrations()"),Array.isArray(s)&&s.some(function(h){return typeof h!="string"})||!Array.isArray(s)&&typeof s!="string")return console.error("startCustomIntegrations() only accepts string | string[]"),this;var c=typeof s=="string"?[s]:s,f=c.filter(function(h){return!(h in d._customIntegrations)});return f.length?(console.error(`Can't find custom integration(s): "`.concat(f.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"start-custom-integrations",ids:c}),this)}},{key:"stopCustomIntegrations",value:function(s){var d=this;if(D(),ne(this._callObjectMode,"stopCustomIntegrations()"),J(this._callState,"stopCustomIntegrations()"),Array.isArray(s)&&s.some(function(h){return typeof h!="string"})||!Array.isArray(s)&&typeof s!="string")return console.error("stopCustomIntegrations() only accepts string | string[]"),this;var c=typeof s=="string"?[s]:s,f=c.filter(function(h){return!(h in d._customIntegrations)});return f.length?(console.error(`Can't find custom integration(s): "`.concat(f.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"stop-custom-integrations",ids:c}),this)}},{key:"customTrayButtons",value:function(){return ne(this._callObjectMode,"customTrayButtons()"),D(),this._customTrayButtons}},{key:"updateCustomTrayButtons",value:function(s){return ne(this._callObjectMode,"updateCustomTrayButtons()"),D(),J(this._callState,"updateCustomTrayButtons()"),$o(s)?(this.sendMessageToCallMachine({action:"update-custom-tray-buttons",btns:s}),this._customTrayButtons=s,this):(console.error("updateCustomTrayButtons only accepts a dictionary of the type ".concat(JSON.stringify(nr))),this)}},{key:"theme",value:function(){return ne(this._callObjectMode,"theme()"),this.properties.theme}},{key:"setTheme",value:function(s){var d=this;return ne(this._callObjectMode,"setTheme()"),new Promise(function(c,f){try{d.validateProperties({theme:s}),d.properties.theme=T({},s),d.sendMessageToCallMachine({action:"set-theme",theme:d.properties.theme});try{d.emitDailyJSEvent({action:is,theme:d.properties.theme})}catch(h){console.log("could not emit 'theme-updated'",h)}c(d.properties.theme)}catch(h){f(h)}})}},{key:"requestFullscreen",value:(o=P(function*(){if(D(),this._iframe&&!document.fullscreenElement&&no())try{(yield this._iframe.requestFullscreen)?this._iframe.requestFullscreen():this._iframe.webkitRequestFullscreen()}catch(s){console.log("could not make video call fullscreen",s)}}),function(){return o.apply(this,arguments)})},{key:"exitFullscreen",value:function(){D(),document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen()}},{key:"getSidebarView",value:(i=P(function*(){var s=this;return this._callObjectMode?(console.error("getSidebarView is not available in callObject mode"),Promise.resolve(null)):new Promise(function(d){s.sendMessageToCallMachine({action:"get-sidebar-view"},function(c){d(c.view)})})}),function(){return i.apply(this,arguments)})},{key:"setSidebarView",value:function(s){return this._callObjectMode?(console.error("setSidebarView is not available in callObject mode"),this):(this.sendMessageToCallMachine({action:"set-sidebar-view",view:s}),this)}},{key:"room",value:(n=P(function*(){var s=this,d=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).includeRoomConfigDefaults,c=d===void 0||d;return this._accessState.access===Kt||this.needsLoad()?this.properties.url?{roomUrlPendingJoin:this.properties.url}:null:new Promise(function(f){s.sendMessageToCallMachine({action:"lib-room-info",includeRoomConfigDefaults:c},function(h){delete h.action,delete h.callbackStamp,f(h)})})}),function(){return n.apply(this,arguments)})},{key:"geo",value:(e=P(function*(){try{var s=yield fetch("https://gs.daily.co/_ks_/x-swsl/:");return{current:(yield s.json()).geo}}catch(d){return console.error("geo lookup failed",d),{current:""}}}),function(){return e.apply(this,arguments)})},{key:"setNetworkTopology",value:(t=P(function*(s){var d=this;return D(),J(this._callState,"setNetworkTopology()"),new Promise(function(c,f){d.sendMessageToCallMachine({action:"set-network-topology",opts:s},function(h){h.error?f({error:h.error}):c({workerId:h.workerId})})})}),function(s){return t.apply(this,arguments)})},{key:"getNetworkTopology",value:(r=P(function*(){var s=this;return new Promise(function(d,c){s.needsLoad()&&d({topology:"none"}),s.sendMessageToCallMachine({action:"get-network-topology"},function(f){f.error?c({error:f.error}):d({topology:f.topology})})})}),function(){return r.apply(this,arguments)})},{key:"setPlayNewParticipantSound",value:function(s){if(D(),typeof s!="number"&&s!==!0&&s!==!1)throw new Error("argument to setShouldPlayNewParticipantSound should be true, false, or a number, but is ".concat(s));this.sendMessageToCallMachine({action:"daily-method-set-play-ding",arg:s})}},{key:"on",value:function(s,d){return Me.prototype.on.call(this,s,d)}},{key:"once",value:function(s,d){return Me.prototype.once.call(this,s,d)}},{key:"off",value:function(s,d){return Me.prototype.off.call(this,s,d)}},{key:"validateProperties",value:function(s){var d,c;if(s!=null&&(d=s.dailyConfig)!==null&&d!==void 0&&d.userMediaAudioConstraints){var f,h,v;N()||console.warn("userMediaAudioConstraints is deprecated. You can override constraints with inputSettings.audio.settings, found in DailyCallOptions.");var S=s.inputSettings||{};S.audio=((f=s.inputSettings)===null||f===void 0?void 0:f.audio)||{},S.audio.settings=((h=s.inputSettings)===null||h===void 0||(v=h.audio)===null||v===void 0?void 0:v.settings)||{},S.audio.settings=T(T({},S.audio.settings),s.dailyConfig.userMediaAudioConstraints),s.inputSettings=S,delete s.dailyConfig.userMediaAudioConstraints}if(s!=null&&(c=s.dailyConfig)!==null&&c!==void 0&&c.userMediaVideoConstraints){var k,A,$;N()||console.warn("userMediaVideoConstraints is deprecated. You can override constraints with inputSettings.video.settings, found in DailyCallOptions.");var R=s.inputSettings||{};R.video=((k=s.inputSettings)===null||k===void 0?void 0:k.video)||{},R.video.settings=((A=s.inputSettings)===null||A===void 0||($=A.video)===null||$===void 0?void 0:$.settings)||{},R.video.settings=T(T({},R.video.settings),s.dailyConfig.userMediaVideoConstraints),s.inputSettings=R,delete s.dailyConfig.userMediaVideoConstraints}for(var H in s){if(!Ze[H])throw new Error("unrecognized property '".concat(H,"'"));if(Ze[H].validate&&!Ze[H].validate(s[H],this))throw new Error("property '".concat(H,"': ").concat(Ze[H].help))}}},{key:"assembleMeetingUrl",value:function(){var s,d,c=T(T({},this.properties),{},{emb:this.callClientId,embHref:encodeURIComponent(window.location.href),proxy:(s=this.properties.dailyConfig)!==null&&s!==void 0&&s.proxyUrl?encodeURIComponent((d=this.properties.dailyConfig)===null||d===void 0?void 0:d.proxyUrl):void 0}),f=c.url.match(/\?/)?"&":"?";return c.url+f+Object.keys(Ze).filter(function(h){return Ze[h].queryString&&c[h]!==void 0}).map(function(h){return"".concat(Ze[h].queryString,"=").concat(c[h])}).join("&")}},{key:"needsLoad",value:function(){return[Jr,Hi,qe,Pe].includes(this._callState)}},{key:"sendMessageToCallMachine",value:function(s,d){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");this._messageChannel.sendMessageToCallMachine(s,d,this.callClientId,this._iframe)}},{key:"forwardPackagedMessageToCallMachine",value:function(s){this._messageChannel.forwardPackagedMessageToCallMachine(s,this._iframe,this.callClientId)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(s){return this._messageChannel.addListenerForPackagedMessagesFromCallMachine(s,this.callClientId)}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(s){this._messageChannel.removeListenerForPackagedMessagesFromCallMachine(s)}},{key:"handleMessageFromCallMachine",value:function(s){switch(s.action){case rs:this.sendMessageToCallMachine(T({action:ns},this.properties));break;case"call-machine-initialized":this._callMachineInitialized=!0;var d={action:Xt,level:"log",code:1011,stats:{event:"bundle load",time:this._bundleLoadTime==="no-op"?0:this._bundleLoadTime,preLoaded:this._bundleLoadTime==="no-op",url:Lt(this.properties.dailyConfig)}};this.sendMessageToCallMachine(d),this._delayDuplicateInstanceLog&&this._logDuplicateInstanceAttempt();break;case Yr:this._loadedCallback&&(this._loadedCallback(),this._loadedCallback=null),this.emitDailyJSEvent(s);break;case us:var c,f=T({},s);delete f.internal,this._maxAppMessageSize=((c=s.internal)===null||c===void 0?void 0:c._maxAppMessageSize)||Xr,this._joinedCallback&&(this._joinedCallback(s.participants),this._joinedCallback=null),this.emitDailyJSEvent(f);break;case ps:case hs:if(this._callState===qe)return;if(s.participant&&s.participant.session_id){var h=s.participant.local?"local":s.participant.session_id;if(this._callObjectMode){var v=this._callMachine().store;yo(s.participant,v),_o(s.participant,v),bo(s.participant,this._participants[h],v)}try{this.maybeParticipantTracksStopped(this._participants[h],s.participant),this.maybeParticipantTracksStarted(this._participants[h],s.participant),this.maybeEventRecordingStopped(this._participants[h],s.participant),this.maybeEventRecordingStarted(this._participants[h],s.participant)}catch(bn){console.error("track events error",bn)}this.compareEqualForParticipantUpdateEvent(s.participant,this._participants[h])||(this._participants[h]=T({},s.participant),this.toggleParticipantAudioBasedOnNativeAudioFocus(),this.emitDailyJSEvent(s))}break;case fs:if(s.participant&&s.participant.session_id){var S=this._participants[s.participant.session_id];S&&this.maybeParticipantTracksStopped(S,null),delete this._participants[s.participant.session_id],this.emitDailyJSEvent(s)}break;case ms:ee(this._participantCounts,s.participantCounts)||(this._participantCounts=s.participantCounts,this.emitDailyJSEvent(s));break;case gs:var k={access:s.access};s.awaitingAccess&&(k.awaitingAccess=s.awaitingAccess),ee(this._accessState,k)||(this._accessState=k,this.emitDailyJSEvent(s));break;case vs:if(s.meetingSession){this._meetingSessionSummary=s.meetingSession,this.emitDailyJSEvent(s);var A=T(T({},s),{},{action:"meeting-session-updated"});this.emitDailyJSEvent(A)}break;case Kr:var $;this._iframe&&!s.preserveIframe&&(this._iframe.src=""),this._updateCallState(Pe),this.resetMeetingDependentVars(),this._loadedCallback&&(this._loadedCallback(s.errorMsg),this._loadedCallback=null),s.preserveIframe;var R=wn(s,Ol);R!=null&&($=R.error)!==null&&$!==void 0&&$.details&&(R.error.details=JSON.parse(R.error.details)),this._maybeSendToSentry(s),this._joinedCallback&&(this._joinedCallback(null,R),this._joinedCallback=null),this.emitDailyJSEvent(R);break;case ds:this._callState!==Pe&&this._updateCallState(qe),this.resetMeetingDependentVars(),this._resolveLeave&&(this._resolveLeave(),this._resolveLeave=null),this.emitDailyJSEvent(s);break;case"selected-devices-updated":s.devices&&this.emitDailyJSEvent(s);break;case Vs:var H=s.threshold,Se=s.quality;H===this._network.threshold&&Se===this._network.quality||(this._network.quality=Se,this._network.threshold=H,this.emitDailyJSEvent(s));break;case Bs:s&&s.cpuLoadState&&this.emitDailyJSEvent(s);break;case Js:s&&s.faceCounts!==void 0&&this.emitDailyJSEvent(s);break;case qs:var Ve=s.activeSpeaker;this._activeSpeaker.peerId!==Ve.peerId&&(this._activeSpeaker.peerId=Ve.peerId,this.emitDailyJSEvent({action:s.action,activeSpeaker:this._activeSpeaker}));break;case"show-local-video-changed":if(this._callObjectMode)return;var tt=s.show;this._showLocalVideo=tt,this.emitDailyJSEvent({action:s.action,show:tt});break;case $s:var Tt=s.enabled;this._activeSpeakerMode!==Tt&&(this._activeSpeakerMode=Tt,this.emitDailyJSEvent({action:s.action,enabled:this._activeSpeakerMode}));break;case _s:case bs:case ws:this._waitingParticipants=s.allWaitingParticipants,this.emitDailyJSEvent({action:s.action,participant:s.participant});break;case Qs:ee(this._receiveSettings,s.receiveSettings)||(this._receiveSettings=s.receiveSettings,this.emitDailyJSEvent({action:s.action,receiveSettings:s.receiveSettings}));break;case Hr:this._maybeUpdateInputSettings(s.inputSettings);break;case"send-settings-updated":ee(this._sendSettings,s.sendSettings)||(this._sendSettings=s.sendSettings,this._preloadCache.sendSettings=null,this.emitDailyJSEvent({action:s.action,sendSettings:s.sendSettings}));break;case"local-audio-level":this._localAudioLevel=s.audioLevel,this._preloadCache.localAudioLevelObserver=null,this.emitDailyJSEvent(s);break;case"remote-participants-audio-level":this._remoteParticipantsAudioLevel=s.participantsAudioLevel,this._preloadCache.remoteParticipantsAudioLevelObserver=null,this.emitDailyJSEvent(s);break;case js:var X=s.session_id;this._rmpPlayerState[X]=s.playerState,this.emitDailyJSEvent(s);break;case Ns:delete this._rmpPlayerState[s.session_id],this.emitDailyJSEvent(s);break;case Ds:var Ee=s.session_id,rt=this._rmpPlayerState[Ee];rt&&this.compareEqualForRMPUpdateEvent(rt,s.remoteMediaPlayerState)||(this._rmpPlayerState[Ee]=s.remoteMediaPlayerState,this.emitDailyJSEvent(s));break;case"custom-button-click":case"sidebar-view-changed":this.emitDailyJSEvent(s);break;case ys:var ur=this._meetingSessionState.topology!==(s.meetingSessionState&&s.meetingSessionState.topology);this._meetingSessionState=vn(s.meetingSessionState,this._callObjectMode),(this._callObjectMode||ur)&&this.emitDailyJSEvent(s);break;case Rs:this._isScreenSharing=!0,this.emitDailyJSEvent(s);break;case xs:case Fs:this._isScreenSharing=!1,this.emitDailyJSEvent(s);break;case Wr:case zr:case Ms:case As:case Os:case ks:case Cs:case Ts:case as:case cs:case Ls:case Is:case"test-completed":case Us:case Ps:case Gs:case Ys:case Ws:case zs:case Qr:case Hs:case"dialin-ready":case"dialin-connected":case"dialin-error":case"dialin-stopped":case"dialin-warning":case"dialout-connected":case"dialout-answered":case"dialout-error":case"dialout-stopped":case"dialout-warning":this.emitDailyJSEvent(s);break;case"request-fullscreen":this.requestFullscreen();break;case"request-exit-fullscreen":this.exitFullscreen()}}},{key:"maybeEventRecordingStopped",value:function(s,d){var c="record";s&&(d.local||d[c]!==!1||s[c]===d[c]||this.emitDailyJSEvent({action:zr}))}},{key:"maybeEventRecordingStarted",value:function(s,d){var c="record";s&&(d.local||d[c]!==!0||s[c]===d[c]||this.emitDailyJSEvent({action:Wr}))}},{key:"_trackStatePlayable",value:function(s){return!(!s||s.state!==Ki)}},{key:"_trackChanged",value:function(s,d){return(s==null?void 0:s.id)!==(d==null?void 0:d.id)}},{key:"maybeEventTrackStopped",value:function(s,d,c){var f,h,v=(f=d==null?void 0:d.tracks[s])!==null&&f!==void 0?f:null,S=(h=c==null?void 0:c.tracks[s])!==null&&h!==void 0?h:null,k=v==null?void 0:v.track;if(k){var A=this._trackStatePlayable(v),$=this._trackStatePlayable(S),R=this._trackChanged(k,S==null?void 0:S.track);A&&($&&!R||this.emitDailyJSEvent({action:Es,track:k,participant:c??d,type:s}))}}},{key:"maybeEventTrackStarted",value:function(s,d,c){var f,h,v=(f=d==null?void 0:d.tracks[s])!==null&&f!==void 0?f:null,S=(h=c==null?void 0:c.tracks[s])!==null&&h!==void 0?h:null,k=S==null?void 0:S.track;if(k){var A=this._trackStatePlayable(v),$=this._trackStatePlayable(S),R=this._trackChanged(v==null?void 0:v.track,k);$&&(A&&!R||this.emitDailyJSEvent({action:Ss,track:k,participant:c,type:s}))}}},{key:"maybeParticipantTracksStopped",value:function(s,d){if(s)for(var c in s.tracks)this.maybeEventTrackStopped(c,s,d)}},{key:"maybeParticipantTracksStarted",value:function(s,d){if(d)for(var c in d.tracks)this.maybeEventTrackStarted(c,s,d)}},{key:"compareEqualForRMPUpdateEvent",value:function(s,d){var c,f;return s.state===d.state&&((c=s.settings)===null||c===void 0?void 0:c.volume)===((f=d.settings)===null||f===void 0?void 0:f.volume)}},{key:"emitDailyJSEvent",value:function(s){try{s.callClientId=this.callClientId,this.emit(s.action,s)}catch(d){console.log("could not emit",s,d)}}},{key:"compareEqualForParticipantUpdateEvent",value:function(s,d){return!!ee(s,d)&&(!s.videoTrack||!d.videoTrack||s.videoTrack.id===d.videoTrack.id&&s.videoTrack.muted===d.videoTrack.muted&&s.videoTrack.enabled===d.videoTrack.enabled)&&(!s.audioTrack||!d.audioTrack||s.audioTrack.id===d.audioTrack.id&&s.audioTrack.muted===d.audioTrack.muted&&s.audioTrack.enabled===d.audioTrack.enabled)}},{key:"nativeUtils",value:function(){return N()?typeof DailyNativeUtils>"u"?(console.warn("in React Native, DailyNativeUtils is expected to be available"),null):DailyNativeUtils:null}},{key:"updateIsPreparingToJoin",value:function(s){this._updateCallState(this._callState,s)}},{key:"_updateCallState",value:function(s){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._isPreparingToJoin;if(s!==this._callState||d!==this._isPreparingToJoin){var c=this._callState,f=this._isPreparingToJoin;this._callState=s,this._isPreparingToJoin=d;var h=this._callState===Fe;this.updateShowAndroidOngoingMeetingNotification(h);var v=sr(c,f),S=sr(this._callState,this._isPreparingToJoin);v!==S&&(this.updateKeepDeviceAwake(S),this.updateDeviceAudioMode(S),this.updateNoOpRecordingEnsuringBackgroundContinuity(S))}}},{key:"resetMeetingDependentVars",value:function(){this._participants={},this._participantCounts=Oo,this._waitingParticipants={},this._activeSpeaker={},this._activeSpeakerMode=!1,this._didPreAuth=!1,this._accessState={access:Kt},this._finalSummaryOfPrevSession=this._meetingSessionSummary,this._meetingSessionSummary={},this._meetingSessionState=vn(Ao,this._callObjectMode),this._isScreenSharing=!1,this._receiveSettings={},this._inputSettings=void 0,this._sendSettings={},this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this._maxAppMessageSize=Xr,this._callMachineInitialized=!1,this._bundleLoadTime=void 0,this._preloadCache}},{key:"updateKeepDeviceAwake",value:function(s){N()&&this.nativeUtils().setKeepDeviceAwake(s,this.callClientId)}},{key:"updateDeviceAudioMode",value:function(s){if(N()&&!this.disableReactNativeAutoDeviceManagement("audio")){var d=s?this._nativeInCallAudioMode:"idle";this.nativeUtils().setAudioMode(d)}}},{key:"updateShowAndroidOngoingMeetingNotification",value:function(s){if(N()&&this.nativeUtils().setShowOngoingMeetingNotification){var d,c,f,h;if(this.properties.reactNativeConfig&&this.properties.reactNativeConfig.androidInCallNotification){var v=this.properties.reactNativeConfig.androidInCallNotification;d=v.title,c=v.subtitle,f=v.iconName,h=v.disableForCustomOverride}h&&(s=!1),this.nativeUtils().setShowOngoingMeetingNotification(s,d,c,f,this.callClientId)}}},{key:"updateNoOpRecordingEnsuringBackgroundContinuity",value:function(s){N()&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity(s)}},{key:"toggleParticipantAudioBasedOnNativeAudioFocus",value:function(){var s,d;if(N()){var c=(s=this._callMachine())===null||s===void 0||(d=s.store)===null||d===void 0?void 0:d.getState();for(var f in c==null?void 0:c.streams){var h=c.streams[f];h&&h.pendingTrack&&h.pendingTrack.kind==="audio"&&(h.pendingTrack.enabled=this._hasNativeAudioFocus)}}}},{key:"disableReactNativeAutoDeviceManagement",value:function(s){return this.properties.reactNativeConfig&&this.properties.reactNativeConfig.disableAutoDeviceManagement&&this.properties.reactNativeConfig.disableAutoDeviceManagement[s]}},{key:"absoluteUrl",value:function(s){if(s!==void 0){var d=document.createElement("a");return d.href=s,d.href}}},{key:"sayHello",value:function(){var s="hello, world.";return console.log(s),s}},{key:"_logUseAfterDestroy",value:function(){var s=Object.values(Xe)[0];if(this.needsLoad())if(s&&!s.needsLoad()){var d={action:Xt,level:"error",code:this.strictMode?9995:9997};s.sendMessageToCallMachine(d)}else this.strictMode||console.error("You are are attempting to use a call instance that was previously destroyed, which is unsupported. Please remove `strictMode: false` from your constructor properties to enable strict mode to track down and fix this unsupported usage.");else{var c={action:Xt,level:"error",code:this.strictMode?9995:9997};this._messageChannel.sendMessageToCallMachine(c,null,this.callClientId,this._iframe)}}},{key:"_logDuplicateInstanceAttempt",value:function(){for(var s=0,d=Object.values(Xe);s<d.length;s++){var c=d[s];c._callMachineInitialized?(c.sendMessageToCallMachine({action:Xt,level:"warn",code:this.allowMultipleCallInstances?9993:9992}),c._delayDuplicateInstanceLog=!1):c._delayDuplicateInstanceLog=!0}}},{key:"_maybeSendToSentry",value:function(s){var d,c,f,h,v,S;if(!((d=s.error)!==null&&d!==void 0&&d.type&&(![ts,es,Gr].includes(s.error.type)||s.error.type===Gr&&s.error.msg.includes("deleted")))){var k=(c=this.properties)!==null&&c!==void 0&&c.url?new URL(this.properties.url):void 0,A="production";k&&k.host.includes(".staging.daily")&&(A="staging");var $,R,H,Se,Ve,tt=[oc(),ic(),Tc(),kc(),Pc(),Ic(),ac(),Lc()].filter(function(au){return!["BrowserApiErrors","Breadcrumbs","GlobalHandlers"].includes(au.name)}),Tt=new pc({dsn:"https://f10f1c81e5d44a4098416c0867a8b740@o77906.ingest.sentry.io/168844",transport:vc,stackParser:Ec,integrations:tt,environment:A}),X=new xe;if(X.setClient(Tt),Tt.init(),this.session_id&&X.setExtra("sessionId",this.session_id),this.properties){var Ee=T({},this.properties);Ee.userName=Ee.userName?"[Filtered]":void 0,Ee.userData=Ee.userData?"[Filtered]":void 0,Ee.token=Ee.token?"[Filtered]":void 0,X.setExtra("properties",Ee)}if(k){var rt=k.searchParams.get("domain");if(!rt){var ur=k.host.match(/(.*?)\./);rt=ur&&ur[1]||""}rt&&X.setTag("domain",rt)}s.error&&(X.setTag("fatalErrorType",s.error.type),X.setExtra("errorDetails",s.error.details),!(($=s.error.details)===null||$===void 0)&&$.uri&&X.setTag("serverAddress",s.error.details.uri),!((R=s.error.details)===null||R===void 0)&&R.workerGroup&&X.setTag("workerGroup",s.error.details.workerGroup),!((H=s.error.details)===null||H===void 0)&&H.geoGroup&&X.setTag("geoGroup",s.error.details.geoGroup),!((Se=s.error.details)===null||Se===void 0)&&Se.on&&X.setTag("connectionAttempt",s.error.details.on),(Ve=s.error.details)!==null&&Ve!==void 0&&Ve.bundleUrl&&(X.setTag("bundleUrl",s.error.details.bundleUrl),X.setTag("bundleError",s.error.details.sourceError.type))),X.setTags({callMode:this._callObjectMode?N()?"reactNative":(f=this.properties)!==null&&f!==void 0&&(h=f.dailyConfig)!==null&&h!==void 0&&(v=h.callMode)!==null&&v!==void 0&&v.includes("prebuilt")?this.properties.dailyConfig.callMode:"custom":"prebuilt-frame",version:ge.version()});var bn=((S=s.error)===null||S===void 0?void 0:S.msg)||s.errorMsg;X.captureException(new Error(bn))}}},{key:"_callMachine",value:function(){var s,d,c;return(s=window._daily)===null||s===void 0||(d=s.instances)===null||d===void 0||(c=d[this.callClientId])===null||c===void 0?void 0:c.callMachine}},{key:"_maybeUpdateInputSettings",value:function(s){if(!ee(this._inputSettings,s)){var d=this._getInputSettings();this._inputSettings=s;var c=this._getInputSettings();ee(d,c)||this.emitDailyJSEvent({action:Hr,inputSettings:c})}}}],[{key:"supportedBrowser",value:function(){if(N())return{supported:!0,mobile:!0,name:"React Native",version:null,supportsScreenShare:!0,supportsSfu:!0,supportsVideoProcessing:!1,supportsAudioProcessing:!1};var s=Ea.getParser(se());return{supported:!!oo(),mobile:s.getPlatformType()==="mobile",name:s.getBrowserName(),version:s.getBrowserVersion(),supportsFullscreen:!!no(),supportsScreenShare:!!sl(),supportsSfu:!!oo(),supportsVideoProcessing:io(),supportsAudioProcessing:so()}}},{key:"version",value:function(){return"0.75.2"}},{key:"createCallObject",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return s.layout="none",new ge(null,s)}},{key:"wrap",value:function(s){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(D(),!s||!s.contentWindow||typeof s.src!="string")throw new Error("DailyIframe::Wrap needs an iframe-like first argument");return d.layout||(d.customLayout?d.layout="custom-v1":d.layout="browser"),new ge(s,d)}},{key:"createFrame",value:function(s,d){var c,f;D(),s&&d?(c=s,f=d):s&&s.append?(c=s,f={}):(c=document.body,f=s||{});var h=f.iframeStyle;h||(h=c===document.body?{position:"fixed",border:"1px solid black",backgroundColor:"white",width:"375px",height:"450px",right:"1em",bottom:"1em"}:{border:0,width:"100%",height:"100%"});var v=document.createElement("iframe");window.navigator&&window.navigator.userAgent.match(/Chrome\/61\./)?v.allow="microphone, camera":v.allow="microphone; camera; autoplay; display-capture; screen-wake-lock",v.style.visibility="hidden",c.appendChild(v),v.style.visibility=null,Object.keys(h).forEach(function(S){return v.style[S]=h[S]}),f.layout||(f.customLayout?f.layout="custom-v1":f.layout="browser");try{return new ge(v,f)}catch(S){throw c.removeChild(v),S}}},{key:"createTransparentFrame",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};D();var d=document.createElement("iframe");return d.allow="microphone; camera; autoplay",d.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
      pointer-events: none;
    `,document.body.appendChild(d),s.layout||(s.layout="custom-v1"),ge.wrap(d,s)}},{key:"getCallInstance",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;return s?Xe[s]:Object.values(Xe)[0]}}]),ge}();function dt(r,t){var e={};for(var n in r)if(r[n]instanceof MediaStreamTrack)console.warn("MediaStreamTrack found in props or cache.",n),e[n]=Le;else if(n==="dailyConfig"){if(r[n].modifyLocalSdpHook){var i=window._daily.instances[t].customCallbacks||{};i.modifyLocalSdpHook=r[n].modifyLocalSdpHook,window._daily.instances[t].customCallbacks=i,delete r[n].modifyLocalSdpHook}if(r[n].modifyRemoteSdpHook){var o=window._daily.instances[t].customCallbacks||{};o.modifyRemoteSdpHook=r[n].modifyRemoteSdpHook,window._daily.instances[t].customCallbacks=o,delete r[n].modifyRemoteSdpHook}e[n]=r[n]}else e[n]=r[n];return e}function J(r){var t=arguments.length>2?arguments[2]:void 0;if(r!==Fe){var e="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," only supported after join.");throw t&&(e+=" ".concat(t)),console.error(e),new Error(e)}}function sr(r,t){return[Qt,Fe].includes(r)||t}function fn(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"This daily-js method",n=arguments.length>3?arguments[3]:void 0;if(sr(r,t)){var i="".concat(e," not supported after joining a meeting.");throw n&&(i+=" ".concat(n)),console.error(i),new Error(i)}}function or(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method",e=arguments.length>2?arguments[2]:void 0;if(!r){var n="".concat(t,arguments.length>3&&arguments[3]!==void 0&&arguments[3]?" requires preAuth() or startCamera() to initialize call state.":" requires preAuth(), startCamera(), or join() to initialize call state.");throw e&&(n+=" ".concat(e)),console.error(n),new Error(n)}}function mn(r){if(r){var t="A pre-call quality test is in progress. Please try ".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," again once testing has completed. Use stopTestCallQuality() to end it early.");throw console.error(t),new Error(t)}}function fe(r){if(!r){var t="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported on custom callObject instances");throw console.error(t),new Error(t)}}function ne(r){if(r){var t="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported as part of Daily's Prebuilt");throw console.error(t),new Error(t)}}function D(){if(N())throw new Error("This daily-js method is not currently supported in React Native")}function kt(){if(!N())throw new Error("This daily-js method is only supported in React Native")}function jo(r){if(r===void 0)return!0;var t;if(typeof r=="string")t=r;else try{t=JSON.stringify(r),ee(JSON.parse(t),r)||console.warn("The userData provided will be modified when serialized.")}catch(e){throw Error("userData must be serializable to JSON: ".concat(e))}if(t.length>4096)throw Error("userData is too large (".concat(t.length," characters). Maximum size suppported is ").concat(4096,"."));return!0}function Do(r,t){for(var e=t.allowAllParticipantsKey,n=function(g){var b=["local"];return e||b.push("*"),g&&!b.includes(g)},i=function(g){return!!(g.layer===void 0||Number.isInteger(g.layer)&&g.layer>=0||g.layer==="inherit")},o=function(g){return!!g&&!(g.video&&!i(g.video))&&!(g.screenVideo&&!i(g.screenVideo))},a=0,u=Object.entries(r);a<u.length;a++){var l=ve(u[a],2),p=l[0],m=l[1];if(!n(p)||!o(m))return!1}return!0}function No(r){if(q(r)!=="object")return!1;for(var t=0,e=Object.entries(r);t<e.length;t++){var n=ve(e[t],2),i=n[0],o=n[1];switch(i){case"video":if(q(o)!=="object")return!1;for(var a=0,u=Object.entries(o);a<u.length;a++){var l=ve(u[a],2),p=l[0],m=l[1];switch(p){case"processor":if(!Dl(m))return!1;break;case"settings":if(!xo(m))return!1;break;default:return!1}}break;case"audio":if(q(o)!=="object")return!1;for(var g=0,b=Object.entries(o);g<b.length;g++){var w=ve(b[g],2),y=w[0],E=w[1];switch(y){case"processor":if(!jl(E))return!1;break;case"settings":if(!xo(E))return!1;break;default:return!1}}break;default:return!1}}return!0}function Ro(r,t,e){var n,i=[];r.video&&r.video.processor&&(io((n=t==null?void 0:t.useLegacyVideoProcessor)!==null&&n!==void 0&&n)||(r.video.settings?delete r.video.processor:delete r.video,i.push("video"))),r.audio&&r.audio.processor&&(so()||(r.audio.settings?delete r.audio.processor:delete r.audio,i.push("audio"))),i.length>0&&console.error("Ignoring settings for browser- or platform-unsupported input processor(s): ".concat(i.join(", "))),r.audio&&r.audio.settings&&(r.audio.settings.customTrack?(e.audioTrack=r.audio.settings.customTrack,r.audio.settings={customTrack:Le}):delete e.audioTrack),r.video&&r.video.settings&&(r.video.settings.customTrack?(e.videoTrack=r.video.settings.customTrack,r.video.settings={customTrack:Le}):delete e.videoTrack)}function jl(r){if(N())return console.warn("Video processing is not yet supported in React Native"),!1;var t=["type"];return!!r&&q(r)==="object"&&(Object.keys(r).filter(function(e){return!t.includes(e)}).forEach(function(e){console.warn("invalid key inputSettings -> audio -> processor : ".concat(e)),delete r[e]}),!!function(e){return typeof e!="string"?!1:Object.values(eo).includes(e)?!0:(console.error("inputSettings audio processor type invalid"),!1)}(r.type))}function Dl(r){if(N())return console.warn("Video processing is not yet supported in React Native"),!1;var t=["type","config"];return!r||q(r)!=="object"||!function(e){return typeof e!="string"?!1:Object.values(Zt).includes(e)?!0:(console.error("inputSettings video processor type invalid"),!1)}(r.type)||r.config&&(q(r.config)!=="object"||!function(e,n){var i=Object.keys(n);if(i.length===0)return!0;var o="invalid object in inputSettings -> video -> processor -> config";switch(e){case Zt.BGBLUR:return i.length>1||i[0]!=="strength"?(console.error(o),!1):!(typeof n.strength!="number"||n.strength<=0||n.strength>1||isNaN(n.strength))||(console.error("".concat(o,"; expected: {0 < strength <= 1}, got: ").concat(n.strength)),!1);case Zt.BGIMAGE:return!(n.source!==void 0&&!function(a){if(a.source==="default")return a.type="default",!0;if(a.source instanceof ArrayBuffer)return!0;if(It(a.source))return a.type="url",!!function(p){var m=new URL(p),g=m.pathname;if(m.protocol==="data:")try{var b=g.substring(g.indexOf(":")+1,g.indexOf(";")).split("/")[1];return tn.includes(b)}catch(y){return console.error("failed to deduce blob content type",y),!1}var w=g.split(".").at(-1).toLowerCase().trim();return tn.includes(w)}(a.source)||(console.error("invalid image type; supported types: [".concat(tn.join(", "),"]")),!1);return u=a.source,l=Number(u),isNaN(l)||!Number.isInteger(l)||l<=0||l>10?(console.error("invalid image selection; must be an int, > 0, <= ".concat(10)),!1):(a.type="daily-preselect",!0);var u,l}(n));default:return!0}}(r.type,r.config))?!1:(Object.keys(r).filter(function(e){return!t.includes(e)}).forEach(function(e){console.warn("invalid key inputSettings -> video -> processor : ".concat(e)),delete r[e]}),!0)}function xo(r){return q(r)==="object"&&(!r.customTrack||r.customTrack instanceof MediaStreamTrack)}function gn(){var r=Object.values(Zt).join(" | "),t=Object.values(eo).join(" | ");return"inputSettings must be of the form: { video?: { processor?: { type: [ ".concat(r," ], config?: {} } }, audio?: { processor: {type: [ ").concat(t," ] } } }")}function Fo(r){var t=r.allowAllParticipantsKey;return"receiveSettings must be of the form { [<remote participant id> | ".concat(Zi).concat(t?' | "'.concat("*",'"'):"","]: ")+'{ [video: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]], [screenVideo: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]] }}}'}function qo(){return"customIntegrations should be an object of type ".concat(JSON.stringify(hn),".")}function $o(r){if(r&&q(r)!=="object"||Array.isArray(r))return console.error("customTrayButtons should be an Object of the type ".concat(JSON.stringify(nr),".")),!1;if(r)for(var t=0,e=Object.entries(r);t<e.length;t++)for(var n=ve(e[t],1)[0],i=0,o=Object.entries(r[n]);i<o.length;i++){var a=ve(o[i],2),u=a[0],l=a[1],p=nr.id[u];if(!p)return console.error("customTrayButton does not support key ".concat(u)),!1;switch(u){case"iconPath":case"iconPathDarkMode":if(!It(l))return console.error("customTrayButton ".concat(u," should be a url.")),!1;break;case"visualState":if(!["default","sidebar-open","active"].includes(l))return console.error("customTrayButton ".concat(u," should be ").concat(p,". Got: ").concat(l)),!1;break;default:if(q(l)!==p)return console.error("customTrayButton ".concat(u," should be a ").concat(p,".")),!1}}return!0}function Vo(r){if(!r||r&&q(r)!=="object"||Array.isArray(r))return console.error(qo()),!1;for(var t=function(g){return"".concat(g," should be ").concat(hn.id[g])},e=function(g,b){return console.error("customIntegration ".concat(g,": ").concat(b))},n=0,i=Object.entries(r);n<i.length;n++){var o=ve(i[n],1)[0];if(!("label"in r[o]))return e(o,"label is required"),!1;if(!("location"in r[o]))return e(o,"location is required"),!1;if(!("src"in r[o])&&!("srcdoc"in r[o]))return e(o,"src or srcdoc is required"),!1;for(var a=0,u=Object.entries(r[o]);a<u.length;a++){var l=ve(u[a],2),p=l[0],m=l[1];switch(p){case"allow":case"csp":case"name":case"referrerPolicy":case"sandbox":if(typeof m!="string")return e(o,t(p)),!1;break;case"iconURL":if(!It(m))return e(o,"".concat(p," should be a url")),!1;break;case"src":if("srcdoc"in r[o])return e(o,"cannot have both src and srcdoc"),!1;if(!It(m))return e(o,'src "'.concat(m,'" is not a valid URL')),!1;break;case"srcdoc":if("src"in r[o])return e(o,"cannot have both src and srcdoc"),!1;if(typeof m!="string")return e(o,t(p)),!1;break;case"location":if(!["main","sidebar"].includes(m))return e(o,t(p)),!1;break;case"controlledBy":if(m!=="*"&&m!=="owners"&&(!Array.isArray(m)||m.some(function(g){return typeof g!="string"})))return e(o,t(p)),!1;break;case"shared":if((!Array.isArray(m)||m.some(function(g){return typeof g!="string"}))&&m!=="owners"&&typeof m!="boolean")return e(o,t(p)),!1;break;default:if(!hn.id[p])return console.error("customIntegration does not support key ".concat(p)),!1}}}return!0}function Uo(r,t){if(t===void 0)return!1;switch(q(t)){case"string":return q(r)===t;case"object":if(q(r)!=="object")return!1;for(var e in r)if(!Uo(r[e],t[e]))return!1;return!0;default:return!1}}function Bo(r,t){var e=r.sessionId,n=r.toEndPoint,i=r.useSipRefer;if(!e||!n)throw new Error("".concat(t,"() requires a sessionId and toEndPoint"));if(typeof e!="string"||typeof n!="string")throw new Error("Invalid paramater: sessionId and toEndPoint must be of type string");if(i&&!n.startsWith("sip:"))throw new Error('"toEndPoint" must be a "sip" address');if(!n.startsWith("sip:")&&!n.startsWith("+"))throw new Error("toEndPoint: ".concat(n,' must starts with either "sip:" or "+"'))}function Jo(r){if(q(r)!=="object")throw new Error('RemoteMediaPlayerSettings: must be "object" type');if(r.state&&!Object.values(en).includes(r.state))throw new Error("Invalid value for RemoteMediaPlayerSettings.state, valid values are: "+JSON.stringify(en));if(r.volume){if(typeof r.volume!="number")throw new Error('RemoteMediaPlayerSettings.volume: must be "number" type');if(r.volume<0||r.volume>2)throw new Error("RemoteMediaPlayerSettings.volume: must be between 0.0 - 2.0")}}function Go(r,t,e){return!(typeof r!="number"||r<t||r>e)}function vn(r,t){return r&&!t&&delete r.data,r}const Nl=ke(Object.freeze(Object.defineProperty({__proto__:null,DAILY_ACCESS_LEVEL_FULL:Xi,DAILY_ACCESS_LEVEL_LOBBY:Fc,DAILY_ACCESS_LEVEL_NONE:qc,DAILY_ACCESS_UNKNOWN:Kt,DAILY_CAMERA_ERROR_CAM_AND_MIC_IN_USE:Qc,DAILY_CAMERA_ERROR_CAM_IN_USE:zc,DAILY_CAMERA_ERROR_CONSTRAINTS:el,DAILY_CAMERA_ERROR_MIC_IN_USE:Hc,DAILY_CAMERA_ERROR_NOT_FOUND:Zc,DAILY_CAMERA_ERROR_PERMISSIONS:Kc,DAILY_CAMERA_ERROR_UNDEF_MEDIADEVICES:Xc,DAILY_CAMERA_ERROR_UNKNOWN:tl,DAILY_EVENT_ACCESS_STATE_UPDATED:gs,DAILY_EVENT_ACTIVE_SPEAKER_CHANGE:qs,DAILY_EVENT_ACTIVE_SPEAKER_MODE_CHANGE:$s,DAILY_EVENT_APP_MSG:Ls,DAILY_EVENT_CAMERA_ERROR:cs,DAILY_EVENT_CPU_LOAD_CHANGE:Bs,DAILY_EVENT_ERROR:Kr,DAILY_EVENT_EXIT_FULLSCREEN:St,DAILY_EVENT_FACE_COUNTS_UPDATED:Js,DAILY_EVENT_FULLSCREEN:wt,DAILY_EVENT_IFRAME_LAUNCH_CONFIG:ns,DAILY_EVENT_IFRAME_READY_FOR_LAUNCH_CONFIG:rs,DAILY_EVENT_INPUT_SETTINGS_UPDATED:Hr,DAILY_EVENT_JOINED_MEETING:us,DAILY_EVENT_JOINING_MEETING:ls,DAILY_EVENT_LANG_UPDATED:Hs,DAILY_EVENT_LEFT_MEETING:ds,DAILY_EVENT_LIVE_STREAMING_ERROR:zs,DAILY_EVENT_LIVE_STREAMING_STARTED:Gs,DAILY_EVENT_LIVE_STREAMING_STOPPED:Ws,DAILY_EVENT_LIVE_STREAMING_UPDATED:Ys,DAILY_EVENT_LOADED:Yr,DAILY_EVENT_LOADING:ss,DAILY_EVENT_LOAD_ATTEMPT_FAILED:os,DAILY_EVENT_LOCAL_SCREEN_SHARE_CANCELED:Fs,DAILY_EVENT_LOCAL_SCREEN_SHARE_STARTED:Rs,DAILY_EVENT_LOCAL_SCREEN_SHARE_STOPPED:xs,DAILY_EVENT_MEETING_SESSION_DATA_ERROR:rl,DAILY_EVENT_MEETING_SESSION_STATE_UPDATED:ys,DAILY_EVENT_MEETING_SESSION_SUMMARY_UPDATED:vs,DAILY_EVENT_NETWORK_CONNECTION:Us,DAILY_EVENT_NETWORK_QUALITY_CHANGE:Vs,DAILY_EVENT_NONFATAL_ERROR:Qr,DAILY_EVENT_PARTICIPANT_COUNTS_UPDATED:ms,DAILY_EVENT_PARTICIPANT_JOINED:ps,DAILY_EVENT_PARTICIPANT_LEFT:fs,DAILY_EVENT_PARTICIPANT_UPDATED:hs,DAILY_EVENT_RECEIVE_SETTINGS_UPDATED:Qs,DAILY_EVENT_RECORDING_DATA:Ps,DAILY_EVENT_RECORDING_ERROR:As,DAILY_EVENT_RECORDING_STARTED:Wr,DAILY_EVENT_RECORDING_STATS:Ms,DAILY_EVENT_RECORDING_STOPPED:zr,DAILY_EVENT_RECORDING_UPLOAD_COMPLETED:Os,DAILY_EVENT_REMOTE_MEDIA_PLAYER_STARTED:js,DAILY_EVENT_REMOTE_MEDIA_PLAYER_STOPPED:Ns,DAILY_EVENT_REMOTE_MEDIA_PLAYER_UPDATED:Ds,DAILY_EVENT_STARTED_CAMERA:as,DAILY_EVENT_THEME_UPDATED:is,DAILY_EVENT_TRACK_STARTED:Ss,DAILY_EVENT_TRACK_STOPPED:Es,DAILY_EVENT_TRANSCRIPTION_ERROR:Ts,DAILY_EVENT_TRANSCRIPTION_MSG:Is,DAILY_EVENT_TRANSCRIPTION_STARTED:ks,DAILY_EVENT_TRANSCRIPTION_STOPPED:Cs,DAILY_EVENT_WAITING_PARTICIPANT_ADDED:_s,DAILY_EVENT_WAITING_PARTICIPANT_REMOVED:ws,DAILY_EVENT_WAITING_PARTICIPANT_UPDATED:bs,DAILY_FATAL_ERROR_CONNECTION:ts,DAILY_FATAL_ERROR_EJECTED:Vc,DAILY_FATAL_ERROR_EOL:es,DAILY_FATAL_ERROR_EXP_ROOM:Jc,DAILY_FATAL_ERROR_EXP_TOKEN:Gc,DAILY_FATAL_ERROR_MEETING_FULL:Yc,DAILY_FATAL_ERROR_NBF_ROOM:Uc,DAILY_FATAL_ERROR_NBF_TOKEN:Bc,DAILY_FATAL_ERROR_NOT_ALLOWED:Wc,DAILY_FATAL_ERROR_NO_ROOM:Gr,DAILY_RECEIVE_SETTINGS_ALL_PARTICIPANTS_KEY:$c,DAILY_RECEIVE_SETTINGS_BASE_KEY:Zi,DAILY_STATE_ERROR:Pe,DAILY_STATE_JOINED:Fe,DAILY_STATE_JOINING:Qt,DAILY_STATE_LEFT:qe,DAILY_STATE_NEW:Jr,DAILY_TRACK_STATE_BLOCKED:jc,DAILY_TRACK_STATE_INTERRUPTED:xc,DAILY_TRACK_STATE_LOADING:Rc,DAILY_TRACK_STATE_OFF:Dc,DAILY_TRACK_STATE_PLAYABLE:Ki,DAILY_TRACK_STATE_SENDABLE:Nc,default:Il},Symbol.toStringTag,{value:"Module"})));var yn={exports:{}},pt=typeof Reflect=="object"?Reflect:null,Yo=pt&&typeof pt.apply=="function"?pt.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)},ar;pt&&typeof pt.ownKeys=="function"?ar=pt.ownKeys:Object.getOwnPropertySymbols?ar=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:ar=function(t){return Object.getOwnPropertyNames(t)};function Rl(r){console&&console.warn&&console.warn(r)}var Wo=Number.isNaN||function(t){return t!==t};function U(){U.init.call(this)}yn.exports=U,yn.exports.once=$l,U.EventEmitter=U,U.prototype._events=void 0,U.prototype._eventsCount=0,U.prototype._maxListeners=void 0;var zo=10;function cr(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(U,"defaultMaxListeners",{enumerable:!0,get:function(){return zo},set:function(r){if(typeof r!="number"||r<0||Wo(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");zo=r}}),U.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},U.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Wo(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Ho(r){return r._maxListeners===void 0?U.defaultMaxListeners:r._maxListeners}U.prototype.getMaxListeners=function(){return Ho(this)},U.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i=t==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var u=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw u.context=a,u}var l=o[t];if(l===void 0)return!1;if(typeof l=="function")Yo(l,this,e);else for(var p=l.length,m=ea(l,p),n=0;n<p;++n)Yo(m[n],this,e);return!0};function Qo(r,t,e,n){var i,o,a;if(cr(e),o=r._events,o===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",t,e.listener?e.listener:e),o=r._events),a=o[t]),a===void 0)a=o[t]=e,++r._eventsCount;else if(typeof a=="function"?a=o[t]=n?[e,a]:[a,e]:n?a.unshift(e):a.push(e),i=Ho(r),i>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=r,u.type=t,u.count=a.length,Rl(u)}return r}U.prototype.addListener=function(t,e){return Qo(this,t,e,!1)},U.prototype.on=U.prototype.addListener,U.prototype.prependListener=function(t,e){return Qo(this,t,e,!0)};function xl(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ko(r,t,e){var n={fired:!1,wrapFn:void 0,target:r,type:t,listener:e},i=xl.bind(n);return i.listener=e,n.wrapFn=i,i}U.prototype.once=function(t,e){return cr(e),this.on(t,Ko(this,t,e)),this},U.prototype.prependOnceListener=function(t,e){return cr(e),this.prependListener(t,Ko(this,t,e)),this},U.prototype.removeListener=function(t,e){var n,i,o,a,u;if(cr(e),i=this._events,i===void 0)return this;if(n=i[t],n===void 0)return this;if(n===e||n.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===e||n[a].listener===e){u=n[a].listener,o=a;break}if(o<0)return this;o===0?n.shift():Fl(n,o),n.length===1&&(i[t]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",t,u||e)}return this},U.prototype.off=U.prototype.removeListener,U.prototype.removeAllListeners=function(t){var e,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var o=Object.keys(n),a;for(i=0;i<o.length;++i)a=o[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=n[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this};function Xo(r,t,e){var n=r._events;if(n===void 0)return[];var i=n[t];return i===void 0?[]:typeof i=="function"?e?[i.listener||i]:[i]:e?ql(i):ea(i,i.length)}U.prototype.listeners=function(t){return Xo(this,t,!0)},U.prototype.rawListeners=function(t){return Xo(this,t,!1)},U.listenerCount=function(r,t){return typeof r.listenerCount=="function"?r.listenerCount(t):Zo.call(r,t)},U.prototype.listenerCount=Zo;function Zo(r){var t=this._events;if(t!==void 0){var e=t[r];if(typeof e=="function")return 1;if(e!==void 0)return e.length}return 0}U.prototype.eventNames=function(){return this._eventsCount>0?ar(this._events):[]};function ea(r,t){for(var e=new Array(t),n=0;n<t;++n)e[n]=r[n];return e}function Fl(r,t){for(;t+1<r.length;t++)r[t]=r[t+1];r.pop()}function ql(r){for(var t=new Array(r.length),e=0;e<t.length;++e)t[e]=r[e].listener||r[e];return t}function $l(r,t){return new Promise(function(e,n){function i(a){r.removeListener(t,o),n(a)}function o(){typeof r.removeListener=="function"&&r.removeListener("error",i),e([].slice.call(arguments))}ta(r,t,o,{once:!0}),t!=="error"&&Vl(r,i,{once:!0})})}function Vl(r,t,e){typeof r.on=="function"&&ta(r,"error",t,e)}function ta(r,t,e,n){if(typeof r.on=="function")n.once?r.once(t,e):r.on(t,e);else if(typeof r.addEventListener=="function")r.addEventListener(t,function i(o){n.once&&r.removeEventListener(t,i),e(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var Ul=yn.exports,lr={},$e={};Object.defineProperty($e,"__esModule",{value:!0}),$e.Api=$e.HttpClient=$e.ContentType=void 0;var M;(function(r){r.Json="application/json",r.FormData="multipart/form-data",r.UrlEncoded="application/x-www-form-urlencoded",r.Text="text/plain"})(M||($e.ContentType=M={}));class ra{constructor(t={}){I(this,"baseUrl","https://api.vapi.ai");I(this,"securityData",null);I(this,"securityWorker");I(this,"abortControllers",new Map);I(this,"customFetch",(...t)=>fetch(...t));I(this,"baseApiParams",{credentials:"same-origin",headers:{},redirect:"follow",referrerPolicy:"no-referrer"});I(this,"setSecurityData",t=>{this.securityData=t});I(this,"contentFormatters",{[M.Json]:t=>t!==null&&(typeof t=="object"||typeof t=="string")?JSON.stringify(t):t,[M.Text]:t=>t!==null&&typeof t!="string"?JSON.stringify(t):t,[M.FormData]:t=>Object.keys(t||{}).reduce((e,n)=>{const i=t[n];return e.append(n,i instanceof Blob?i:typeof i=="object"&&i!==null?JSON.stringify(i):`${i}`),e},new FormData),[M.UrlEncoded]:t=>this.toQueryString(t)});I(this,"createAbortSignal",t=>{if(this.abortControllers.has(t)){const n=this.abortControllers.get(t);return n?n.signal:void 0}const e=new AbortController;return this.abortControllers.set(t,e),e.signal});I(this,"abortRequest",t=>{const e=this.abortControllers.get(t);e&&(e.abort(),this.abortControllers.delete(t))});I(this,"request",async({body:t,secure:e,path:n,type:i,query:o,format:a,baseUrl:u,cancelToken:l,...p})=>{const m=(typeof e=="boolean"?e:this.baseApiParams.secure)&&this.securityWorker&&await this.securityWorker(this.securityData)||{},g=this.mergeRequestParams(p,m),b=o&&this.toQueryString(o),w=this.contentFormatters[i||M.Json],y=a||g.format;return this.customFetch(`${u||this.baseUrl||""}${n}${b?`?${b}`:""}`,{...g,headers:{...g.headers||{},...i&&i!==M.FormData?{"Content-Type":i}:{}},signal:(l?this.createAbortSignal(l):g.signal)||null,body:typeof t>"u"||t===null?null:w(t)}).then(async E=>{const C=E;C.data=null,C.error=null;const O=y?await E[y]().then(j=>(C.ok?C.data=j:C.error=j,C)).catch(j=>(C.error=j,C)):C;if(l&&this.abortControllers.delete(l),!E.ok)throw O;return O})});Object.assign(this,t)}encodeQueryParam(t,e){return`${encodeURIComponent(t)}=${encodeURIComponent(typeof e=="number"?e:`${e}`)}`}addQueryParam(t,e){return this.encodeQueryParam(e,t[e])}addArrayQueryParam(t,e){return t[e].map(i=>this.encodeQueryParam(e,i)).join("&")}toQueryString(t){const e=t||{};return Object.keys(e).filter(i=>typeof e[i]<"u").map(i=>Array.isArray(e[i])?this.addArrayQueryParam(e,i):this.addQueryParam(e,i)).join("&")}addQueryParams(t){const e=this.toQueryString(t);return e?`?${e}`:""}mergeRequestParams(t,e){return{...this.baseApiParams,...t,...e||{},headers:{...this.baseApiParams.headers||{},...t.headers||{},...e&&e.headers||{}}}}}$e.HttpClient=ra;class Bl extends ra{constructor(){super(...arguments);I(this,"call",{callControllerCreate:(e,n={})=>this.request({path:"/call",method:"POST",body:e,secure:!0,type:M.Json,format:"json",...n}),callControllerFindAll:(e,n={})=>this.request({path:"/call",method:"GET",query:e,secure:!0,format:"json",...n}),callControllerFindOne:(e,n={})=>this.request({path:`/call/${e}`,method:"GET",secure:!0,format:"json",...n}),callControllerUpdate:(e,n,i={})=>this.request({path:`/call/${e}`,method:"PATCH",body:n,secure:!0,type:M.Json,format:"json",...i}),callControllerDeleteCallData:(e,n={})=>this.request({path:`/call/${e}`,method:"DELETE",secure:!0,format:"json",...n}),callControllerCreatePhoneCall:(e,n={})=>this.request({path:"/call/phone",method:"POST",body:e,secure:!0,type:M.Json,format:"json",...n}),callControllerCreateWebCall:(e,n={})=>this.request({path:"/call/web",method:"POST",body:e,secure:!0,type:M.Json,format:"json",...n})});I(this,"v2",{callControllerFindAllPaginated:(e,n={})=>this.request({path:"/v2/call",method:"GET",query:e,secure:!0,format:"json",...n}),callControllerFindAllMetadataPaginated:(e,n={})=>this.request({path:"/v2/call/metadata",method:"GET",query:e,secure:!0,format:"json",...n}),assistantControllerFindAllPaginated:(e,n={})=>this.request({path:"/v2/assistant",method:"GET",query:e,secure:!0,format:"json",...n}),phoneNumberControllerFindAllPaginated:(e,n={})=>this.request({path:"/v2/phone-number",method:"GET",query:e,secure:!0,format:"json",...n})});I(this,"chat",{chatController:(e={})=>this.request({path:"/chat",method:"POST",secure:!0,format:"json",...e}),chatControllerChatCompletions:(e,n={})=>this.request({path:"/chat/completions",method:"POST",body:e,secure:!0,type:M.Json,format:"json",...n})});I(this,"assistant",{assistantControllerCreate:(e,n={})=>this.request({path:"/assistant",method:"POST",body:e,secure:!0,type:M.Json,format:"json",...n}),assistantControllerFindAll:(e,n={})=>this.request({path:"/assistant",method:"GET",query:e,secure:!0,format:"json",...n}),assistantControllerFindOne:(e,n={})=>this.request({path:`/assistant/${e}`,method:"GET",secure:!0,format:"json",...n}),assistantControllerUpdate:(e,n,i={})=>this.request({path:`/assistant/${e}`,method:"PATCH",body:n,secure:!0,type:M.Json,format:"json",...i}),assistantControllerReplace:(e,n,i={})=>this.request({path:`/assistant/${e}`,method:"PUT",body:n,secure:!0,type:M.Json,format:"json",...i}),assistantControllerRemove:(e,n={})=>this.request({path:`/assistant/${e}`,method:"DELETE",secure:!0,format:"json",...n})});I(this,"phoneNumber",{phoneNumberControllerImportTwilio:(e,n={})=>this.request({path:"/phone-number/import/twilio",method:"POST",body:e,secure:!0,type:M.Json,format:"json",...n}),phoneNumberControllerImportVonage:(e,n={})=>this.request({path:"/phone-number/import/vonage",method:"POST",body:e,secure:!0,type:M.Json,format:"json",...n}),phoneNumberControllerCreate:(e,n={})=>this.request({path:"/phone-number",method:"POST",body:e,secure:!0,type:M.Json,format:"json",...n}),phoneNumberControllerFindAll:(e,n={})=>this.request({path:"/phone-number",method:"GET",query:e,secure:!0,format:"json",...n}),phoneNumberControllerFindOne:(e,n={})=>this.request({path:`/phone-number/${e}`,method:"GET",secure:!0,format:"json",...n}),phoneNumberControllerUpdate:(e,n,i={})=>this.request({path:`/phone-number/${e}`,method:"PATCH",body:n,secure:!0,type:M.Json,format:"json",...i}),phoneNumberControllerRemove:(e,n={})=>this.request({path:`/phone-number/${e}`,method:"DELETE",secure:!0,format:"json",...n})});I(this,"tool",{toolControllerCreate:(e,n={})=>this.request({path:"/tool",method:"POST",body:e,secure:!0,type:M.Json,format:"json",...n}),toolControllerFindAll:(e,n={})=>this.request({path:"/tool",method:"GET",query:e,secure:!0,format:"json",...n}),toolControllerFindOne:(e,n={})=>this.request({path:`/tool/${e}`,method:"GET",secure:!0,format:"json",...n}),toolControllerUpdate:(e,n,i={})=>this.request({path:`/tool/${e}`,method:"PATCH",body:n,secure:!0,type:M.Json,format:"json",...i}),toolControllerRemove:(e,n={})=>this.request({path:`/tool/${e}`,method:"DELETE",secure:!0,format:"json",...n})});I(this,"file",{fileControllerCreateDeprecated:(e,n={})=>this.request({path:"/file/upload",method:"POST",body:e,secure:!0,type:M.FormData,format:"json",...n}),fileControllerCreate:(e,n={})=>this.request({path:"/file",method:"POST",body:e,secure:!0,type:M.FormData,format:"json",...n}),fileControllerFindAll:(e={})=>this.request({path:"/file",method:"GET",secure:!0,format:"json",...e}),fileControllerFindOne:(e,n={})=>this.request({path:`/file/${e}`,method:"GET",secure:!0,format:"json",...n}),fileControllerUpdate:(e,n,i={})=>this.request({path:`/file/${e}`,method:"PATCH",body:n,secure:!0,type:M.Json,format:"json",...i}),fileControllerRemove:(e,n={})=>this.request({path:`/file/${e}`,method:"DELETE",secure:!0,format:"json",...n})});I(this,"knowledgeBase",{knowledgeBaseControllerCreate:(e,n={})=>this.request({path:"/knowledge-base",method:"POST",body:e,secure:!0,type:M.Json,format:"json",...n}),knowledgeBaseControllerFindAll:(e,n={})=>this.request({path:"/knowledge-base",method:"GET",query:e,secure:!0,format:"json",...n}),knowledgeBaseControllerFindOne:(e,n={})=>this.request({path:`/knowledge-base/${e}`,method:"GET",secure:!0,format:"json",...n}),knowledgeBaseControllerUpdate:(e,n,i={})=>this.request({path:`/knowledge-base/${e}`,method:"PATCH",body:n,secure:!0,type:M.Json,format:"json",...i}),knowledgeBaseControllerRemove:(e,n={})=>this.request({path:`/knowledge-base/${e}`,method:"DELETE",secure:!0,format:"json",...n})});I(this,"workflow",{workflowControllerFindAll:(e={})=>this.request({path:"/workflow",method:"GET",secure:!0,format:"json",...e}),workflowControllerCreate:(e,n={})=>this.request({path:"/workflow",method:"POST",body:e,secure:!0,type:M.Json,format:"json",...n}),workflowControllerFindOne:(e,n={})=>this.request({path:`/workflow/${e}`,method:"GET",secure:!0,format:"json",...n}),workflowControllerDelete:(e,n={})=>this.request({path:`/workflow/${e}`,method:"DELETE",secure:!0,format:"json",...n}),workflowControllerUpdate:(e,n,i={})=>this.request({path:`/workflow/${e}`,method:"PATCH",body:n,secure:!0,type:M.Json,format:"json",...i})});I(this,"squad",{squadControllerCreate:(e,n={})=>this.request({path:"/squad",method:"POST",body:e,secure:!0,type:M.Json,format:"json",...n}),squadControllerFindAll:(e,n={})=>this.request({path:"/squad",method:"GET",query:e,secure:!0,format:"json",...n}),squadControllerFindOne:(e,n={})=>this.request({path:`/squad/${e}`,method:"GET",secure:!0,format:"json",...n}),squadControllerUpdate:(e,n,i={})=>this.request({path:`/squad/${e}`,method:"PATCH",body:n,secure:!0,type:M.Json,format:"json",...i}),squadControllerRemove:(e,n={})=>this.request({path:`/squad/${e}`,method:"DELETE",secure:!0,format:"json",...n})});I(this,"testSuite",{testSuiteControllerFindAllPaginated:(e,n={})=>this.request({path:"/test-suite",method:"GET",query:e,secure:!0,format:"json",...n}),testSuiteControllerCreate:(e,n={})=>this.request({path:"/test-suite",method:"POST",body:e,secure:!0,type:M.Json,format:"json",...n}),testSuiteControllerFindOne:(e,n={})=>this.request({path:`/test-suite/${e}`,method:"GET",secure:!0,format:"json",...n}),testSuiteControllerUpdate:(e,n,i={})=>this.request({path:`/test-suite/${e}`,method:"PATCH",body:n,secure:!0,type:M.Json,format:"json",...i}),testSuiteControllerRemove:(e,n={})=>this.request({path:`/test-suite/${e}`,method:"DELETE",secure:!0,format:"json",...n}),testSuiteTestControllerFindAllPaginated:(e,n,i={})=>this.request({path:`/test-suite/${e}/test`,method:"GET",query:n,secure:!0,format:"json",...i}),testSuiteTestControllerCreate:(e,n,i={})=>this.request({path:`/test-suite/${e}/test`,method:"POST",body:n,secure:!0,type:M.Json,format:"json",...i}),testSuiteTestControllerFindOne:(e,n,i={})=>this.request({path:`/test-suite/${e}/test/${n}`,method:"GET",secure:!0,format:"json",...i}),testSuiteTestControllerUpdate:(e,n,i,o={})=>this.request({path:`/test-suite/${e}/test/${n}`,method:"PATCH",body:i,secure:!0,type:M.Json,format:"json",...o}),testSuiteTestControllerRemove:(e,n,i={})=>this.request({path:`/test-suite/${e}/test/${n}`,method:"DELETE",secure:!0,format:"json",...i}),testSuiteRunControllerFindAllPaginated:(e,n,i={})=>this.request({path:`/test-suite/${e}/run`,method:"GET",query:n,secure:!0,format:"json",...i}),testSuiteRunControllerCreate:(e,n,i={})=>this.request({path:`/test-suite/${e}/run`,method:"POST",body:n,secure:!0,type:M.Json,format:"json",...i}),testSuiteRunControllerFindOne:(e,n,i={})=>this.request({path:`/test-suite/${e}/run/${n}`,method:"GET",secure:!0,format:"json",...i}),testSuiteRunControllerUpdate:(e,n,i,o={})=>this.request({path:`/test-suite/${e}/run/${n}`,method:"PATCH",body:i,secure:!0,type:M.Json,format:"json",...o}),testSuiteRunControllerRemove:(e,n,i={})=>this.request({path:`/test-suite/${e}/run/${n}`,method:"DELETE",secure:!0,format:"json",...i})});I(this,"metrics",{analyticsControllerFindAllDeprecated:(e,n={})=>this.request({path:"/metrics",method:"GET",query:e,secure:!0,format:"json",...n})});I(this,"analytics",{analyticsControllerQuery:(e,n={})=>this.request({path:"/analytics",method:"POST",body:e,secure:!0,type:M.Json,format:"json",...n})});I(this,"log",{loggingControllerCallLogsQuery:(e,n={})=>this.request({path:"/log",method:"GET",query:e,secure:!0,format:"json",...n}),loggingControllerCallLogsDeleteQuery:(e,n={})=>this.request({path:"/log",method:"DELETE",query:e,secure:!0,...n})});I(this,"logs",{loggingControllerLogsQuery:(e,n={})=>this.request({path:"/logs",method:"GET",query:e,secure:!0,format:"json",...n}),loggingControllerLogsDeleteQuery:(e,n={})=>this.request({path:"/logs",method:"DELETE",query:e,secure:!0,...n})});I(this,"org",{orgControllerCreate:(e,n={})=>this.request({path:"/org",method:"POST",body:e,secure:!0,type:M.Json,format:"json",...n}),orgControllerFindAll:(e={})=>this.request({path:"/org",method:"GET",secure:!0,format:"json",...e}),orgControllerFindOne:(e,n={})=>this.request({path:`/org/${e}`,method:"GET",secure:!0,format:"json",...n}),orgControllerUpdate:(e,n,i={})=>this.request({path:`/org/${e}`,method:"PATCH",body:n,secure:!0,type:M.Json,format:"json",...i}),orgControllerDeleteOrg:(e,n={})=>this.request({path:`/org/${e}`,method:"DELETE",secure:!0,...n}),orgControllerFindAllUsers:(e,n={})=>this.request({path:`/org/${e}/user`,method:"GET",secure:!0,format:"json",...n}),orgControllerOrgLeave:(e,n={})=>this.request({path:`/org/${e}/leave`,method:"DELETE",secure:!0,...n}),orgControllerOrgRemoveUser:(e,n,i={})=>this.request({path:`/org/${e}/member/${n}/leave`,method:"DELETE",secure:!0,...i}),orgControllerUsersInvite:(e,n,i={})=>this.request({path:`/org/${e}/invite`,method:"POST",body:n,secure:!0,type:M.Json,...i}),orgControllerUserUpdate:(e,n,i={})=>this.request({path:`/org/${e}/role`,method:"PATCH",body:n,secure:!0,type:M.Json,...i})});I(this,"token",{tokenControllerCreate:(e,n={})=>this.request({path:"/token",method:"POST",body:e,secure:!0,type:M.Json,format:"json",...n}),tokenControllerFindAll:(e,n={})=>this.request({path:"/token",method:"GET",query:e,secure:!0,format:"json",...n}),tokenControllerFindOne:(e,n={})=>this.request({path:`/token/${e}`,method:"GET",secure:!0,format:"json",...n}),tokenControllerUpdate:(e,n,i={})=>this.request({path:`/token/${e}`,method:"PATCH",body:n,secure:!0,type:M.Json,format:"json",...i}),tokenControllerRemove:(e,n={})=>this.request({path:`/token/${e}`,method:"DELETE",secure:!0,format:"json",...n})});I(this,"credential",{credentialControllerCreate:(e,n={})=>this.request({path:"/credential",method:"POST",body:e,secure:!0,type:M.Json,format:"json",...n}),credentialControllerFindAll:(e,n={})=>this.request({path:"/credential",method:"GET",query:e,secure:!0,format:"json",...n}),credentialControllerFindOne:(e,n={})=>this.request({path:`/credential/${e}`,method:"GET",secure:!0,format:"json",...n}),credentialControllerUpdate:(e,n,i={})=>this.request({path:`/credential/${e}`,method:"PATCH",body:n,secure:!0,type:M.Json,format:"json",...i}),credentialControllerRemove:(e,n={})=>this.request({path:`/credential/${e}`,method:"DELETE",secure:!0,format:"json",...n})});I(this,"template",{templateControllerCreate:(e,n={})=>this.request({path:"/template",method:"POST",body:e,secure:!0,type:M.Json,format:"json",...n}),templateControllerFindAll:(e,n={})=>this.request({path:"/template",method:"GET",query:e,secure:!0,format:"json",...n}),templateControllerFindAllPinned:(e={})=>this.request({path:"/template/pinned",method:"GET",secure:!0,format:"json",...e}),templateControllerFindOne:(e,n={})=>this.request({path:`/template/${e}`,method:"GET",secure:!0,format:"json",...n}),templateControllerUpdate:(e,n,i={})=>this.request({path:`/template/${e}`,method:"PATCH",body:n,secure:!0,type:M.Json,format:"json",...i}),templateControllerRemove:(e,n={})=>this.request({path:`/template/${e}`,method:"DELETE",secure:!0,format:"json",...n})});I(this,"voiceLibrary",{voiceLibraryControllerVoiceGetByProvider:(e,n,i={})=>this.request({path:`/voice-library/${e}`,method:"GET",query:n,secure:!0,format:"json",...i}),voiceLibraryControllerVoiceGetAccentsByProvider:(e,n={})=>this.request({path:`/voice-library/${e}/accents`,method:"GET",secure:!0,format:"json",...n}),voiceLibraryControllerVoiceLibrarySyncByProvider:(e,n={})=>this.request({path:`/voice-library/sync/${e}`,method:"POST",secure:!0,format:"json",...n}),voiceLibraryControllerVoiceLibrarySyncDefaultVoices:(e,n={})=>this.request({path:"/voice-library/sync",method:"POST",body:e,secure:!0,type:M.Json,format:"json",...n})});I(this,"provider",{providerControllerGetWorkflows:(e,n,i={})=>this.request({path:`/${e}/workflows`,method:"GET",query:n,secure:!0,format:"json",...i}),providerControllerGetWorkflowTriggerHook:(e,n,i={})=>this.request({path:`/${e}/workflows/${n}/hooks`,method:"GET",secure:!0,format:"json",...i}),providerControllerGetLocations:(e,n={})=>this.request({path:`/${e}/locations`,method:"GET",secure:!0,format:"json",...n}),voiceProviderControllerSearchVoices:(e,n,i={})=>this.request({path:`/${e}/voices/search`,method:"GET",query:n,secure:!0,format:"json",...i}),voiceProviderControllerSearchVoice:(e,n,i={})=>this.request({path:`/${e}/voice/search`,method:"GET",query:n,secure:!0,format:"json",...i}),voiceProviderControllerAddVoices:(e,n,i={})=>this.request({path:`/${e}/voices/add`,method:"POST",body:n,secure:!0,type:M.Json,format:"json",...i}),voiceProviderControllerAddVoice:(e,n,i={})=>this.request({path:`/${e}/voice/add`,method:"POST",body:n,secure:!0,type:M.Json,format:"json",...i})});I(this,"v11Labs",{voiceProviderControllerCloneVoices:(e,n={})=>this.request({path:"/11labs/voice/clone",method:"POST",body:e,secure:!0,type:M.FormData,...n})})}}$e.Api=Bl,Object.defineProperty(lr,"__esModule",{value:!0}),lr.client=void 0;const Jl=$e,Gl=new Jl.Api({baseUrl:"https://api.vapi.ai",baseApiParams:{secure:!0},securityWorker:async r=>{if(r)return{headers:{Authorization:`Bearer ${r}`}}}});lr.client=Gl;var na=ae&&ae.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ue,"__esModule",{value:!0});const Yl=na(Nl),Wl=na(Ul),_n=lr;async function zl(r,t){r.muted=!1,r.autoplay=!0,t!=null&&(r.srcObject=new MediaStream([t]),await r.play())}async function Hl(r,t){const e=document.createElement("audio");return e.dataset.participantId=t,document.body.appendChild(e),await zl(e,r),e}function Ql(r){const t=document.querySelector(`audio[data-participant-id="${r}"]`);t==null||t.remove()}function Kl(r,t,e,n){r.participant.local||t.updateParticipant(r.participant.session_id,{setSubscribedTracks:{audio:!0,video:e||n}})}class Xl extends Wl.default{on(t,e){return super.on(t,e),this}once(t,e){return super.once(t,e),this}emit(t,...e){return super.emit(t,...e)}removeListener(t,e){return super.removeListener(t,e),this}removeAllListeners(t){return super.removeAllListeners(t),this}}class Zl extends Xl{constructor(e,n,i,o){super();I(this,"started",!1);I(this,"call",null);I(this,"speakingTimeout",null);I(this,"dailyCallConfig",{});I(this,"dailyCallObject",{});I(this,"hasEmittedCallEndedStatus",!1);_n.client.baseUrl=n??"https://api.vapi.ai",_n.client.setSecurityData(e),this.dailyCallConfig=i??{},this.dailyCallObject=o??{}}cleanup(){var e;this.started=!1,this.hasEmittedCallEndedStatus=!1,(e=this.call)==null||e.destroy(),this.call=null,this.speakingTimeout=null}isMobileDevice(){if(typeof navigator>"u")return!1;const e=navigator.userAgent;return/android|iphone|ipad|ipod|iemobile|blackberry|bada/i.test(e.toLowerCase())}async sleep(e){return new Promise(n=>setTimeout(n,e))}async start(e,n,i){var o,a,u;if(!e&&!i)throw new Error("Assistant or Squad must be provided.");if(this.started)return null;this.started=!0;try{const l=(await _n.client.call.callControllerCreateWebCall({assistant:typeof e=="string"?void 0:e,assistantId:typeof e=="string"?e:void 0,assistantOverrides:n,squad:typeof i=="string"?void 0:i,squadId:typeof i=="string"?i:void 0})).data;this.call&&this.cleanup();const p=((o=l==null?void 0:l.artifactPlan)==null?void 0:o.videoRecordingEnabled)??!1,m=((a=l.transport)==null?void 0:a.assistantVideoEnabled)??!1;if(this.call=Yl.default.createCallObject({audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??p,dailyConfig:this.dailyCallConfig}),(u=this.call.iframe())==null||u.style.setProperty("display","none"),this.call.on("left-meeting",()=>{var g;this.emit("call-end"),this.hasEmittedCallEndedStatus||(this.emit("message",{type:"status-update",status:"ended",endedReason:"customer-ended-call"}),this.hasEmittedCallEndedStatus=!0),p&&((g=this.call)==null||g.stopRecording()),this.cleanup()}),this.call.on("error",g=>{var b;this.emit("error",g),p&&((b=this.call)==null||b.stopRecording())}),this.call.on("camera-error",g=>{this.emit("error",g)}),this.call.on("track-started",async g=>{var b,w,y;!g||!g.participant||(b=g.participant)!=null&&b.local||((w=g.participant)==null?void 0:w.user_name)==="Vapi Speaker"&&(g.track.kind==="video"&&this.emit("video",g.track),g.track.kind==="audio"&&await Hl(g.track,g.participant.session_id),(y=this.call)==null||y.sendAppMessage("playable"))}),this.call.on("participant-joined",g=>{!g||!this.call||Kl(g,this.call,p,m)}),this.call.on("participant-updated",g=>{g&&this.emit("daily-participant-updated",g.participant)}),this.call.on("participant-left",g=>{g&&Ql(g.participant.session_id)}),this.isMobileDevice()&&await this.sleep(1e3),await this.call.join({url:l.webCallUrl,subscribeToTracksAutomatically:!1}),p){const g=new Date().getTime();this.call.startRecording({width:1280,height:720,backgroundColor:"#FF1F2D3D",layout:{preset:"default"}}),this.call.on("recording-started",()=>{this.send({type:"control",control:"say-first-message",videoRecordingStartDelaySeconds:(new Date().getTime()-g)/1e3})})}return this.call.startRemoteParticipantsAudioLevelObserver(100),this.call.on("remote-participants-audio-level",g=>{g&&this.handleRemoteParticipantsAudioLevel(g)}),this.call.on("app-message",g=>this.onAppMessage(g)),this.call.on("nonfatal-error",g=>{var b;(g==null?void 0:g.type)==="audio-processor-error"&&((b=this.call)==null||b.updateInputSettings({audio:{processor:{type:"none"}}}).then(()=>{var w;(w=this.call)==null||w.setLocalAudio(!0)}))}),this.call.updateInputSettings({audio:{processor:{type:"noise-cancellation"}}}),l}catch(l){return console.error(l),this.emit("error",l),this.cleanup(),null}}onAppMessage(e){if(e)try{if(e.data==="listening")return this.emit("call-start");try{const n=JSON.parse(e.data);this.emit("message",n),n&&"type"in n&&"status"in n&&n.type==="status-update"&&n.status==="ended"&&(this.hasEmittedCallEndedStatus=!0)}catch(n){console.log("Error parsing message data: ",n)}}catch(n){console.error(n)}}handleRemoteParticipantsAudioLevel(e){const n=Object.values(e.participantsAudioLevel).reduce((o,a)=>o+a,0);this.emit("volume-level",Math.min(1,n/.15)),n>.01&&(this.speakingTimeout?(clearTimeout(this.speakingTimeout),this.speakingTimeout=null):this.emit("speech-start"),this.speakingTimeout=setTimeout(()=>{this.emit("speech-end"),this.speakingTimeout=null},1e3))}stop(){var e;this.started=!1,(e=this.call)==null||e.destroy(),this.call=null}send(e){var n;(n=this.call)==null||n.sendAppMessage(JSON.stringify(e))}setMuted(e){if(!this.call)throw new Error("Call object is not available.");this.call.setLocalAudio(!e)}isMuted(){return this.call?this.call.localAudio()===!1:!1}say(e,n){this.send({type:"say",message:e,endCallAfterSpoken:n})}setInputDevicesAsync(e){var n;(n=this.call)==null||n.setInputDevicesAsync(e)}async increaseMicLevel(e){if(!this.call)throw new Error("Call object is not available.");try{const n=await navigator.mediaDevices.getUserMedia({audio:!0}),i=new AudioContext,o=i.createMediaStreamSource(n),a=i.createGain();a.gain.value=e,o.connect(a);const u=i.createMediaStreamDestination();a.connect(u);const[l]=u.stream.getAudioTracks();await this.call.setInputDevicesAsync({audioSource:l})}catch(n){console.error("Error adjusting microphone level:",n)}}setOutputDeviceAsync(e){var n;(n=this.call)==null||n.setOutputDeviceAsync(e)}getDailyCallObject(){return this.call}startScreenSharing(e,n){var i;(i=this.call)==null||i.startScreenShare({displayMediaOptions:e,screenVideoSendSettings:n})}stopScreenSharing(){var e;(e=this.call)==null||e.stopScreenShare()}}var eu=Ue.default=Zl;const tu=({idle:r,loading:t,active:e,width:n,height:i,position:o,offset:a})=>{const u=parseInt(n)/2,l=parseInt(i)/2,p={"bottom-right":`bottom: ${a}; right: ${a};`,"bottom-left":`bottom: ${a}; left: ${a};`,"top-right":`top: ${a}; right: ${a};`,"top-left":`top: ${a}; left: ${a};`,bottom:`bottom: ${a}; left: 50%; margin-left: -${u}px;`,right:`top: 50%; right: ${a}; margin-top: -${l}px;`,left:`top: 50%; left: ${a}; margin-top: -${l}px;`,top:`top: ${a}; left: 50%; margin-left: -${u}px;`},m=document.createElement("style");m.innerText=`
    @keyframes bounce {
      30% {
        transform: translateY(0%);
      }
      40% {
        transform: translateY(-5%);
      }
      50% {
        transform: translateY(-10%);
      }
      60% {
        transform: translateY(-5%);
      }
      70% {
        transform: translateY(0%);
      }
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .vapi-btn {
      border-radius: 50%;
      min-width: ${n};
      height: ${i};
      color: white;
      border: none;
      cursor: pointer;
      transition: all 0.3s ease-in-out;
      display: flex;
      text-align: left;
      align-items: center;
      position: absolute;
      padding: 0;
      animation: bounce 2s ease-in-out infinite;
      ${p[o]}
    }
    .vapi-btn-round {
      justify-content: center;
    }
    .vapi-btn-pill {
      border-radius: 8px;
      color: black;
      background: white;
      justify-content: flex-start;
      padding: 0px 10px;
    }
    .vapi-btn:hover {
      animation: none;
      transform: translateY(-5px);
    }
    #vapi-icon-container {
      padding: 5px;
      margin: 5px;
      border-radius: 5px;
    }

    #vapi-title-container {
      padding: 5px 10px;
    }
    #vapi-title {
      font-size: 1.1em;
    }
    #vapi-subtitle {
      font-size: 0.9em;
    }

    .vapi-btn-is-loading > #vapi-icon-container > img {
      animation: spin 1s linear infinite;
    }

    .vapi-btn-is-active {
      background: ${e.color};
      box-shadow: 1px 1px 80px 20px ${e.color};
    }
    .vapi-btn-pill.vapi-btn-is-active {
      background: white;
    }
    .vapi-btn-pill.vapi-btn-is-active > #vapi-icon-container {
      background: ${e.color};
    }


    .vapi-btn-is-idle {
      background: ${r.color};
      box-shadow: 1px 1px 10px ${r.color};
    }
    .vapi-btn-pill.vapi-btn-is-idle {
      background: white;
    }
    .vapi-btn-pill.vapi-btn-is-idle > #vapi-icon-container {
      background: ${r.color};
    }

    .vapi-btn-is-loading {
      background: ${t.color};
      box-shadow: 1px 1px 80px 20px ${t.color};
    }
    .vapi-btn-pill.vapi-btn-is-loading {
      background: white;
    }
    .vapi-btn-pill.vapi-btn-is-loading > #vapi-icon-container {
      background: ${t.color};
    }
    .vapi-btn-is-speaking {
      // Add speaking styles if different from active/loading/idle
    }
    @font-face {
      font-family: 'LucideIcons';
      src: url(https://unpkg.com/lucide-static@latest/font/Lucide.ttf) format('truetype');
    }
  `;for(let g=0;g<=10;g++)m.innerText+=`
      .vapi-btn-volume-${g} {
        box-shadow: 1px 1px ${5+g*2}px ${g*2}px ${e.color}, inset 0px 0px 10px 0px rgba(0,0,0,0.1);
      }
    `;document.head.appendChild(m)},ru=({position:r="bottom",offset:t="40px",width:e="50px",height:n="50px",idle:i,loading:o,active:a},u="vapi-support-btn")=>{tu({idle:i,loading:o,active:a,width:e,height:n,position:r,offset:t});const l=document.createElement("button");return l.id=u,l.className="vapi-btn vapi-btn-round vapi-btn-is-idle",l.onclick=()=>{},l},ia="https://unpkg.com/lucide-static@0.321.0/icons/phone.svg",nu=r=>(t,e)=>{const n=r[e];if(n){if(t.className=`vapi-btn vapi-btn-is-${e} ${n.type==="pill"?"vapi-btn-pill":n.type==="round"?"vapi-btn-round":""}`,t.innerHTML="",t.title=n.title??"",n.type==="pill"){const i=document.createElement("div");i.id="vapi-icon-container";const o=document.createElement("img");o.src=n.icon||ia,o.alt="Icon",i.appendChild(o);const a=document.createElement("div");a.id="vapi-title-container";const u=document.createElement("div");u.id="vapi-title",u.textContent=n.title;const l=document.createElement("div");l.id="vapi-subtitle",l.textContent=n.subtitle,a.appendChild(u),a.appendChild(l),t.appendChild(i),t.appendChild(a)}else if(n.type==="round"){const i=document.createElement("div");i.id="vapi-icon-container";const o=document.createElement("img");o.src=n.icon||ia,o.alt="Icon",i.appendChild(o),t.appendChild(i)}}};function iu(r,t,e,n,i,o){let a=!1;const u=()=>{o(t,"loading"),a?(r.stop(),a=!1):(e||n?r.start(e,n):(console.log("squad ,",i,e,n),r.start(void 0,void 0,i)),a=!0)};r.on("call-start",()=>{o(t,"active")}),r.on("call-end",()=>{o(t,"idle")}),r.on("speech-start",()=>{t.classList.add("vapi-btn-is-speaking")}),r.on("speech-end",()=>{t.classList.remove("vapi-btn-is-speaking")}),t.addEventListener("click",u),r.on("volume-level",l=>{const p=Math.floor(l*10);for(let m=0;m<=10;m++)t.classList.remove(`vapi-btn-volume-${m}`);t.classList.add(`vapi-btn-volume-${p}`)})}const su=({apiKey:r="",assistant:t,assistantOverrides:e,squad:n,config:i={},createButton:o=!1,...a})=>{function u(m,g){const b={...m};return Object.keys(g).forEach(w=>{typeof g[w]=="object"&&g[w]!==null&&!Array.isArray(g[w])?b[w]=u(m[w]||{},g[w]):b[w]=g[w]}),b}const p=u({position:"bottom",offset:"40px",width:"50px",height:"50px",idle:{color:"rgb(93, 254, 202)",type:"round",title:"Have a quick question?",subtitle:"Talk with our AI assistant",icon:"https://unpkg.com/lucide-static@0.321.0/icons/phone.svg"},loading:{color:"rgb(93, 124, 202)",type:"round",title:"Connecting...",subtitle:"Please wait",icon:"https://unpkg.com/lucide-static@0.321.0/icons/loader-2.svg"},active:{color:"rgb(255, 0, 0)",type:"round",title:"Call is in progress...",subtitle:"End the call.",icon:"https://unpkg.com/lucide-static@0.321.0/icons/phone-off.svg"}},i);if(r&&(t||n)){const m=new eu(r);if(o){const g=ru(p),b=nu(p);document.body.appendChild(g),b(g,"idle"),iu(m,g,t,e,n,b)}return window.vapiSDK.vapi=m,m}else return console.error("API Key and Assistant Configurations are required. are required"),null};window.vapiSDK={run:su}});
